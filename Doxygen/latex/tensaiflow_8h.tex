\doxysection{Face\+\_\+\+Access\+\_\+inferencing/src/edge-\/impulse-\/sdk/classifier/inferencing\+\_\+engines/tensaiflow.h File Reference}
\hypertarget{tensaiflow_8h}{}\label{tensaiflow_8h}\index{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/classifier/inferencing\_engines/tensaiflow.h@{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/classifier/inferencing\_engines/tensaiflow.h}}
{\ttfamily \#include "{}model-\/parameters/model\+\_\+metadata.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/porting/ei\+\_\+classifier\+\_\+porting.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/classifier/ei\+\_\+fill\+\_\+result\+\_\+struct.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/classifier/ei\+\_\+run\+\_\+dsp.\+h"{}}\newline
{\ttfamily \#include "{}mcu.\+h"{}}\newline
Include dependency graph for tensaiflow.\+h\+:
% FIG 0
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{tensaiflow_8h_a962e90f08a8aec34ca7b6d9988ff7029}{infer}} (const void \texorpdfstring{$\ast$}{*}impulse\+\_\+arg, uint32\+\_\+t \texorpdfstring{$\ast$}{*}time, uint32\+\_\+t \texorpdfstring{$\ast$}{*}cycles)
\item 
void \mbox{\hyperlink{tensaiflow_8h_af0d58dffb4dd83434b01c8ed6f4b3432}{get\+\_\+data}} (const void \texorpdfstring{$\ast$}{*}impulse\+\_\+arg, int8\+\_\+t \texorpdfstring{$\ast$}{*}in\+\_\+buf\+\_\+0, uint16\+\_\+t in\+\_\+buf\+\_\+0\+\_\+dim\+\_\+0, uint16\+\_\+t in\+\_\+buf\+\_\+0\+\_\+dim\+\_\+1, uint16\+\_\+t in\+\_\+buf\+\_\+0\+\_\+dim\+\_\+2)
\item 
void \mbox{\hyperlink{tensaiflow_8h_a8b54a3825fbced5b4cf90c1c64bad050}{post\+\_\+process}} (const void \texorpdfstring{$\ast$}{*}impulse\+\_\+arg, int8\+\_\+t \texorpdfstring{$\ast$}{*}out\+\_\+buf\+\_\+0, int8\+\_\+t \texorpdfstring{$\ast$}{*}out\+\_\+buf\+\_\+1)
\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{tensaiflow_8h_a945f35e39a49bfe4e1194edaf89571cd}{run\+\_\+nn\+\_\+inference}} (const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}impulse, \mbox{\hyperlink{structei__feature__t}{ei\+\_\+feature\+\_\+t}} \texorpdfstring{$\ast$}{*}fmatrix, uint32\+\_\+t learn\+\_\+block\+\_\+index, uint32\+\_\+t \texorpdfstring{$\ast$}{*}input\+\_\+block\+\_\+ids, uint32\+\_\+t input\+\_\+block\+\_\+ids\+\_\+size, \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}, void \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a0819d397f9fba7b345b75fef1c1f782a}{config\+\_\+ptr}}, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}}=false)
\begin{DoxyCompactList}\small\item\em Do neural network inferencing over the processed feature matrix. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{tensaiflow_8h_a5086db080c7196118d01d4a4c4a1bd3c}{run\+\_\+nn\+\_\+inference\+\_\+image\+\_\+quantized}} (const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}impulse, \mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classei_1_1signal}{signal}}, \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}, void \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a0819d397f9fba7b345b75fef1c1f782a}{config\+\_\+ptr}}, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}}=false)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
int8\+\_\+t \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{tensaiflow_8h_a0f7d2f41808041ae903e1c417f3a6d0d}{processed\+\_\+features}}
\item 
int8\+\_\+t \mbox{\hyperlink{tensaiflow_8h_a63dc76b4f71867d1a9f7cd135894ac3f}{infer\+\_\+result}} \mbox{[}\mbox{\hyperlink{model__metadata_8h_a418cb88da93b0cc26bb74f11e5bbd81e}{EI\+\_\+\+CLASSIFIER\+\_\+\+LABEL\+\_\+\+COUNT}}\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{tensaiflow_8h_af0d58dffb4dd83434b01c8ed6f4b3432}\index{tensaiflow.h@{tensaiflow.h}!get\_data@{get\_data}}
\index{get\_data@{get\_data}!tensaiflow.h@{tensaiflow.h}}
\doxysubsubsection{\texorpdfstring{get\_data()}{get\_data()}}
{\footnotesize\ttfamily \label{tensaiflow_8h_af0d58dffb4dd83434b01c8ed6f4b3432} 
void get\+\_\+data (\begin{DoxyParamCaption}\item[{const void \texorpdfstring{$\ast$}{*}}]{impulse\+\_\+arg}{, }\item[{int8\+\_\+t \texorpdfstring{$\ast$}{*}}]{in\+\_\+buf\+\_\+0}{, }\item[{uint16\+\_\+t}]{in\+\_\+buf\+\_\+0\+\_\+dim\+\_\+0}{, }\item[{uint16\+\_\+t}]{in\+\_\+buf\+\_\+0\+\_\+dim\+\_\+1}{, }\item[{uint16\+\_\+t}]{in\+\_\+buf\+\_\+0\+\_\+dim\+\_\+2}{}\end{DoxyParamCaption})}

\Hypertarget{tensaiflow_8h_a962e90f08a8aec34ca7b6d9988ff7029}\index{tensaiflow.h@{tensaiflow.h}!infer@{infer}}
\index{infer@{infer}!tensaiflow.h@{tensaiflow.h}}
\doxysubsubsection{\texorpdfstring{infer()}{infer()}}
{\footnotesize\ttfamily \label{tensaiflow_8h_a962e90f08a8aec34ca7b6d9988ff7029} 
void infer (\begin{DoxyParamCaption}\item[{const void \texorpdfstring{$\ast$}{*}}]{impulse\+\_\+arg}{, }\item[{uint32\+\_\+t \texorpdfstring{$\ast$}{*}}]{time}{, }\item[{uint32\+\_\+t \texorpdfstring{$\ast$}{*}}]{cycles}{}\end{DoxyParamCaption})}

\Hypertarget{tensaiflow_8h_a8b54a3825fbced5b4cf90c1c64bad050}\index{tensaiflow.h@{tensaiflow.h}!post\_process@{post\_process}}
\index{post\_process@{post\_process}!tensaiflow.h@{tensaiflow.h}}
\doxysubsubsection{\texorpdfstring{post\_process()}{post\_process()}}
{\footnotesize\ttfamily \label{tensaiflow_8h_a8b54a3825fbced5b4cf90c1c64bad050} 
void post\+\_\+process (\begin{DoxyParamCaption}\item[{const void \texorpdfstring{$\ast$}{*}}]{impulse\+\_\+arg}{, }\item[{int8\+\_\+t \texorpdfstring{$\ast$}{*}}]{out\+\_\+buf\+\_\+0}{, }\item[{int8\+\_\+t \texorpdfstring{$\ast$}{*}}]{out\+\_\+buf\+\_\+1}{}\end{DoxyParamCaption})}

\Hypertarget{tensaiflow_8h_a945f35e39a49bfe4e1194edaf89571cd}\index{tensaiflow.h@{tensaiflow.h}!run\_nn\_inference@{run\_nn\_inference}}
\index{run\_nn\_inference@{run\_nn\_inference}!tensaiflow.h@{tensaiflow.h}}
\doxysubsubsection{\texorpdfstring{run\_nn\_inference()}{run\_nn\_inference()}}
{\footnotesize\ttfamily \label{tensaiflow_8h_a945f35e39a49bfe4e1194edaf89571cd} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} run\+\_\+nn\+\_\+inference (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{impulse}{, }\item[{\mbox{\hyperlink{structei__feature__t}{ei\+\_\+feature\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{fmatrix}{, }\item[{uint32\+\_\+t}]{learn\+\_\+block\+\_\+index}{, }\item[{uint32\+\_\+t \texorpdfstring{$\ast$}{*}}]{input\+\_\+block\+\_\+ids}{, }\item[{uint32\+\_\+t}]{input\+\_\+block\+\_\+ids\+\_\+size}{, }\item[{\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{result}{, }\item[{void \texorpdfstring{$\ast$}{*}}]{config\+\_\+ptr}{, }\item[{bool}]{debug}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Do neural network inferencing over the processed feature matrix. 


\begin{DoxyParams}[1]{Parameters}
 & {\em fmatrix} & Processed matrix \\
\hline
 & {\em result} & Output classifier results \\
\hline
\mbox{\texttt{ in}}  & {\em debug} & Debug output enable\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The ei impulse error. 
\end{DoxyReturn}
\Hypertarget{tensaiflow_8h_a5086db080c7196118d01d4a4c4a1bd3c}\index{tensaiflow.h@{tensaiflow.h}!run\_nn\_inference\_image\_quantized@{run\_nn\_inference\_image\_quantized}}
\index{run\_nn\_inference\_image\_quantized@{run\_nn\_inference\_image\_quantized}!tensaiflow.h@{tensaiflow.h}}
\doxysubsubsection{\texorpdfstring{run\_nn\_inference\_image\_quantized()}{run\_nn\_inference\_image\_quantized()}}
{\footnotesize\ttfamily \label{tensaiflow_8h_a5086db080c7196118d01d4a4c4a1bd3c} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} run\+\_\+nn\+\_\+inference\+\_\+image\+\_\+quantized (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{impulse}{, }\item[{\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{signal}{, }\item[{\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{result}{, }\item[{void \texorpdfstring{$\ast$}{*}}]{config\+\_\+ptr}{, }\item[{bool}]{debug}{ = {\ttfamily false}}\end{DoxyParamCaption})}

Special function to run the classifier on images, only works on TFLite models (either interpreter or EON or for tensaiflow) that allocates a lot less memory by quantizing in place. This only works if \textquotesingle{}can\+\_\+run\+\_\+classifier\+\_\+image\+\_\+quantized\textquotesingle{} returns EI\+\_\+\+IMPULSE\+\_\+\+OK. 

\doxysubsection{Variable Documentation}
\Hypertarget{tensaiflow_8h_a63dc76b4f71867d1a9f7cd135894ac3f}\index{tensaiflow.h@{tensaiflow.h}!infer\_result@{infer\_result}}
\index{infer\_result@{infer\_result}!tensaiflow.h@{tensaiflow.h}}
\doxysubsubsection{\texorpdfstring{infer\_result}{infer\_result}}
{\footnotesize\ttfamily \label{tensaiflow_8h_a63dc76b4f71867d1a9f7cd135894ac3f} 
int8\+\_\+t infer\+\_\+result\mbox{[}\mbox{\hyperlink{model__metadata_8h_a418cb88da93b0cc26bb74f11e5bbd81e}{EI\+\_\+\+CLASSIFIER\+\_\+\+LABEL\+\_\+\+COUNT}}\mbox{]}}

\Hypertarget{tensaiflow_8h_a0f7d2f41808041ae903e1c417f3a6d0d}\index{tensaiflow.h@{tensaiflow.h}!processed\_features@{processed\_features}}
\index{processed\_features@{processed\_features}!tensaiflow.h@{tensaiflow.h}}
\doxysubsubsection{\texorpdfstring{processed\_features}{processed\_features}}
{\footnotesize\ttfamily \label{tensaiflow_8h_a0f7d2f41808041ae903e1c417f3a6d0d} 
int8\+\_\+t\texorpdfstring{$\ast$}{*} processed\+\_\+features}

