\doxysection{Face\+\_\+\+Access\+\_\+inferencing/src/edge-\/impulse-\/sdk/porting/ethos-\/core-\/driver/src/ethosu\+\_\+device.h File Reference}
\hypertarget{ethosu__device_8h}{}\label{ethosu__device_8h}\index{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/porting/ethos-\/core-\/driver/src/ethosu\_device.h@{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/porting/ethos-\/core-\/driver/src/ethosu\_device.h}}
{\ttfamily \#include "{}ethosu\+\_\+types.\+h"{}}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
Include dependency graph for ethosu\+\_\+device.\+h\+:
% FIG 0
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{ethosu__device_8h_a2f19170e642b6ecfbaebe30a8fa54d34}{ETHOSU\+\_\+\+PMU\+\_\+\+NCOUNTERS}}~4
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{ethosu__device_8h_ab2a204f258ac6cae32e1b4617afa3da4}{ethosu\+\_\+dev\+\_\+init}} (void \texorpdfstring{$\ast$}{*}const base\+\_\+address, uint32\+\_\+t secure\+\_\+enable, uint32\+\_\+t privilege\+\_\+enable)
\item 
void \mbox{\hyperlink{ethosu__device_8h_a76cdc07f6bc4b1ce1733cf6d1379a066}{ethosu\+\_\+dev\+\_\+deinit}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev)
\item 
enum \mbox{\hyperlink{ethosu__types_8h_adc89c54143dacc5dec69c606ed8091c2}{ethosu\+\_\+error\+\_\+codes}} \mbox{\hyperlink{ethosu__device_8h_a495a036859f30661d8059797d839e69c}{ethosu\+\_\+dev\+\_\+axi\+\_\+init}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev)
\item 
void \mbox{\hyperlink{ethosu__device_8h_a5b6783969175e0438cabc22a3142c11e}{ethosu\+\_\+dev\+\_\+run\+\_\+command\+\_\+stream}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}cmd\+\_\+stream\+\_\+ptr, uint32\+\_\+t cms\+\_\+length, const uint64\+\_\+t \texorpdfstring{$\ast$}{*}base\+\_\+addr, int num\+\_\+base\+\_\+addr)
\item 
void \mbox{\hyperlink{ethosu__device_8h_ad0c7bf11134ab0c3453a00e599b2519b}{ethosu\+\_\+dev\+\_\+print\+\_\+err\+\_\+status}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev)
\item 
bool \mbox{\hyperlink{ethosu__device_8h_a6451df9d11b1cf8875dc49397bfda7c5}{ethosu\+\_\+dev\+\_\+handle\+\_\+interrupt}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev)
\item 
void \mbox{\hyperlink{ethosu__device_8h_a491ae9267c557166e7d4da43a19aab5a}{ethosu\+\_\+dev\+\_\+get\+\_\+hw\+\_\+info}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev, struct \mbox{\hyperlink{structethosu__hw__info}{ethosu\+\_\+hw\+\_\+info}} \texorpdfstring{$\ast$}{*}hwinfo)
\item 
bool \mbox{\hyperlink{ethosu__device_8h_aff00d33d5cd705aba864ce8889ed51bb}{ethosu\+\_\+dev\+\_\+verify\+\_\+access\+\_\+state}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev)
\item 
enum \mbox{\hyperlink{ethosu__types_8h_adc89c54143dacc5dec69c606ed8091c2}{ethosu\+\_\+error\+\_\+codes}} \mbox{\hyperlink{ethosu__device_8h_a223dd0830c84aee18b3696c5c140837c}{ethosu\+\_\+dev\+\_\+soft\+\_\+reset}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev)
\item 
enum \mbox{\hyperlink{ethosu__types_8h_adc89c54143dacc5dec69c606ed8091c2}{ethosu\+\_\+error\+\_\+codes}} \mbox{\hyperlink{ethosu__device_8h_aa857f51f98314fe3a4724379e12aebb7}{ethosu\+\_\+dev\+\_\+set\+\_\+clock\+\_\+and\+\_\+power}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev, enum \mbox{\hyperlink{ethosu__types_8h_a15000e00640f6a99fb8f8eb6cbee2c75}{ethosu\+\_\+clock\+\_\+q\+\_\+request}} clock\+\_\+q, enum \mbox{\hyperlink{ethosu__types_8h_a5d650f5f538efdaa82b964abad1846c5}{ethosu\+\_\+power\+\_\+q\+\_\+request}} power\+\_\+q)
\item 
bool \mbox{\hyperlink{ethosu__device_8h_a8607bf182cae174de82e743fd98c4a0f}{ethosu\+\_\+dev\+\_\+verify\+\_\+optimizer\+\_\+config}} (struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}dev, uint32\+\_\+t cfg\+\_\+in, uint32\+\_\+t id\+\_\+in)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{ethosu__device_8h_a2f19170e642b6ecfbaebe30a8fa54d34}\index{ethosu\_device.h@{ethosu\_device.h}!ETHOSU\_PMU\_NCOUNTERS@{ETHOSU\_PMU\_NCOUNTERS}}
\index{ETHOSU\_PMU\_NCOUNTERS@{ETHOSU\_PMU\_NCOUNTERS}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ETHOSU\_PMU\_NCOUNTERS}{ETHOSU\_PMU\_NCOUNTERS}}
{\footnotesize\ttfamily \label{ethosu__device_8h_a2f19170e642b6ecfbaebe30a8fa54d34} 
\#define ETHOSU\+\_\+\+PMU\+\_\+\+NCOUNTERS~4}



\doxysubsection{Function Documentation}
\Hypertarget{ethosu__device_8h_a495a036859f30661d8059797d839e69c}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_axi\_init@{ethosu\_dev\_axi\_init}}
\index{ethosu\_dev\_axi\_init@{ethosu\_dev\_axi\_init}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_axi\_init()}{ethosu\_dev\_axi\_init()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_a495a036859f30661d8059797d839e69c} 
enum \mbox{\hyperlink{ethosu__types_8h_adc89c54143dacc5dec69c606ed8091c2}{ethosu\+\_\+error\+\_\+codes}} ethosu\+\_\+dev\+\_\+axi\+\_\+init (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{}\end{DoxyParamCaption})}

Initialize AXI settings for device. \Hypertarget{ethosu__device_8h_a76cdc07f6bc4b1ce1733cf6d1379a066}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_deinit@{ethosu\_dev\_deinit}}
\index{ethosu\_dev\_deinit@{ethosu\_dev\_deinit}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_deinit()}{ethosu\_dev\_deinit()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_a76cdc07f6bc4b1ce1733cf6d1379a066} 
void ethosu\+\_\+dev\+\_\+deinit (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{}\end{DoxyParamCaption})}

Deinitialize the device. \Hypertarget{ethosu__device_8h_a491ae9267c557166e7d4da43a19aab5a}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_get\_hw\_info@{ethosu\_dev\_get\_hw\_info}}
\index{ethosu\_dev\_get\_hw\_info@{ethosu\_dev\_get\_hw\_info}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_get\_hw\_info()}{ethosu\_dev\_get\_hw\_info()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_a491ae9267c557166e7d4da43a19aab5a} 
void ethosu\+\_\+dev\+\_\+get\+\_\+hw\+\_\+info (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{, }\item[{struct \mbox{\hyperlink{structethosu__hw__info}{ethosu\+\_\+hw\+\_\+info}} \texorpdfstring{$\ast$}{*}}]{hwinfo}{}\end{DoxyParamCaption})}

Get hardware information from NPU 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em hwinfo} & Pointer to the hardware info struct to be filled in. \\
\hline
\end{DoxyParams}
\Hypertarget{ethosu__device_8h_a6451df9d11b1cf8875dc49397bfda7c5}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_handle\_interrupt@{ethosu\_dev\_handle\_interrupt}}
\index{ethosu\_dev\_handle\_interrupt@{ethosu\_dev\_handle\_interrupt}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_handle\_interrupt()}{ethosu\_dev\_handle\_interrupt()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_a6451df9d11b1cf8875dc49397bfda7c5} 
bool ethosu\+\_\+dev\+\_\+handle\+\_\+interrupt (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{}\end{DoxyParamCaption})}

Interrupt handler on device layer \begin{DoxyReturn}{Returns}
true if NPU status is OK, otherwise false 
\end{DoxyReturn}
\Hypertarget{ethosu__device_8h_ab2a204f258ac6cae32e1b4617afa3da4}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_init@{ethosu\_dev\_init}}
\index{ethosu\_dev\_init@{ethosu\_dev\_init}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_init()}{ethosu\_dev\_init()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_ab2a204f258ac6cae32e1b4617afa3da4} 
struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*} ethosu\+\_\+dev\+\_\+init (\begin{DoxyParamCaption}\item[{void \texorpdfstring{$\ast$}{*}const}]{base\+\_\+address}{, }\item[{uint32\+\_\+t}]{secure\+\_\+enable}{, }\item[{uint32\+\_\+t}]{privilege\+\_\+enable}{}\end{DoxyParamCaption})}

Initialize the device. \Hypertarget{ethosu__device_8h_ad0c7bf11134ab0c3453a00e599b2519b}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_print\_err\_status@{ethosu\_dev\_print\_err\_status}}
\index{ethosu\_dev\_print\_err\_status@{ethosu\_dev\_print\_err\_status}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_print\_err\_status()}{ethosu\_dev\_print\_err\_status()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_ad0c7bf11134ab0c3453a00e599b2519b} 
void ethosu\+\_\+dev\+\_\+print\+\_\+err\+\_\+status (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{}\end{DoxyParamCaption})}

Print information on NPU error status \Hypertarget{ethosu__device_8h_a5b6783969175e0438cabc22a3142c11e}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_run\_command\_stream@{ethosu\_dev\_run\_command\_stream}}
\index{ethosu\_dev\_run\_command\_stream@{ethosu\_dev\_run\_command\_stream}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_run\_command\_stream()}{ethosu\_dev\_run\_command\_stream()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_a5b6783969175e0438cabc22a3142c11e} 
void ethosu\+\_\+dev\+\_\+run\+\_\+command\+\_\+stream (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{cmd\+\_\+stream\+\_\+ptr}{, }\item[{uint32\+\_\+t}]{cms\+\_\+length}{, }\item[{const uint64\+\_\+t \texorpdfstring{$\ast$}{*}}]{base\+\_\+addr}{, }\item[{int}]{num\+\_\+base\+\_\+addr}{}\end{DoxyParamCaption})}

Execute a given command stream on NPU. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cmd\+\_\+stream\+\_\+ptr} & Pointer to the command stream \\
\hline
\mbox{\texttt{ in}}  & {\em cms\+\_\+length} & Command stream length \\
\hline
\mbox{\texttt{ in}}  & {\em base\+\_\+addr} & Pointer to array of base addresses
\begin{DoxyItemize}
\item 0\+: weight tensor
\item 1\+: scratch tensor
\item All input tensors
\item All output tensors 
\end{DoxyItemize}\\
\hline
\mbox{\texttt{ in}}  & {\em num\+\_\+base\+\_\+addr} & Number of base addresses. \\
\hline
\end{DoxyParams}
\Hypertarget{ethosu__device_8h_aa857f51f98314fe3a4724379e12aebb7}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_set\_clock\_and\_power@{ethosu\_dev\_set\_clock\_and\_power}}
\index{ethosu\_dev\_set\_clock\_and\_power@{ethosu\_dev\_set\_clock\_and\_power}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_set\_clock\_and\_power()}{ethosu\_dev\_set\_clock\_and\_power()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_aa857f51f98314fe3a4724379e12aebb7} 
enum \mbox{\hyperlink{ethosu__types_8h_adc89c54143dacc5dec69c606ed8091c2}{ethosu\+\_\+error\+\_\+codes}} ethosu\+\_\+dev\+\_\+set\+\_\+clock\+\_\+and\+\_\+power (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{, }\item[{enum \mbox{\hyperlink{ethosu__types_8h_a15000e00640f6a99fb8f8eb6cbee2c75}{ethosu\+\_\+clock\+\_\+q\+\_\+request}}}]{clock\+\_\+q}{, }\item[{enum \mbox{\hyperlink{ethosu__types_8h_a5d650f5f538efdaa82b964abad1846c5}{ethosu\+\_\+power\+\_\+q\+\_\+request}}}]{power\+\_\+q}{}\end{DoxyParamCaption})}

Enable/disable clock and power using clock/power q interface. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em clock\+\_\+q} & Clock q ENABLE/\+DISABLE clock\+\_\+q\+\_\+request. \\
\hline
\mbox{\texttt{ in}}  & {\em power\+\_\+q} & Power q ENABLE/\+DISABLE power\+\_\+q\+\_\+request. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\doxylink{ethosu__types_8h_adc89c54143dacc5dec69c606ed8091c2}{ethosu\+\_\+error\+\_\+codes} 
\end{DoxyReturn}
\Hypertarget{ethosu__device_8h_a223dd0830c84aee18b3696c5c140837c}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_soft\_reset@{ethosu\_dev\_soft\_reset}}
\index{ethosu\_dev\_soft\_reset@{ethosu\_dev\_soft\_reset}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_soft\_reset()}{ethosu\_dev\_soft\_reset()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_a223dd0830c84aee18b3696c5c140837c} 
enum \mbox{\hyperlink{ethosu__types_8h_adc89c54143dacc5dec69c606ed8091c2}{ethosu\+\_\+error\+\_\+codes}} ethosu\+\_\+dev\+\_\+soft\+\_\+reset (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{}\end{DoxyParamCaption})}

Performs a NPU soft reset and waits for the NPU to become ready \begin{DoxyReturn}{Returns}
\doxylink{ethosu__types_8h_adc89c54143dacc5dec69c606ed8091c2}{ethosu\+\_\+error\+\_\+codes} 
\end{DoxyReturn}
\Hypertarget{ethosu__device_8h_aff00d33d5cd705aba864ce8889ed51bb}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_verify\_access\_state@{ethosu\_dev\_verify\_access\_state}}
\index{ethosu\_dev\_verify\_access\_state@{ethosu\_dev\_verify\_access\_state}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_verify\_access\_state()}{ethosu\_dev\_verify\_access\_state()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_aff00d33d5cd705aba864ce8889ed51bb} 
bool ethosu\+\_\+dev\+\_\+verify\+\_\+access\+\_\+state (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{}\end{DoxyParamCaption})}

Verify that requested security state and privilege mode are active \begin{DoxyReturn}{Returns}
32 bit status value 
\end{DoxyReturn}
\Hypertarget{ethosu__device_8h_a8607bf182cae174de82e743fd98c4a0f}\index{ethosu\_device.h@{ethosu\_device.h}!ethosu\_dev\_verify\_optimizer\_config@{ethosu\_dev\_verify\_optimizer\_config}}
\index{ethosu\_dev\_verify\_optimizer\_config@{ethosu\_dev\_verify\_optimizer\_config}!ethosu\_device.h@{ethosu\_device.h}}
\doxysubsubsection{\texorpdfstring{ethosu\_dev\_verify\_optimizer\_config()}{ethosu\_dev\_verify\_optimizer\_config()}}
{\footnotesize\ttfamily \label{ethosu__device_8h_a8607bf182cae174de82e743fd98c4a0f} 
bool ethosu\+\_\+dev\+\_\+verify\+\_\+optimizer\+\_\+config (\begin{DoxyParamCaption}\item[{struct \mbox{\hyperlink{structethosu__device}{ethosu\+\_\+device}} \texorpdfstring{$\ast$}{*}}]{dev}{, }\item[{uint32\+\_\+t}]{cfg\+\_\+in}{, }\item[{uint32\+\_\+t}]{id\+\_\+in}{}\end{DoxyParamCaption})}

Verifies that optimizer parameters from model are compatible with the hardware 
\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em cfg} & Config data from optimizer. \\
\hline
\mbox{\texttt{ in}}  & {\em id} & Id data from optimizer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if parameters match with hardware, false otherwise. 
\end{DoxyReturn}
