\doxysection{Face\+\_\+\+Access\+\_\+inferencing/examples/esp32/esp32\+\_\+fusion/esp32\+\_\+fusion.ino File Reference}
\hypertarget{esp32__fusion_8ino}{}\label{esp32__fusion_8ino}\index{Face\_Access\_inferencing/examples/esp32/esp32\_fusion/esp32\_fusion.ino@{Face\_Access\_inferencing/examples/esp32/esp32\_fusion/esp32\_fusion.ino}}
{\ttfamily \#include $<$Face\+\_\+\+Access\+\_\+inferencing.\+h$>$}\newline
{\ttfamily \#include $<$LIS3\+DHTR.\+h$>$}\newline
{\ttfamily \#include $<$Wire.\+h$>$}\newline
Include dependency graph for esp32\+\_\+fusion.\+ino\+:
% FIG 0
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structei_sensors}{ei\+Sensors}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{esp32__fusion_8ino_a4ad638d463e8ba649fab9da877050c06}{CONVERT\+\_\+\+G\+\_\+\+TO\+\_\+\+MS2}}~9.\+80665f
\item 
\#define \mbox{\hyperlink{esp32__fusion_8ino_aab9b1b18aa0881947af32ea81a139184}{MAX\+\_\+\+ACCEPTED\+\_\+\+RANGE}}~2.\+0f
\item 
\#define \mbox{\hyperlink{esp32__fusion_8ino_ab3d97ccc2a0d5e0a7def0d050f763f52}{N\+\_\+\+SENSORS}}~7
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
float \mbox{\hyperlink{esp32__fusion_8ino_ae55965983185240df7ff78a1defb1538}{ei\+\_\+get\+\_\+sign}} (float number)
\begin{DoxyCompactList}\small\item\em Return the sign of the number. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{esp32__fusion_8ino_a71826999e7685d741c3e6bba90bb2565}{ei\+\_\+connect\+\_\+fusion\+\_\+list}} (const char \texorpdfstring{$\ast$}{*}input\+\_\+list)
\begin{DoxyCompactList}\small\item\em Check if requested input list is valid sensor fusion, create sensor buffer. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{esp32__fusion_8ino_ac9e3c90a1a81d88ee18036efa85b8395}{init\+\_\+\+IMU}} (void)
\item 
bool \mbox{\hyperlink{esp32__fusion_8ino_a38a01c97ac7941eb30f4406b280a7575}{init\+\_\+\+ADC}} (void)
\item 
uint8\+\_\+t \mbox{\hyperlink{esp32__fusion_8ino_acec37d6a2333b4b28742b13067bbcd76}{poll\+\_\+\+IMU}} (void)
\item 
uint8\+\_\+t \mbox{\hyperlink{esp32__fusion_8ino_a7b07905d972f91e3677bb1794b7ffafa}{poll\+\_\+\+ADC}} (void)
\item 
void \mbox{\hyperlink{esp32__fusion_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Arduino setup function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{esp32__fusion_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Get data and run inferencing. \end{DoxyCompactList}\item 
static int8\+\_\+t \mbox{\hyperlink{esp32__fusion_8ino_a382055621618f3a68f9140de24f881b7}{ei\+\_\+find\+\_\+axis}} (char \texorpdfstring{$\ast$}{*}axis\+\_\+name)
\begin{DoxyCompactList}\small\item\em Go through sensor list to find matching axis name. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static const bool \mbox{\hyperlink{esp32__fusion_8ino_a448a9309476e67d85c3a3d13e9468db9}{debug\+\_\+nn}} = false
\item 
static float \mbox{\hyperlink{esp32__fusion_8ino_afe3397f3db3fc3e65a2bc8ebc7249c5f}{data}} \mbox{[}\mbox{\hyperlink{esp32__fusion_8ino_ab3d97ccc2a0d5e0a7def0d050f763f52}{N\+\_\+\+SENSORS}}\mbox{]}
\item 
static int8\+\_\+t \mbox{\hyperlink{esp32__fusion_8ino_a3ab3987d9a16160d2a772c8e0cbe99fb}{fusion\+\_\+sensors}} \mbox{[}\mbox{\hyperlink{esp32__fusion_8ino_ab3d97ccc2a0d5e0a7def0d050f763f52}{N\+\_\+\+SENSORS}}\mbox{]}
\item 
static int \mbox{\hyperlink{esp32__fusion_8ino_aa7c353b7084662fffce51a82ebfc3cf6}{fusion\+\_\+ix}} = 0
\item 
LIS3\+DHTR$<$ Two\+Wire $>$ \mbox{\hyperlink{esp32__fusion_8ino_ab2a12ae4de2bbb5db1b9b1e7adb4aaca}{lis}}
\item 
\mbox{\hyperlink{structei_sensors}{ei\+Sensors}} \mbox{\hyperlink{esp32__fusion_8ino_a383c2dcea23ef082bd7a4f33afa64ef0}{sensors}} \mbox{[}$\,$\mbox{]}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{esp32__fusion_8ino_a4ad638d463e8ba649fab9da877050c06}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!CONVERT\_G\_TO\_MS2@{CONVERT\_G\_TO\_MS2}}
\index{CONVERT\_G\_TO\_MS2@{CONVERT\_G\_TO\_MS2}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{CONVERT\_G\_TO\_MS2}{CONVERT\_G\_TO\_MS2}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a4ad638d463e8ba649fab9da877050c06} 
\#define CONVERT\+\_\+\+G\+\_\+\+TO\+\_\+\+MS2~9.\+80665f}

\Hypertarget{esp32__fusion_8ino_aab9b1b18aa0881947af32ea81a139184}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!MAX\_ACCEPTED\_RANGE@{MAX\_ACCEPTED\_RANGE}}
\index{MAX\_ACCEPTED\_RANGE@{MAX\_ACCEPTED\_RANGE}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{MAX\_ACCEPTED\_RANGE}{MAX\_ACCEPTED\_RANGE}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_aab9b1b18aa0881947af32ea81a139184} 
\#define MAX\+\_\+\+ACCEPTED\+\_\+\+RANGE~2.\+0f}

\Hypertarget{esp32__fusion_8ino_ab3d97ccc2a0d5e0a7def0d050f763f52}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!N\_SENSORS@{N\_SENSORS}}
\index{N\_SENSORS@{N\_SENSORS}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{N\_SENSORS}{N\_SENSORS}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_ab3d97ccc2a0d5e0a7def0d050f763f52} 
\#define N\+\_\+\+SENSORS~7}

Number sensor axes used 

\doxysubsection{Function Documentation}
\Hypertarget{esp32__fusion_8ino_a71826999e7685d741c3e6bba90bb2565}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!ei\_connect\_fusion\_list@{ei\_connect\_fusion\_list}}
\index{ei\_connect\_fusion\_list@{ei\_connect\_fusion\_list}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{ei\_connect\_fusion\_list()}{ei\_connect\_fusion\_list()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a71826999e7685d741c3e6bba90bb2565} 
static bool ei\+\_\+connect\+\_\+fusion\+\_\+list (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{input\+\_\+list}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Check if requested input list is valid sensor fusion, create sensor buffer. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em input\+\_\+list} & Axes list to sample (ie. "{}acc\+X + gyr\+Y + mag\+Z"{}) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em false} & if invalid sensor\+\_\+list \\
\hline
\end{DoxyRetVals}
\Hypertarget{esp32__fusion_8ino_a382055621618f3a68f9140de24f881b7}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!ei\_find\_axis@{ei\_find\_axis}}
\index{ei\_find\_axis@{ei\_find\_axis}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{ei\_find\_axis()}{ei\_find\_axis()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a382055621618f3a68f9140de24f881b7} 
static int8\+\_\+t ei\+\_\+find\+\_\+axis (\begin{DoxyParamCaption}\item[{char \texorpdfstring{$\ast$}{*}}]{axis\+\_\+name}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Go through sensor list to find matching axis name. 


\begin{DoxyParams}{Parameters}
{\em axis\+\_\+name} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int8\+\_\+t index in sensor list, -\/1 if axis name is not found 
\end{DoxyReturn}
\Hypertarget{esp32__fusion_8ino_ae55965983185240df7ff78a1defb1538}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!ei\_get\_sign@{ei\_get\_sign}}
\index{ei\_get\_sign@{ei\_get\_sign}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{ei\_get\_sign()}{ei\_get\_sign()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_ae55965983185240df7ff78a1defb1538} 
float ei\+\_\+get\+\_\+sign (\begin{DoxyParamCaption}\item[{float}]{number}{}\end{DoxyParamCaption})}



Return the sign of the number. 


\begin{DoxyParams}{Parameters}
{\em number} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int 1 if positive (or 0) -\/1 if negative 
\end{DoxyReturn}
\Hypertarget{esp32__fusion_8ino_a38a01c97ac7941eb30f4406b280a7575}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!init\_ADC@{init\_ADC}}
\index{init\_ADC@{init\_ADC}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{init\_ADC()}{init\_ADC()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a38a01c97ac7941eb30f4406b280a7575} 
bool init\+\_\+\+ADC (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

\Hypertarget{esp32__fusion_8ino_ac9e3c90a1a81d88ee18036efa85b8395}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!init\_IMU@{init\_IMU}}
\index{init\_IMU@{init\_IMU}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{init\_IMU()}{init\_IMU()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_ac9e3c90a1a81d88ee18036efa85b8395} 
bool init\+\_\+\+IMU (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

\Hypertarget{esp32__fusion_8ino_afe461d27b9c48d5921c00d521181f12f}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!loop@{loop}}
\index{loop@{loop}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_afe461d27b9c48d5921c00d521181f12f} 
void loop (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Get data and run inferencing. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em debug} & Get debug info if true \\
\hline
\end{DoxyParams}
\Hypertarget{esp32__fusion_8ino_a7b07905d972f91e3677bb1794b7ffafa}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!poll\_ADC@{poll\_ADC}}
\index{poll\_ADC@{poll\_ADC}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{poll\_ADC()}{poll\_ADC()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a7b07905d972f91e3677bb1794b7ffafa} 
uint8\+\_\+t poll\+\_\+\+ADC (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

\Hypertarget{esp32__fusion_8ino_acec37d6a2333b4b28742b13067bbcd76}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!poll\_IMU@{poll\_IMU}}
\index{poll\_IMU@{poll\_IMU}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{poll\_IMU()}{poll\_IMU()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_acec37d6a2333b4b28742b13067bbcd76} 
uint8\+\_\+t poll\+\_\+\+IMU (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}

\Hypertarget{esp32__fusion_8ino_a4fc01d736fe50cf5b977f755b675f11d}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!setup@{setup}}
\index{setup@{setup}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a4fc01d736fe50cf5b977f755b675f11d} 
void setup (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Arduino setup function. 



\doxysubsection{Variable Documentation}
\Hypertarget{esp32__fusion_8ino_afe3397f3db3fc3e65a2bc8ebc7249c5f}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!data@{data}}
\index{data@{data}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{data}{data}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_afe3397f3db3fc3e65a2bc8ebc7249c5f} 
float data\mbox{[}\mbox{\hyperlink{esp32__fusion_8ino_ab3d97ccc2a0d5e0a7def0d050f763f52}{N\+\_\+\+SENSORS}}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{esp32__fusion_8ino_a448a9309476e67d85c3a3d13e9468db9}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!debug\_nn@{debug\_nn}}
\index{debug\_nn@{debug\_nn}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{debug\_nn}{debug\_nn}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a448a9309476e67d85c3a3d13e9468db9} 
const bool debug\+\_\+nn = false\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{esp32__fusion_8ino_aa7c353b7084662fffce51a82ebfc3cf6}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!fusion\_ix@{fusion\_ix}}
\index{fusion\_ix@{fusion\_ix}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{fusion\_ix}{fusion\_ix}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_aa7c353b7084662fffce51a82ebfc3cf6} 
int fusion\+\_\+ix = 0\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{esp32__fusion_8ino_a3ab3987d9a16160d2a772c8e0cbe99fb}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!fusion\_sensors@{fusion\_sensors}}
\index{fusion\_sensors@{fusion\_sensors}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{fusion\_sensors}{fusion\_sensors}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a3ab3987d9a16160d2a772c8e0cbe99fb} 
int8\+\_\+t fusion\+\_\+sensors\mbox{[}\mbox{\hyperlink{esp32__fusion_8ino_ab3d97ccc2a0d5e0a7def0d050f763f52}{N\+\_\+\+SENSORS}}\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{esp32__fusion_8ino_ab2a12ae4de2bbb5db1b9b1e7adb4aaca}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!lis@{lis}}
\index{lis@{lis}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{lis}{lis}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_ab2a12ae4de2bbb5db1b9b1e7adb4aaca} 
LIS3\+DHTR$<$Two\+Wire$>$ lis}

\Hypertarget{esp32__fusion_8ino_a383c2dcea23ef082bd7a4f33afa64ef0}\index{esp32\_fusion.ino@{esp32\_fusion.ino}!sensors@{sensors}}
\index{sensors@{sensors}!esp32\_fusion.ino@{esp32\_fusion.ino}}
\doxysubsubsection{\texorpdfstring{sensors}{sensors}}
{\footnotesize\ttfamily \label{esp32__fusion_8ino_a383c2dcea23ef082bd7a4f33afa64ef0} 
\mbox{\hyperlink{structei_sensors}{ei\+Sensors}} sensors\mbox{[}$\,$\mbox{]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{\{}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{"{}accX"{}},\ \&\mbox{\hyperlink{esp32__fusion_8ino_afe3397f3db3fc3e65a2bc8ebc7249c5f}{data}}[0],\ \&\mbox{\hyperlink{esp32__fusion_8ino_acec37d6a2333b4b28742b13067bbcd76}{poll\_IMU}},\ \&\mbox{\hyperlink{esp32__fusion_8ino_ac9e3c90a1a81d88ee18036efa85b8395}{init\_IMU}},\ -\/1,}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{"{}accY"{}},\ \&\mbox{\hyperlink{esp32__fusion_8ino_afe3397f3db3fc3e65a2bc8ebc7249c5f}{data}}[1],\ \&\mbox{\hyperlink{esp32__fusion_8ino_acec37d6a2333b4b28742b13067bbcd76}{poll\_IMU}},\ \&\mbox{\hyperlink{esp32__fusion_8ino_ac9e3c90a1a81d88ee18036efa85b8395}{init\_IMU}},\ -\/1,}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{"{}accZ"{}},\ \&\mbox{\hyperlink{esp32__fusion_8ino_afe3397f3db3fc3e65a2bc8ebc7249c5f}{data}}[2],\ \&\mbox{\hyperlink{esp32__fusion_8ino_acec37d6a2333b4b28742b13067bbcd76}{poll\_IMU}},\ \&\mbox{\hyperlink{esp32__fusion_8ino_ac9e3c90a1a81d88ee18036efa85b8395}{init\_IMU}},\ -\/1,}
\DoxyCodeLine{\ \ \ \ \textcolor{stringliteral}{"{}adc"{}},\ \&\mbox{\hyperlink{esp32__fusion_8ino_afe3397f3db3fc3e65a2bc8ebc7249c5f}{data}}[6],\ \&\mbox{\hyperlink{esp32__fusion_8ino_a7b07905d972f91e3677bb1794b7ffafa}{poll\_ADC}},\ \&\mbox{\hyperlink{esp32__fusion_8ino_a38a01c97ac7941eb30f4406b280a7575}{init\_ADC}},\ -\/1,}
\DoxyCodeLine{\}}

\end{DoxyCode}
Used sensors value function connected to label name 