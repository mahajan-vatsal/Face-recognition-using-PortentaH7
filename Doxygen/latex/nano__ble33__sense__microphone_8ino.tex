\doxysection{Face\+\_\+\+Access\+\_\+inferencing/examples/nano\+\_\+ble33\+\_\+sense/nano\+\_\+ble33\+\_\+sense\+\_\+microphone/nano\+\_\+ble33\+\_\+sense\+\_\+microphone.ino File Reference}
\hypertarget{nano__ble33__sense__microphone_8ino}{}\label{nano__ble33__sense__microphone_8ino}\index{Face\_Access\_inferencing/examples/nano\_ble33\_sense/nano\_ble33\_sense\_microphone/nano\_ble33\_sense\_microphone.ino@{Face\_Access\_inferencing/examples/nano\_ble33\_sense/nano\_ble33\_sense\_microphone/nano\_ble33\_sense\_microphone.ino}}
{\ttfamily \#include $<$PDM.\+h$>$}\newline
{\ttfamily \#include $<$Face\+\_\+\+Access\+\_\+inferencing.\+h$>$}\newline
Include dependency graph for nano\+\_\+ble33\+\_\+sense\+\_\+microphone.\+ino\+:
% FIG 0
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structinference__t}{inference\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_a84f0987db19e2d3300d7c63929613f66}{EIDSP\+\_\+\+QUANTIZE\+\_\+\+FILTERBANK}}~0
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Arduino setup function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Arduino main function. Runs the inferencing loop. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_a1a8a3d55302d30250163019950b0894d}{pdm\+\_\+data\+\_\+ready\+\_\+inference\+\_\+callback}} (void)
\begin{DoxyCompactList}\small\item\em PDM buffer full callback Get data and call audio thread callback. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_ab74ee7e3943fe5e0eb9f6c0c2ca18c45}{microphone\+\_\+inference\+\_\+start}} (uint32\+\_\+t n\+\_\+samples)
\begin{DoxyCompactList}\small\item\em Init inferencing struct and setup/start PDM. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_ac3b50445cd9fdfc75ac49692ab0f910c}{microphone\+\_\+inference\+\_\+record}} (void)
\begin{DoxyCompactList}\small\item\em Wait on new data. \end{DoxyCompactList}\item 
static int \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_a3f715c2399692f3c7368ecda003c8fe0}{microphone\+\_\+audio\+\_\+signal\+\_\+get\+\_\+data}} (size\+\_\+t \mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcaf138809236f667e9686fdd4aaf17705_aed7ea92f45bd273dde380a45ddced592}{offset}}, size\+\_\+t length, float \texorpdfstring{$\ast$}{*}out\+\_\+ptr)
\item 
static void \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_af8bdb6be12449c8fa46f6fcc91847087}{microphone\+\_\+inference\+\_\+end}} (void)
\begin{DoxyCompactList}\small\item\em Stop PDM and release buffers. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{structinference__t}{inference\+\_\+t}} \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_a5fe36ec121fc3857a29308445d1c863c}{inference}}
\item 
static signed short \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_a8456c8c78a9e2e88458e630532bf0c69}{sample\+Buffer}} \mbox{[}2048\mbox{]}
\item 
static bool \mbox{\hyperlink{nano__ble33__sense__microphone_8ino_ac810bc03820882580f7d2a2589678973}{debug\+\_\+nn}} = false
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{nano__ble33__sense__microphone_8ino_a84f0987db19e2d3300d7c63929613f66}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!EIDSP\_QUANTIZE\_FILTERBANK@{EIDSP\_QUANTIZE\_FILTERBANK}}
\index{EIDSP\_QUANTIZE\_FILTERBANK@{EIDSP\_QUANTIZE\_FILTERBANK}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{EIDSP\_QUANTIZE\_FILTERBANK}{EIDSP\_QUANTIZE\_FILTERBANK}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_a84f0987db19e2d3300d7c63929613f66} 
\#define EIDSP\+\_\+\+QUANTIZE\+\_\+\+FILTERBANK~0}



\doxysubsection{Function Documentation}
\Hypertarget{nano__ble33__sense__microphone_8ino_afe461d27b9c48d5921c00d521181f12f}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!loop@{loop}}
\index{loop@{loop}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_afe461d27b9c48d5921c00d521181f12f} 
void loop (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Arduino main function. Runs the inferencing loop. 

Get data and run inferencing. \Hypertarget{nano__ble33__sense__microphone_8ino_a3f715c2399692f3c7368ecda003c8fe0}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!microphone\_audio\_signal\_get\_data@{microphone\_audio\_signal\_get\_data}}
\index{microphone\_audio\_signal\_get\_data@{microphone\_audio\_signal\_get\_data}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{microphone\_audio\_signal\_get\_data()}{microphone\_audio\_signal\_get\_data()}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_a3f715c2399692f3c7368ecda003c8fe0} 
static int microphone\+\_\+audio\+\_\+signal\+\_\+get\+\_\+data (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{offset}{, }\item[{size\+\_\+t}]{length}{, }\item[{float \texorpdfstring{$\ast$}{*}}]{out\+\_\+ptr}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Get raw audio signal data \Hypertarget{nano__ble33__sense__microphone_8ino_af8bdb6be12449c8fa46f6fcc91847087}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!microphone\_inference\_end@{microphone\_inference\_end}}
\index{microphone\_inference\_end@{microphone\_inference\_end}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{microphone\_inference\_end()}{microphone\_inference\_end()}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_af8bdb6be12449c8fa46f6fcc91847087} 
static void microphone\+\_\+inference\+\_\+end (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Stop PDM and release buffers. 

\Hypertarget{nano__ble33__sense__microphone_8ino_ac3b50445cd9fdfc75ac49692ab0f910c}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!microphone\_inference\_record@{microphone\_inference\_record}}
\index{microphone\_inference\_record@{microphone\_inference\_record}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{microphone\_inference\_record()}{microphone\_inference\_record()}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_ac3b50445cd9fdfc75ac49692ab0f910c} 
static bool microphone\+\_\+inference\+\_\+record (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Wait on new data. 

\begin{DoxyReturn}{Returns}
True when finished 
\end{DoxyReturn}
\Hypertarget{nano__ble33__sense__microphone_8ino_ab74ee7e3943fe5e0eb9f6c0c2ca18c45}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!microphone\_inference\_start@{microphone\_inference\_start}}
\index{microphone\_inference\_start@{microphone\_inference\_start}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{microphone\_inference\_start()}{microphone\_inference\_start()}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_ab74ee7e3943fe5e0eb9f6c0c2ca18c45} 
static bool microphone\+\_\+inference\+\_\+start (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{n\+\_\+samples}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Init inferencing struct and setup/start PDM. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em n\+\_\+samples} & The n samples\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{ description\+\_\+of\+\_\+the\+\_\+return\+\_\+value \} 
\end{DoxyReturn}
\Hypertarget{nano__ble33__sense__microphone_8ino_a1a8a3d55302d30250163019950b0894d}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!pdm\_data\_ready\_inference\_callback@{pdm\_data\_ready\_inference\_callback}}
\index{pdm\_data\_ready\_inference\_callback@{pdm\_data\_ready\_inference\_callback}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{pdm\_data\_ready\_inference\_callback()}{pdm\_data\_ready\_inference\_callback()}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_a1a8a3d55302d30250163019950b0894d} 
static void pdm\+\_\+data\+\_\+ready\+\_\+inference\+\_\+callback (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



PDM buffer full callback Get data and call audio thread callback. 

\Hypertarget{nano__ble33__sense__microphone_8ino_a4fc01d736fe50cf5b977f755b675f11d}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!setup@{setup}}
\index{setup@{setup}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_a4fc01d736fe50cf5b977f755b675f11d} 
void setup (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Arduino setup function. 



\doxysubsection{Variable Documentation}
\Hypertarget{nano__ble33__sense__microphone_8ino_ac810bc03820882580f7d2a2589678973}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!debug\_nn@{debug\_nn}}
\index{debug\_nn@{debug\_nn}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{debug\_nn}{debug\_nn}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_ac810bc03820882580f7d2a2589678973} 
bool debug\+\_\+nn = false\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{nano__ble33__sense__microphone_8ino_a5fe36ec121fc3857a29308445d1c863c}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!inference@{inference}}
\index{inference@{inference}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{inference}{inference}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_a5fe36ec121fc3857a29308445d1c863c} 
\mbox{\hyperlink{structinference__t}{inference\+\_\+t}} inference\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{nano__ble33__sense__microphone_8ino_a8456c8c78a9e2e88458e630532bf0c69}\index{nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}!sampleBuffer@{sampleBuffer}}
\index{sampleBuffer@{sampleBuffer}!nano\_ble33\_sense\_microphone.ino@{nano\_ble33\_sense\_microphone.ino}}
\doxysubsubsection{\texorpdfstring{sampleBuffer}{sampleBuffer}}
{\footnotesize\ttfamily \label{nano__ble33__sense__microphone_8ino_a8456c8c78a9e2e88458e630532bf0c69} 
signed short sample\+Buffer\mbox{[}2048\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

