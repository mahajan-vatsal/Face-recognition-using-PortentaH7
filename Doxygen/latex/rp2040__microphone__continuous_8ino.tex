\doxysection{Face\+\_\+\+Access\+\_\+inferencing/examples/rp2040/rp2040\+\_\+microphone\+\_\+continuous/rp2040\+\_\+microphone\+\_\+continuous.ino File Reference}
\hypertarget{rp2040__microphone__continuous_8ino}{}\label{rp2040__microphone__continuous_8ino}\index{Face\_Access\_inferencing/examples/rp2040/rp2040\_microphone\_continuous/rp2040\_microphone\_continuous.ino@{Face\_Access\_inferencing/examples/rp2040/rp2040\_microphone\_continuous/rp2040\_microphone\_continuous.ino}}
{\ttfamily \#include $<$Face\+\_\+\+Access\+\_\+inferencing.\+h$>$}\newline
{\ttfamily \#include $<$PDM.\+h$>$}\newline
Include dependency graph for rp2040\+\_\+microphone\+\_\+continuous.\+ino\+:
% FIG 0
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structinference__t}{inference\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{rp2040__microphone__continuous_8ino_a84f0987db19e2d3300d7c63929613f66}{EIDSP\+\_\+\+QUANTIZE\+\_\+\+FILTERBANK}}~0
\item 
\#define \mbox{\hyperlink{rp2040__microphone__continuous_8ino_a40b974887b8b0ed817ed34f2818f5be1}{EI\+\_\+\+CLASSIFIER\+\_\+\+SLICES\+\_\+\+PER\+\_\+\+MODEL\+\_\+\+WINDOW}}~3
\item 
\#define \mbox{\hyperlink{rp2040__microphone__continuous_8ino_aa8618d19213776a655bcace78f0c07df}{EI\+\_\+\+CLASSIFIER\+\_\+\+SLICE\+\_\+\+SIZE}}~(\mbox{\hyperlink{model__metadata_8h_a44e6501355d945468aac584b5556f4b0}{EI\+\_\+\+CLASSIFIER\+\_\+\+RAW\+\_\+\+SAMPLE\+\_\+\+COUNT}} / \mbox{\hyperlink{nano__ble33__sense__microphone__continuous_8ino_a40b974887b8b0ed817ed34f2818f5be1}{EI\+\_\+\+CLASSIFIER\+\_\+\+SLICES\+\_\+\+PER\+\_\+\+MODEL\+\_\+\+WINDOW}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{rp2040__microphone__continuous_8ino_a4fc01d736fe50cf5b977f755b675f11d}{setup}} ()
\begin{DoxyCompactList}\small\item\em Arduino setup function. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{rp2040__microphone__continuous_8ino_afe461d27b9c48d5921c00d521181f12f}{loop}} ()
\begin{DoxyCompactList}\small\item\em Arduino main function. Runs the inferencing loop. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{rp2040__microphone__continuous_8ino_a1a8a3d55302d30250163019950b0894d}{pdm\+\_\+data\+\_\+ready\+\_\+inference\+\_\+callback}} (void)
\begin{DoxyCompactList}\small\item\em PDM buffer full callback Copy audio data to app buffers. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{rp2040__microphone__continuous_8ino_ab74ee7e3943fe5e0eb9f6c0c2ca18c45}{microphone\+\_\+inference\+\_\+start}} (uint32\+\_\+t n\+\_\+samples)
\begin{DoxyCompactList}\small\item\em Init inferencing struct and setup/start PDM. \end{DoxyCompactList}\item 
static bool \mbox{\hyperlink{rp2040__microphone__continuous_8ino_ac3b50445cd9fdfc75ac49692ab0f910c}{microphone\+\_\+inference\+\_\+record}} (void)
\begin{DoxyCompactList}\small\item\em Wait on new data. \end{DoxyCompactList}\item 
static int \mbox{\hyperlink{rp2040__microphone__continuous_8ino_a3f715c2399692f3c7368ecda003c8fe0}{microphone\+\_\+audio\+\_\+signal\+\_\+get\+\_\+data}} (size\+\_\+t \mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcaf138809236f667e9686fdd4aaf17705_aed7ea92f45bd273dde380a45ddced592}{offset}}, size\+\_\+t length, float \texorpdfstring{$\ast$}{*}out\+\_\+ptr)
\item 
static void \mbox{\hyperlink{rp2040__microphone__continuous_8ino_af8bdb6be12449c8fa46f6fcc91847087}{microphone\+\_\+inference\+\_\+end}} (void)
\begin{DoxyCompactList}\small\item\em Stop PDM and release buffers. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{rp2040__microphone__continuous_8ino_afe947ce2b4653a9aa9a2147065530a60}{print\+\_\+inference\+\_\+result}} (\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}})
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static \mbox{\hyperlink{structinference__t}{inference\+\_\+t}} \mbox{\hyperlink{rp2040__microphone__continuous_8ino_a5fe36ec121fc3857a29308445d1c863c}{inference}}
\item 
static volatile bool \mbox{\hyperlink{rp2040__microphone__continuous_8ino_ac9f1322319c6f6268c837f1bed65ad63}{record\+\_\+ready}} = false
\item 
static signed short \mbox{\hyperlink{rp2040__microphone__continuous_8ino_a8456c8c78a9e2e88458e630532bf0c69}{sample\+Buffer}} \mbox{[}2048\mbox{]}
\item 
static bool \mbox{\hyperlink{rp2040__microphone__continuous_8ino_ac810bc03820882580f7d2a2589678973}{debug\+\_\+nn}} = false
\item 
static int \mbox{\hyperlink{rp2040__microphone__continuous_8ino_a8c86a09f7ce3952be195531ac2b909af}{print\+\_\+results}} = -\/(\mbox{\hyperlink{nano__ble33__sense__microphone__continuous_8ino_a40b974887b8b0ed817ed34f2818f5be1}{EI\+\_\+\+CLASSIFIER\+\_\+\+SLICES\+\_\+\+PER\+\_\+\+MODEL\+\_\+\+WINDOW}})
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{rp2040__microphone__continuous_8ino_aa8618d19213776a655bcace78f0c07df}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!EI\_CLASSIFIER\_SLICE\_SIZE@{EI\_CLASSIFIER\_SLICE\_SIZE}}
\index{EI\_CLASSIFIER\_SLICE\_SIZE@{EI\_CLASSIFIER\_SLICE\_SIZE}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{EI\_CLASSIFIER\_SLICE\_SIZE}{EI\_CLASSIFIER\_SLICE\_SIZE}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_aa8618d19213776a655bcace78f0c07df} 
\#define EI\+\_\+\+CLASSIFIER\+\_\+\+SLICE\+\_\+\+SIZE~(\mbox{\hyperlink{model__metadata_8h_a44e6501355d945468aac584b5556f4b0}{EI\+\_\+\+CLASSIFIER\+\_\+\+RAW\+\_\+\+SAMPLE\+\_\+\+COUNT}} / \mbox{\hyperlink{nano__ble33__sense__microphone__continuous_8ino_a40b974887b8b0ed817ed34f2818f5be1}{EI\+\_\+\+CLASSIFIER\+\_\+\+SLICES\+\_\+\+PER\+\_\+\+MODEL\+\_\+\+WINDOW}})}

\Hypertarget{rp2040__microphone__continuous_8ino_a40b974887b8b0ed817ed34f2818f5be1}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!EI\_CLASSIFIER\_SLICES\_PER\_MODEL\_WINDOW@{EI\_CLASSIFIER\_SLICES\_PER\_MODEL\_WINDOW}}
\index{EI\_CLASSIFIER\_SLICES\_PER\_MODEL\_WINDOW@{EI\_CLASSIFIER\_SLICES\_PER\_MODEL\_WINDOW}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{EI\_CLASSIFIER\_SLICES\_PER\_MODEL\_WINDOW}{EI\_CLASSIFIER\_SLICES\_PER\_MODEL\_WINDOW}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_a40b974887b8b0ed817ed34f2818f5be1} 
\#define EI\+\_\+\+CLASSIFIER\+\_\+\+SLICES\+\_\+\+PER\+\_\+\+MODEL\+\_\+\+WINDOW~3}

\Hypertarget{rp2040__microphone__continuous_8ino_a84f0987db19e2d3300d7c63929613f66}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!EIDSP\_QUANTIZE\_FILTERBANK@{EIDSP\_QUANTIZE\_FILTERBANK}}
\index{EIDSP\_QUANTIZE\_FILTERBANK@{EIDSP\_QUANTIZE\_FILTERBANK}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{EIDSP\_QUANTIZE\_FILTERBANK}{EIDSP\_QUANTIZE\_FILTERBANK}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_a84f0987db19e2d3300d7c63929613f66} 
\#define EIDSP\+\_\+\+QUANTIZE\+\_\+\+FILTERBANK~0}



\doxysubsection{Function Documentation}
\Hypertarget{rp2040__microphone__continuous_8ino_afe461d27b9c48d5921c00d521181f12f}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!loop@{loop}}
\index{loop@{loop}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{loop()}{loop()}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_afe461d27b9c48d5921c00d521181f12f} 
void loop (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Arduino main function. Runs the inferencing loop. 

Get data and run inferencing. \Hypertarget{rp2040__microphone__continuous_8ino_a3f715c2399692f3c7368ecda003c8fe0}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!microphone\_audio\_signal\_get\_data@{microphone\_audio\_signal\_get\_data}}
\index{microphone\_audio\_signal\_get\_data@{microphone\_audio\_signal\_get\_data}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{microphone\_audio\_signal\_get\_data()}{microphone\_audio\_signal\_get\_data()}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_a3f715c2399692f3c7368ecda003c8fe0} 
static int microphone\+\_\+audio\+\_\+signal\+\_\+get\+\_\+data (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{offset}{, }\item[{size\+\_\+t}]{length}{, }\item[{float \texorpdfstring{$\ast$}{*}}]{out\+\_\+ptr}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Get raw audio signal data \Hypertarget{rp2040__microphone__continuous_8ino_af8bdb6be12449c8fa46f6fcc91847087}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!microphone\_inference\_end@{microphone\_inference\_end}}
\index{microphone\_inference\_end@{microphone\_inference\_end}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{microphone\_inference\_end()}{microphone\_inference\_end()}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_af8bdb6be12449c8fa46f6fcc91847087} 
static void microphone\+\_\+inference\+\_\+end (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Stop PDM and release buffers. 

\Hypertarget{rp2040__microphone__continuous_8ino_ac3b50445cd9fdfc75ac49692ab0f910c}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!microphone\_inference\_record@{microphone\_inference\_record}}
\index{microphone\_inference\_record@{microphone\_inference\_record}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{microphone\_inference\_record()}{microphone\_inference\_record()}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_ac3b50445cd9fdfc75ac49692ab0f910c} 
static bool microphone\+\_\+inference\+\_\+record (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Wait on new data. 

\begin{DoxyReturn}{Returns}
True when finished 
\end{DoxyReturn}
\Hypertarget{rp2040__microphone__continuous_8ino_ab74ee7e3943fe5e0eb9f6c0c2ca18c45}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!microphone\_inference\_start@{microphone\_inference\_start}}
\index{microphone\_inference\_start@{microphone\_inference\_start}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{microphone\_inference\_start()}{microphone\_inference\_start()}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_ab74ee7e3943fe5e0eb9f6c0c2ca18c45} 
static bool microphone\+\_\+inference\+\_\+start (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{n\+\_\+samples}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Init inferencing struct and setup/start PDM. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em n\+\_\+samples} & The n samples\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\{ description\+\_\+of\+\_\+the\+\_\+return\+\_\+value \} 
\end{DoxyReturn}
\Hypertarget{rp2040__microphone__continuous_8ino_a1a8a3d55302d30250163019950b0894d}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!pdm\_data\_ready\_inference\_callback@{pdm\_data\_ready\_inference\_callback}}
\index{pdm\_data\_ready\_inference\_callback@{pdm\_data\_ready\_inference\_callback}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{pdm\_data\_ready\_inference\_callback()}{pdm\_data\_ready\_inference\_callback()}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_a1a8a3d55302d30250163019950b0894d} 
static void pdm\+\_\+data\+\_\+ready\+\_\+inference\+\_\+callback (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



PDM buffer full callback Copy audio data to app buffers. 

\Hypertarget{rp2040__microphone__continuous_8ino_afe947ce2b4653a9aa9a2147065530a60}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!print\_inference\_result@{print\_inference\_result}}
\index{print\_inference\_result@{print\_inference\_result}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{print\_inference\_result()}{print\_inference\_result()}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_afe947ce2b4653a9aa9a2147065530a60} 
void print\+\_\+inference\+\_\+result (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}}}]{result}{}\end{DoxyParamCaption})}

\Hypertarget{rp2040__microphone__continuous_8ino_a4fc01d736fe50cf5b977f755b675f11d}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!setup@{setup}}
\index{setup@{setup}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_a4fc01d736fe50cf5b977f755b675f11d} 
void setup (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Arduino setup function. 



\doxysubsection{Variable Documentation}
\Hypertarget{rp2040__microphone__continuous_8ino_ac810bc03820882580f7d2a2589678973}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!debug\_nn@{debug\_nn}}
\index{debug\_nn@{debug\_nn}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{debug\_nn}{debug\_nn}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_ac810bc03820882580f7d2a2589678973} 
bool debug\+\_\+nn = false\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{rp2040__microphone__continuous_8ino_a5fe36ec121fc3857a29308445d1c863c}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!inference@{inference}}
\index{inference@{inference}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{inference}{inference}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_a5fe36ec121fc3857a29308445d1c863c} 
\mbox{\hyperlink{structinference__t}{inference\+\_\+t}} inference\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{rp2040__microphone__continuous_8ino_a8c86a09f7ce3952be195531ac2b909af}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!print\_results@{print\_results}}
\index{print\_results@{print\_results}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{print\_results}{print\_results}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_a8c86a09f7ce3952be195531ac2b909af} 
int print\+\_\+results = -\/(\mbox{\hyperlink{nano__ble33__sense__microphone__continuous_8ino_a40b974887b8b0ed817ed34f2818f5be1}{EI\+\_\+\+CLASSIFIER\+\_\+\+SLICES\+\_\+\+PER\+\_\+\+MODEL\+\_\+\+WINDOW}})\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{rp2040__microphone__continuous_8ino_ac9f1322319c6f6268c837f1bed65ad63}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!record\_ready@{record\_ready}}
\index{record\_ready@{record\_ready}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{record\_ready}{record\_ready}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_ac9f1322319c6f6268c837f1bed65ad63} 
volatile bool record\+\_\+ready = false\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{rp2040__microphone__continuous_8ino_a8456c8c78a9e2e88458e630532bf0c69}\index{rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}!sampleBuffer@{sampleBuffer}}
\index{sampleBuffer@{sampleBuffer}!rp2040\_microphone\_continuous.ino@{rp2040\_microphone\_continuous.ino}}
\doxysubsubsection{\texorpdfstring{sampleBuffer}{sampleBuffer}}
{\footnotesize\ttfamily \label{rp2040__microphone__continuous_8ino_a8456c8c78a9e2e88458e630532bf0c69} 
signed short sample\+Buffer\mbox{[}2048\mbox{]}\hspace{0.3cm}{\ttfamily [static]}}

