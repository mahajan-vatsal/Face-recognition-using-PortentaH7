\doxysection{ptq Namespace Reference}
\hypertarget{namespaceptq}{}\label{namespaceptq}\index{ptq@{ptq}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceptq_aa6a66664483cdc07845315fd4dc53343}{get\+\_\+data}} ()
\item 
\mbox{\hyperlink{namespaceptq_a6c7b0c4a4469e2b0b0b6dd61c135a396}{save\+\_\+tflite\+\_\+model}} (tflite\+\_\+model, target\+\_\+dir, model\+\_\+name)
\item 
\mbox{\hyperlink{namespaceptq_aae5a8479c62473e5e3022e2e9af0823c}{convert\+\_\+quantized\+\_\+tflite\+\_\+model}} (source\+\_\+model\+\_\+dir, x\+\_\+values)
\item 
\mbox{\hyperlink{namespaceptq_a055e2902a3dd58337de27a334b7cac4f}{main}} (\+\_\+)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespaceptq_a01a1b2db5fb96a7dcc24cc72b5a987a8}{FLAGS}} = flags.\+FLAGS
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}This script can create a quant(int8) model from the saved TF model.

Run:
Build the train.py script
`bazel build tensorflow/lite/micro/examples/hello_world/quantization:train`

The following command first creates the trained TF float model that we will quantize later
`bazel-bin/tensorflow/lite/micro/examples/hello_world/train --save_tf_model --save_dir=/tmp/float_model/`

Build the ptq.py script
`bazel build tensorflow/lite/micro/examples/hello_world/quantization:ptq`

Then we can run the ptq script to convert the float model to quant model as follows.
Note that we are using the directory of the TF model as the source_model_dir here.
The quant model (named hello_world_int8.tflite) will be created inside the target_dir.
`bazel-bin/tensorflow/lite/micro/examples/hello_world/quantization/ptq  --source_model_dir=/tmp/float_model --target_dir=/tmp/quant_model/`
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\Hypertarget{namespaceptq_aae5a8479c62473e5e3022e2e9af0823c}\index{ptq@{ptq}!convert\_quantized\_tflite\_model@{convert\_quantized\_tflite\_model}}
\index{convert\_quantized\_tflite\_model@{convert\_quantized\_tflite\_model}!ptq@{ptq}}
\doxysubsubsection{\texorpdfstring{convert\_quantized\_tflite\_model()}{convert\_quantized\_tflite\_model()}}
{\footnotesize\ttfamily \label{namespaceptq_aae5a8479c62473e5e3022e2e9af0823c} 
ptq.\+convert\+\_\+quantized\+\_\+tflite\+\_\+model (\begin{DoxyParamCaption}\item[{}]{source\+\_\+model\+\_\+dir}{, }\item[{}]{x\+\_\+values}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert the save TF model to tflite model, then save it as .tflite
  flatbuffer format

  Args:
      source_model_dir (tf.keras.Model): the trained hello_world flaot Model dir
      x_train (numpy.array): list of the training data

  Returns:
      The converted model in serialized format.
\end{DoxyVerb}
 \Hypertarget{namespaceptq_aa6a66664483cdc07845315fd4dc53343}\index{ptq@{ptq}!get\_data@{get\_data}}
\index{get\_data@{get\_data}!ptq@{ptq}}
\doxysubsubsection{\texorpdfstring{get\_data()}{get\_data()}}
{\footnotesize\ttfamily \label{namespaceptq_aa6a66664483cdc07845315fd4dc53343} 
ptq.\+get\+\_\+data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}The code will generate a set of random `x` values
\end{DoxyVerb}
 \Hypertarget{namespaceptq_a055e2902a3dd58337de27a334b7cac4f}\index{ptq@{ptq}!main@{main}}
\index{main@{main}!ptq@{ptq}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{namespaceptq_a055e2902a3dd58337de27a334b7cac4f} 
ptq.\+main (\begin{DoxyParamCaption}\item[{}]{\+\_\+}{}\end{DoxyParamCaption})}

\Hypertarget{namespaceptq_a6c7b0c4a4469e2b0b0b6dd61c135a396}\index{ptq@{ptq}!save\_tflite\_model@{save\_tflite\_model}}
\index{save\_tflite\_model@{save\_tflite\_model}!ptq@{ptq}}
\doxysubsubsection{\texorpdfstring{save\_tflite\_model()}{save\_tflite\_model()}}
{\footnotesize\ttfamily \label{namespaceptq_a6c7b0c4a4469e2b0b0b6dd61c135a396} 
ptq.\+save\+\_\+tflite\+\_\+model (\begin{DoxyParamCaption}\item[{}]{tflite\+\_\+model}{, }\item[{}]{target\+\_\+dir}{, }\item[{}]{model\+\_\+name}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}save the converted tflite model
Args:
    tflite_model (binary): the converted model in serialized format.
    save_dir (str): the save directory
    model_name (str): model name to be saved
\end{DoxyVerb}
 

\doxysubsection{Variable Documentation}
\Hypertarget{namespaceptq_a01a1b2db5fb96a7dcc24cc72b5a987a8}\index{ptq@{ptq}!FLAGS@{FLAGS}}
\index{FLAGS@{FLAGS}!ptq@{ptq}}
\doxysubsubsection{\texorpdfstring{FLAGS}{FLAGS}}
{\footnotesize\ttfamily \label{namespaceptq_a01a1b2db5fb96a7dcc24cc72b5a987a8} 
ptq.\+FLAGS = flags.\+FLAGS}

