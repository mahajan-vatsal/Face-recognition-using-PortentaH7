\doxysection{Face\+\_\+\+Access\+\_\+inferencing/src/edge-\/impulse-\/sdk/classifier/postprocessing/tiny\+EKF/tinyekf\+\_\+custom.h File Reference}
\hypertarget{tinyekf__custom_8h}{}\label{tinyekf__custom_8h}\index{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/classifier/postprocessing/tinyEKF/tinyekf\_custom.h@{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/classifier/postprocessing/tinyEKF/tinyekf\_custom.h}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{tinyekf__custom_8h_a20c450a62f5edf272452bf8abc579ae0}{outer}} (const \+\_\+float\+\_\+t \mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6_a6150e0515f7202e2fb518f7206ed97dc}{x}}\mbox{[}EKF\+\_\+N\mbox{]}, const \+\_\+float\+\_\+t \mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6_aa4f0d3eebc3c443f9be81bf48561a217}{y}}\mbox{[}EKF\+\_\+N\mbox{]}, \+\_\+float\+\_\+t a\mbox{[}EKF\+\_\+N \texorpdfstring{$\ast$}{*}EKF\+\_\+N\mbox{]})
\item 
static \+\_\+float\+\_\+t \mbox{\hyperlink{tinyekf__custom_8h_ad3228a2f518a0a0c200b8e65ccfa8638}{dot}} (const \+\_\+float\+\_\+t \mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6_a6150e0515f7202e2fb518f7206ed97dc}{x}}\mbox{[}EKF\+\_\+N\mbox{]}, const \+\_\+float\+\_\+t \mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6_aa4f0d3eebc3c443f9be81bf48561a217}{y}}\mbox{[}EKF\+\_\+N\mbox{]})
\item 
static void \mbox{\hyperlink{tinyekf__custom_8h_a3bd1dc34c2d4feaed353995907177db1}{ekf\+\_\+custom\+\_\+multiply\+\_\+covariance}} (ekf\+\_\+t \texorpdfstring{$\ast$}{*}ekf, const \+\_\+float\+\_\+t A\mbox{[}EKF\+\_\+N \texorpdfstring{$\ast$}{*}EKF\+\_\+N\mbox{]})
\item 
static void \mbox{\hyperlink{tinyekf__custom_8h_ab9e86d8acfd13535b6ec21d9c67174fd}{ekf\+\_\+custom\+\_\+cleanup\+\_\+covariance}} (ekf\+\_\+t \texorpdfstring{$\ast$}{*}ekf, const float minval, const float maxval)
\item 
static void \mbox{\hyperlink{tinyekf__custom_8h_accc925ed88a3261b73101c21fc72da35}{ekf\+\_\+custom\+\_\+scalar\+\_\+update}} (ekf\+\_\+t \texorpdfstring{$\ast$}{*}ekf, const \+\_\+float\+\_\+t z, const \+\_\+float\+\_\+t hx, const \+\_\+float\+\_\+t \mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6_a85f2f1bd58b3b44ffdf3881823393959}{h}}\mbox{[}EKF\+\_\+N\mbox{]}, const \+\_\+float\+\_\+t \mbox{\hyperlink{_test_a_p_d_s9960_color_8ino_acab531abaa74a7e664e3986f2522b33a}{r}})
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{tinyekf__custom_8h_ad3228a2f518a0a0c200b8e65ccfa8638}\index{tinyekf\_custom.h@{tinyekf\_custom.h}!dot@{dot}}
\index{dot@{dot}!tinyekf\_custom.h@{tinyekf\_custom.h}}
\doxysubsubsection{\texorpdfstring{dot()}{dot()}}
{\footnotesize\ttfamily \label{tinyekf__custom_8h_ad3228a2f518a0a0c200b8e65ccfa8638} 
static \+\_\+float\+\_\+t dot (\begin{DoxyParamCaption}\item[{const \+\_\+float\+\_\+t}]{x}{\mbox{[}\+EKF\+\_\+\+N\mbox{]}, }\item[{const \+\_\+float\+\_\+t}]{y}{\mbox{[}\+EKF\+\_\+\+N\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}

\Hypertarget{tinyekf__custom_8h_ab9e86d8acfd13535b6ec21d9c67174fd}\index{tinyekf\_custom.h@{tinyekf\_custom.h}!ekf\_custom\_cleanup\_covariance@{ekf\_custom\_cleanup\_covariance}}
\index{ekf\_custom\_cleanup\_covariance@{ekf\_custom\_cleanup\_covariance}!tinyekf\_custom.h@{tinyekf\_custom.h}}
\doxysubsubsection{\texorpdfstring{ekf\_custom\_cleanup\_covariance()}{ekf\_custom\_cleanup\_covariance()}}
{\footnotesize\ttfamily \label{tinyekf__custom_8h_ab9e86d8acfd13535b6ec21d9c67174fd} 
static void ekf\+\_\+custom\+\_\+cleanup\+\_\+covariance (\begin{DoxyParamCaption}\item[{ekf\+\_\+t \texorpdfstring{$\ast$}{*}}]{ekf}{, }\item[{const float}]{minval}{, }\item[{const float}]{maxval}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Enforces symmetry of the covariance matrix and ensures that the its values stay bounded 
\begin{DoxyParams}{Parameters}
{\em ekf} & pointer to an ekf\+\_\+t structure \\
\hline
{\em minval} & minimum covariance bound \\
\hline
{\em maxval} & maximum covariance bound \\
\hline
\end{DoxyParams}
\Hypertarget{tinyekf__custom_8h_a3bd1dc34c2d4feaed353995907177db1}\index{tinyekf\_custom.h@{tinyekf\_custom.h}!ekf\_custom\_multiply\_covariance@{ekf\_custom\_multiply\_covariance}}
\index{ekf\_custom\_multiply\_covariance@{ekf\_custom\_multiply\_covariance}!tinyekf\_custom.h@{tinyekf\_custom.h}}
\doxysubsubsection{\texorpdfstring{ekf\_custom\_multiply\_covariance()}{ekf\_custom\_multiply\_covariance()}}
{\footnotesize\ttfamily \label{tinyekf__custom_8h_a3bd1dc34c2d4feaed353995907177db1} 
static void ekf\+\_\+custom\+\_\+multiply\+\_\+covariance (\begin{DoxyParamCaption}\item[{ekf\+\_\+t \texorpdfstring{$\ast$}{*}}]{ekf}{, }\item[{const \+\_\+float\+\_\+t}]{A}{\mbox{[}\+EKF\+\_\+\+N \texorpdfstring{$\ast$}{*}\+EKF\+\_\+\+N\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Runs a custom update on the covariance matrix 
\begin{DoxyParams}{Parameters}
{\em ekf} & pointer to an ekf\+\_\+t structure \\
\hline
{\em A} & from the update P \texorpdfstring{$<$}{<}-\/ A P A\texorpdfstring{$^\wedge$}{\string^}T \\
\hline
\end{DoxyParams}
\Hypertarget{tinyekf__custom_8h_accc925ed88a3261b73101c21fc72da35}\index{tinyekf\_custom.h@{tinyekf\_custom.h}!ekf\_custom\_scalar\_update@{ekf\_custom\_scalar\_update}}
\index{ekf\_custom\_scalar\_update@{ekf\_custom\_scalar\_update}!tinyekf\_custom.h@{tinyekf\_custom.h}}
\doxysubsubsection{\texorpdfstring{ekf\_custom\_scalar\_update()}{ekf\_custom\_scalar\_update()}}
{\footnotesize\ttfamily \label{tinyekf__custom_8h_accc925ed88a3261b73101c21fc72da35} 
static void ekf\+\_\+custom\+\_\+scalar\+\_\+update (\begin{DoxyParamCaption}\item[{ekf\+\_\+t \texorpdfstring{$\ast$}{*}}]{ekf}{, }\item[{const \+\_\+float\+\_\+t}]{z}{, }\item[{const \+\_\+float\+\_\+t}]{hx}{, }\item[{const \+\_\+float\+\_\+t}]{h}{\mbox{[}\+EKF\+\_\+\+N\mbox{]}, }\item[{const \+\_\+float\+\_\+t}]{r}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Updates the EKF with a single scalar observation 
\begin{DoxyParams}{Parameters}
{\em ekf} & pointer to an ekf\+\_\+t structure \\
\hline
{\em z} & the observation \\
\hline
{\em hx} & the predicted value \\
\hline
{\em h} & one column of the sensor-\/function Jacobian matrix H \\
\hline
{\em r} & one entry in the measurement-\/noise matrix R \\
\hline
\end{DoxyParams}
\Hypertarget{tinyekf__custom_8h_a20c450a62f5edf272452bf8abc579ae0}\index{tinyekf\_custom.h@{tinyekf\_custom.h}!outer@{outer}}
\index{outer@{outer}!tinyekf\_custom.h@{tinyekf\_custom.h}}
\doxysubsubsection{\texorpdfstring{outer()}{outer()}}
{\footnotesize\ttfamily \label{tinyekf__custom_8h_a20c450a62f5edf272452bf8abc579ae0} 
static void outer (\begin{DoxyParamCaption}\item[{const \+\_\+float\+\_\+t}]{x}{\mbox{[}\+EKF\+\_\+\+N\mbox{]}, }\item[{const \+\_\+float\+\_\+t}]{y}{\mbox{[}\+EKF\+\_\+\+N\mbox{]}, }\item[{\+\_\+float\+\_\+t}]{a}{\mbox{[}\+EKF\+\_\+\+N \texorpdfstring{$\ast$}{*}\+EKF\+\_\+\+N\mbox{]}}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}

Custom EKF methods

Copyright (C) 2024 Simon D. Levy

MIT License 