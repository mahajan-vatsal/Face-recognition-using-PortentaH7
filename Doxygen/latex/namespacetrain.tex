\doxysection{train Namespace Reference}
\hypertarget{namespacetrain}{}\label{namespacetrain}\index{train@{train}}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacetrain_a03f8f9005bafb1842f04b550ede32fa9}{get\+\_\+data}} ()
\item 
tf.\+keras.\+Model \mbox{\hyperlink{namespacetrain_a8ef03f7932b3a3678637c4ff58516b55}{create\+\_\+model}} ()
\item 
\mbox{\hyperlink{namespacetrain_a1b2a0229e836037b5d6f724d951a8bcc}{convert\+\_\+tflite\+\_\+model}} (\mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h_ae142afd8c2e2c711c1c62440deebe03c}{model}})
\item 
\mbox{\hyperlink{namespacetrain_ab0c146b0ee08b9c4f6449dbdf9cfb7a1}{save\+\_\+tflite\+\_\+model}} (tflite\+\_\+model, save\+\_\+dir, model\+\_\+name)
\item 
\mbox{\hyperlink{namespacetrain_a9ef1ead644fe16c7ffb1c336953712af}{train\+\_\+model}} (epochs, x\+\_\+values, y\+\_\+values)
\item 
\mbox{\hyperlink{namespacetrain_a97731a176b4d14d8a1849221857402f5}{main}} (\+\_\+)
\item 
\mbox{\hyperlink{namespacetrain_ab2526ff2eeca1a68ab0d9f57b58baeb9}{create\+\_\+model}} (units=20)
\item 
\mbox{\hyperlink{namespacetrain_acd913e867e7114d2bd578d5ddb485ea3}{get\+\_\+train\+\_\+data}} ()
\item 
\mbox{\hyperlink{namespacetrain_a30c23e7d8d9adfbbd06e337d861f5d58}{train\+\_\+lstm\+\_\+model}} (epochs, x\+\_\+train, y\+\_\+train)
\item 
\mbox{\hyperlink{namespacetrain_af4623a6c79be5e5e8e9e5f6316940cff}{convert\+\_\+quantized\+\_\+tflite\+\_\+model}} (\mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h_ae142afd8c2e2c711c1c62440deebe03c}{model}}, x\+\_\+train)
\item 
\mbox{\hyperlink{namespacetrain_a85cba960694f5261adf80b13702e7ddd}{prepare\+\_\+trained\+\_\+model}} (trained\+\_\+model)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{namespacetrain_a8f9801a374a3d786c86df993ee9edad2}{FLAGS}} = flags.\+FLAGS
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyVerb}hellow_world model training for sinwave recognition

Run:
`bazel build tensorflow/lite/micro/examples/hello_world:train`
`bazel-bin/tensorflow/lite/micro/examples/hello_world/train --save_tf_model --save_dir=/tmp/model_created/`
\end{DoxyVerb}


\begin{DoxyVerb}LSTM model training for MNIST recognition

This script is based on:
https://www.tensorflow.org/lite/models/convert/rnn
https://colab.research.google.com/github/tensorflow/tensorflow/blob/master/tensorflow/lite/examples/experimental_new_converter/Keras_LSTM_fusion_Codelab.ipynb

Run:
`bazel build tensorflow/lite/micro/examples/mnist_lstm:train`
`bazel-bin/tensorflow/lite/micro/examples/mnist_lstm/train`
\end{DoxyVerb}
 

\doxysubsection{Function Documentation}
\Hypertarget{namespacetrain_af4623a6c79be5e5e8e9e5f6316940cff}\index{train@{train}!convert\_quantized\_tflite\_model@{convert\_quantized\_tflite\_model}}
\index{convert\_quantized\_tflite\_model@{convert\_quantized\_tflite\_model}!train@{train}}
\doxysubsubsection{\texorpdfstring{convert\_quantized\_tflite\_model()}{convert\_quantized\_tflite\_model()}}
{\footnotesize\ttfamily \label{namespacetrain_af4623a6c79be5e5e8e9e5f6316940cff} 
train.\+convert\+\_\+quantized\+\_\+tflite\+\_\+model (\begin{DoxyParamCaption}\item[{}]{model}{, }\item[{}]{x\+\_\+train}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert the save TF model to tflite model, then save it as .tflite flatbuffer format

  See
  https://www.tensorflow.org/lite/performance/post_training_integer_quant#convert_using_integer-only_quantization

  Args:
      model (tf.keras.Model): the trained LSTM Model
      x_train (numpy.array): list of the training data

  Returns:
      The converted model in serialized format.
\end{DoxyVerb}
 \Hypertarget{namespacetrain_a1b2a0229e836037b5d6f724d951a8bcc}\index{train@{train}!convert\_tflite\_model@{convert\_tflite\_model}}
\index{convert\_tflite\_model@{convert\_tflite\_model}!train@{train}}
\doxysubsubsection{\texorpdfstring{convert\_tflite\_model()}{convert\_tflite\_model()}}
{\footnotesize\ttfamily \label{namespacetrain_a1b2a0229e836037b5d6f724d951a8bcc} 
train.\+convert\+\_\+tflite\+\_\+model (\begin{DoxyParamCaption}\item[{}]{model}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Convert the save TF model to tflite model, then save it as .tflite flatbuffer format
  Args:
      model (tf.keras.Model): the trained hello_world Model
  Returns:
      The converted model in serialized format.
\end{DoxyVerb}


\begin{DoxyVerb}Convert the save TF model to tflite model, then save it as .tflite flatbuffer format

  Args:
      model (tf.keras.Model): the trained LSTM Model

  Returns:
      The converted model in serialized format.
\end{DoxyVerb}
 \Hypertarget{namespacetrain_a8ef03f7932b3a3678637c4ff58516b55}\index{train@{train}!create\_model@{create\_model}}
\index{create\_model@{create\_model}!train@{train}}
\doxysubsubsection{\texorpdfstring{create\_model()}{create\_model()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{namespacetrain_a8ef03f7932b3a3678637c4ff58516b55} 
 tf.\+keras.\+Model train.\+create\+\_\+model (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\Hypertarget{namespacetrain_ab2526ff2eeca1a68ab0d9f57b58baeb9}\index{train@{train}!create\_model@{create\_model}}
\index{create\_model@{create\_model}!train@{train}}
\doxysubsubsection{\texorpdfstring{create\_model()}{create\_model()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{namespacetrain_ab2526ff2eeca1a68ab0d9f57b58baeb9} 
train.\+create\+\_\+model (\begin{DoxyParamCaption}\item[{}]{units}{ = {\ttfamily 20}}\end{DoxyParamCaption})}

\begin{DoxyVerb}Create a keras LSTM model for MNIST recognition

  Args:
      units (int, optional): dimensionality of the output space for the model.
        Defaults to 20.

  Returns:
      tf.keras.Model: A Keras LSTM model\end{DoxyVerb}
 \Hypertarget{namespacetrain_a03f8f9005bafb1842f04b550ede32fa9}\index{train@{train}!get\_data@{get\_data}}
\index{get\_data@{get\_data}!train@{train}}
\doxysubsubsection{\texorpdfstring{get\_data()}{get\_data()}}
{\footnotesize\ttfamily \label{namespacetrain_a03f8f9005bafb1842f04b550ede32fa9} 
train.\+get\+\_\+data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}The code will generate a set of random `x` values,calculate their sine
values.
\end{DoxyVerb}
 \Hypertarget{namespacetrain_acd913e867e7114d2bd578d5ddb485ea3}\index{train@{train}!get\_train\_data@{get\_train\_data}}
\index{get\_train\_data@{get\_train\_data}!train@{train}}
\doxysubsubsection{\texorpdfstring{get\_train\_data()}{get\_train\_data()}}
{\footnotesize\ttfamily \label{namespacetrain_acd913e867e7114d2bd578d5ddb485ea3} 
train.\+get\+\_\+train\+\_\+data (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Get MNIST train and test data

  Returns:
      tuple: (data, label) pairs for train and test\end{DoxyVerb}
 \Hypertarget{namespacetrain_a97731a176b4d14d8a1849221857402f5}\index{train@{train}!main@{main}}
\index{main@{main}!train@{train}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily \label{namespacetrain_a97731a176b4d14d8a1849221857402f5} 
train.\+main (\begin{DoxyParamCaption}\item[{}]{\+\_\+}{}\end{DoxyParamCaption})}

\Hypertarget{namespacetrain_a85cba960694f5261adf80b13702e7ddd}\index{train@{train}!prepare\_trained\_model@{prepare\_trained\_model}}
\index{prepare\_trained\_model@{prepare\_trained\_model}!train@{train}}
\doxysubsubsection{\texorpdfstring{prepare\_trained\_model()}{prepare\_trained\_model()}}
{\footnotesize\ttfamily \label{namespacetrain_a85cba960694f5261adf80b13702e7ddd} 
train.\+prepare\+\_\+trained\+\_\+model (\begin{DoxyParamCaption}\item[{}]{trained\+\_\+model}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Fix the input of the trained model for inference

  Args:
      trained_model (tf.keras.Model): the trained LSTM model

  Returns:
      run_model (tf.keras.Model): the trained model with fixed input tensor size for inference
\end{DoxyVerb}
 \Hypertarget{namespacetrain_ab0c146b0ee08b9c4f6449dbdf9cfb7a1}\index{train@{train}!save\_tflite\_model@{save\_tflite\_model}}
\index{save\_tflite\_model@{save\_tflite\_model}!train@{train}}
\doxysubsubsection{\texorpdfstring{save\_tflite\_model()}{save\_tflite\_model()}}
{\footnotesize\ttfamily \label{namespacetrain_ab0c146b0ee08b9c4f6449dbdf9cfb7a1} 
train.\+save\+\_\+tflite\+\_\+model (\begin{DoxyParamCaption}\item[{}]{tflite\+\_\+model}{, }\item[{}]{save\+\_\+dir}{, }\item[{}]{model\+\_\+name}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}save the converted tflite model
Args:
    tflite_model (binary): the converted model in serialized format.
    save_dir (str): the save directory
    model_name (str): model name to be saved
\end{DoxyVerb}
 \Hypertarget{namespacetrain_a30c23e7d8d9adfbbd06e337d861f5d58}\index{train@{train}!train\_lstm\_model@{train\_lstm\_model}}
\index{train\_lstm\_model@{train\_lstm\_model}!train@{train}}
\doxysubsubsection{\texorpdfstring{train\_lstm\_model()}{train\_lstm\_model()}}
{\footnotesize\ttfamily \label{namespacetrain_a30c23e7d8d9adfbbd06e337d861f5d58} 
train.\+train\+\_\+lstm\+\_\+model (\begin{DoxyParamCaption}\item[{}]{epochs}{, }\item[{}]{x\+\_\+train}{, }\item[{}]{y\+\_\+train}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Train keras LSTM model on MNIST dataset

  Args: epochs (int) : number of epochs to train the model
      x_train (numpy.array): list of the training data
      y_train (numpy.array): list of the corresponding array

  Returns:
      tf.keras.Model: A trained keras LSTM model
\end{DoxyVerb}
 \Hypertarget{namespacetrain_a9ef1ead644fe16c7ffb1c336953712af}\index{train@{train}!train\_model@{train\_model}}
\index{train\_model@{train\_model}!train@{train}}
\doxysubsubsection{\texorpdfstring{train\_model()}{train\_model()}}
{\footnotesize\ttfamily \label{namespacetrain_a9ef1ead644fe16c7ffb1c336953712af} 
train.\+train\+\_\+model (\begin{DoxyParamCaption}\item[{}]{epochs}{, }\item[{}]{x\+\_\+values}{, }\item[{}]{y\+\_\+values}{}\end{DoxyParamCaption})}

\begin{DoxyVerb}Train keras hello_world model
  Args: epochs (int) : number of epochs to train the model
      x_train (numpy.array): list of the training data
      y_train (numpy.array): list of the corresponding array
  Returns:
      tf.keras.Model: A trained keras hello_world model
\end{DoxyVerb}
 

\doxysubsection{Variable Documentation}
\Hypertarget{namespacetrain_a8f9801a374a3d786c86df993ee9edad2}\index{train@{train}!FLAGS@{FLAGS}}
\index{FLAGS@{FLAGS}!train@{train}}
\doxysubsubsection{\texorpdfstring{FLAGS}{FLAGS}}
{\footnotesize\ttfamily \label{namespacetrain_a8f9801a374a3d786c86df993ee9edad2} 
train.\+FLAGS = flags.\+FLAGS}

