\doxysection{Face\+\_\+\+Access\+\_\+inferencing/src/edge-\/impulse-\/sdk/classifier/ei\+\_\+run\+\_\+classifier.h File Reference}
\hypertarget{ei__run__classifier_8h}{}\label{ei__run__classifier_8h}\index{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/classifier/ei\_run\_classifier.h@{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/classifier/ei\_run\_classifier.h}}
{\ttfamily \#include "{}ei\+\_\+model\+\_\+types.\+h"{}}\newline
{\ttfamily \#include "{}model-\/parameters/model\+\_\+metadata.\+h"{}}\newline
{\ttfamily \#include "{}ei\+\_\+run\+\_\+dsp.\+h"{}}\newline
{\ttfamily \#include "{}ei\+\_\+classifier\+\_\+types.\+h"{}}\newline
{\ttfamily \#include "{}ei\+\_\+signal\+\_\+with\+\_\+axes.\+h"{}}\newline
{\ttfamily \#include "{}postprocessing/ei\+\_\+postprocessing.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/porting/ei\+\_\+classifier\+\_\+porting.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/porting/ei\+\_\+logging.\+h"{}}\newline
{\ttfamily \#include $<$memory$>$}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/classifier/inferencing\+\_\+engines/tflite\+\_\+micro.\+h"{}}\newline
{\ttfamily \#include "{}model-\/parameters/model\+\_\+variables.\+h"{}}\newline
Include dependency graph for ei\+\_\+run\+\_\+classifier.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{ei__run__classifier_8h_a231fb970dff3187a2b7e90cd0464d09b}{run\+\_\+inference}} (\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a701ab73428c38eac35ba17226b628ffa}{handle}}, \mbox{\hyperlink{structei__feature__t}{ei\+\_\+feature\+\_\+t}} \texorpdfstring{$\ast$}{*}fmatrix, \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}}=false)
\begin{DoxyCompactList}\small\item\em Do inferencing over the processed feature matrix. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{ei__run__classifier_8h_a99bb6c5f105498ca322902e66f8a9ac4}{run\+\_\+classifier\+\_\+image\+\_\+quantized}} (const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}impulse, \mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classei_1_1signal}{signal}}, \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}})
\item 
static \mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{ei__run__classifier_8h_aa51cd0b460e1b8ac6e9c7fe0e2b6b2e5}{can\+\_\+run\+\_\+classifier\+\_\+image\+\_\+quantized}} (const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}impulse, \mbox{\hyperlink{structei__learning__block__t}{ei\+\_\+learning\+\_\+block\+\_\+t}} \mbox{\hyperlink{ei__run__classifier_8h_ae91aded9003b31c94d3255c990900bd2}{block\+\_\+ptr}})
\item 
\mbox{\hyperlink{group__ei__functions_ga8f5c7143bf386c91e3210280ebc152d6}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}} ((unused)) void display\+\_\+results(\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a701ab73428c38eac35ba17226b628ffa}{handle}}
\begin{DoxyCompactList}\small\item\em Display the results of the inference. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}} timing dsp\+\_\+us \mbox{\hyperlink{group__ei__user__functions_gadcb0babc6f41a7d0aa4c0801c96ae7e4}{ei\+\_\+printf\+\_\+float}}((float) \mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}-\/$>$timing.\+dsp\+\_\+us/1000) \mbox{\hyperlink{ei__run__classifier_8h_adda641ea28ba092cca93ceb401fe0807}{ei\+\_\+printf}} ("{} ms., Classification\+: "{})
\item 
\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}} timing classification\+\_\+us \mbox{\hyperlink{group__ei__user__functions_gadcb0babc6f41a7d0aa4c0801c96ae7e4}{ei\+\_\+printf\+\_\+float}}((float) \mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}-\/$>$timing.\+classification\+\_\+us/1000) \mbox{\hyperlink{ei__run__classifier_8h_aa4efbe774b5a5177cd99968338e35b11}{ei\+\_\+printf}} ("{} ms., Anomaly\+: "{})
\item 
\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}} timing anomaly\+\_\+us \mbox{\hyperlink{group__ei__user__functions_gadcb0babc6f41a7d0aa4c0801c96ae7e4}{ei\+\_\+printf\+\_\+float}}((float) \mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}-\/$>$timing.\+anomaly\+\_\+us/1000) \mbox{\hyperlink{ei__run__classifier_8h_a3473a84369ad957185af0e24e986cffb}{ei\+\_\+printf}} ("{}ms.)\+: \textbackslash{}n"{})
\item 
\mbox{\hyperlink{ei__run__classifier_8h_a442bd7bbb6f2fc2a17c73fc4b9d329d7}{ei\+\_\+printf}} ("{}\#Classification results\+:\textbackslash{}r\textbackslash{}n"{})
\item 
\mbox{\hyperlink{ei__run__classifier_8h_a0016ff426ac0eb3896430f9415c6b54d}{for}} (size\+\_\+t ix=0;ix$<$ \mbox{\hyperlink{model__metadata_8h_a418cb88da93b0cc26bb74f11e5bbd81e}{EI\+\_\+\+CLASSIFIER\+\_\+\+LABEL\+\_\+\+COUNT}};ix++)
\item 
\mbox{\hyperlink{ei__run__classifier_8h_acb063e9b359aad5562fe0540acb0b522}{display\+\_\+postprocessing}} (\mbox{\hyperlink{ei__run__dsp_8h_a701ab73428c38eac35ba17226b628ffa}{handle}}, \mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}})
\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{ei__run__classifier_8h_af1bfd8468310266e1d46dc35d7e87d68}{process\+\_\+impulse}} (\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a701ab73428c38eac35ba17226b628ffa}{handle}}, \mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classei_1_1signal}{signal}}, \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}}=false)
\begin{DoxyCompactList}\small\item\em Process a complete impulse. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{ei__run__classifier_8h_af97856f0b5a3a0ef250fb3ebfb0bd394}{init\+\_\+impulse}} (\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a701ab73428c38eac35ba17226b628ffa}{handle}})
\begin{DoxyCompactList}\small\item\em Opens an impulse. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{ei__run__classifier_8h_a69f86739ca1b8bf368e33752263e350a}{process\+\_\+impulse\+\_\+continuous}} (\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a701ab73428c38eac35ba17226b628ffa}{handle}}, \mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classei_1_1signal}{signal}}, \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}}=false)
\begin{DoxyCompactList}\small\item\em Process a complete impulse for continuous inference. \end{DoxyCompactList}\item 
\mbox{\hyperlink{ei__run__classifier_8h_aae4cec43cedf139537f8c29cae0bb3d5}{if}} (\mbox{\hyperlink{ei__fill__result__struct_8h_aafcd7d36638d6a564b6edbceef06ea8b}{block\+\_\+config}}-\/$>$quantized !=1)
\item 
\mbox{\hyperlink{ei__run__classifier_8h_af2a7312f2ef33ddfda78f1916664c789}{if}} (impulse-\/$>$dsp\+\_\+blocks\+\_\+size !=1\texorpdfstring{$\vert$}{|}\texorpdfstring{$\vert$}{|}impulse-\/$>$dsp\+\_\+blocks\mbox{[}0\mbox{]}.extract\+\_\+fn !=extract\+\_\+image\+\_\+features)
\item 
void \mbox{\hyperlink{group__ei__functions_ga1f01a5a562ec8528c0b5fe61aa9dacc3}{run\+\_\+classifier\+\_\+init}} (void)
\begin{DoxyCompactList}\small\item\em Initialize static variables for running preprocessing and inference continuously. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{group__ei__functions_ga6c5d3f11303dbc8ba3a3f72e24c0079d}{run\+\_\+classifier\+\_\+deinit}} (void)
\begin{DoxyCompactList}\small\item\em Deletes static variables when running preprocessing and inference continuously. \end{DoxyCompactList}\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{group__ei__functions_gacf3414ec2ec4639e982fc966144a02ec}{run\+\_\+classifier\+\_\+continuous}} (\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classei_1_1signal}{signal}}, \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}}=false, bool enable\+\_\+maf\+\_\+unused=\mbox{\hyperlink{ei__fill__result__struct_8h_a930920b2bc42824a5c03be681830f4b2}{true}})
\begin{DoxyCompactList}\small\item\em Run preprocessing (DSP) on new slice of raw features. Add output features to rolling matrix and run inference on full sample. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static uint64\+\_\+t \mbox{\hyperlink{ei__run__classifier_8h_a7f465eb9cdc29dbe3a9006716a6cfaec}{classifier\+\_\+continuous\+\_\+features\+\_\+written}} = 0
\item 
\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{group__ei__functions_ga13eb9155f59e00a4ca0bc9aaebd14733}{result}}
\item 
\mbox{\hyperlink{structei__learning__block__t}{ei\+\_\+learning\+\_\+block\+\_\+t}} \mbox{\hyperlink{ei__run__classifier_8h_ae91aded9003b31c94d3255c990900bd2}{block\+\_\+ptr}}
\item 
return \mbox{\hyperlink{ei__run__classifier_8h_a2fb43be102b153d659b668ad295aff40}{EI\+\_\+\+IMPULSE\+\_\+\+OK}}
\item 
\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{group__ei__functions_ga46d130150ef0ce589284705bdc4c8b69}{signal}}
\item 
\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} bool \mbox{\hyperlink{group__ei__functions_gafdfda4c8506d9909518cc30338fc0646}{debug}} = false
\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\Hypertarget{ei__run__classifier_8h_aa51cd0b460e1b8ac6e9c7fe0e2b6b2e5}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!can\_run\_classifier\_image\_quantized@{can\_run\_classifier\_image\_quantized}}
\index{can\_run\_classifier\_image\_quantized@{can\_run\_classifier\_image\_quantized}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{can\_run\_classifier\_image\_quantized()}{can\_run\_classifier\_image\_quantized()}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_aa51cd0b460e1b8ac6e9c7fe0e2b6b2e5} 
static \mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} can\+\_\+run\+\_\+classifier\+\_\+image\+\_\+quantized (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{impulse}{, }\item[{\mbox{\hyperlink{structei__learning__block__t}{ei\+\_\+learning\+\_\+block\+\_\+t}}}]{block\+\_\+ptr}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{ei__run__classifier_8h_acb063e9b359aad5562fe0540acb0b522}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!display\_postprocessing@{display\_postprocessing}}
\index{display\_postprocessing@{display\_postprocessing}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{display\_postprocessing()}{display\_postprocessing()}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_acb063e9b359aad5562fe0540acb0b522} 
display\+\_\+postprocessing (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ei__run__dsp_8h_a701ab73428c38eac35ba17226b628ffa}{handle}}}]{}{, }\item[{\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}}]{}{}\end{DoxyParamCaption})}

\Hypertarget{ei__run__classifier_8h_aa4efbe774b5a5177cd99968338e35b11}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!ei\_printf@{ei\_printf}}
\index{ei\_printf@{ei\_printf}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{ei\_printf()}{ei\_printf()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_aa4efbe774b5a5177cd99968338e35b11} 
\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}} timing classification\+\_\+us \mbox{\hyperlink{group__ei__user__functions_gadcb0babc6f41a7d0aa4c0801c96ae7e4}{ei\+\_\+printf\+\_\+float}}((float) \mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}-\/$>$timing.\+classification\+\_\+us/1000) ei\+\_\+printf (\begin{DoxyParamCaption}\item[{"{}}]{ms.}{, }\item[{Anomaly\+:"{}}]{}{}\end{DoxyParamCaption})}

\Hypertarget{ei__run__classifier_8h_adda641ea28ba092cca93ceb401fe0807}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!ei\_printf@{ei\_printf}}
\index{ei\_printf@{ei\_printf}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{ei\_printf()}{ei\_printf()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_adda641ea28ba092cca93ceb401fe0807} 
\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}} timing dsp\+\_\+us \mbox{\hyperlink{group__ei__user__functions_gadcb0babc6f41a7d0aa4c0801c96ae7e4}{ei\+\_\+printf\+\_\+float}}((float) \mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}-\/$>$timing.\+dsp\+\_\+us/1000) ei\+\_\+printf (\begin{DoxyParamCaption}\item[{"{}}]{ms.}{, }\item[{Classification\+:"{}}]{}{}\end{DoxyParamCaption})}

\Hypertarget{ei__run__classifier_8h_a442bd7bbb6f2fc2a17c73fc4b9d329d7}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!ei\_printf@{ei\_printf}}
\index{ei\_printf@{ei\_printf}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{ei\_printf()}{ei\_printf()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_a442bd7bbb6f2fc2a17c73fc4b9d329d7} 
ei\+\_\+printf (\begin{DoxyParamCaption}\item[{"{}\#Classification results\+:\textbackslash{}r\textbackslash{}n"{}}]{}{}\end{DoxyParamCaption})}

\Hypertarget{ei__run__classifier_8h_a3473a84369ad957185af0e24e986cffb}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!ei\_printf@{ei\_printf}}
\index{ei\_printf@{ei\_printf}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{ei\_printf()}{ei\_printf()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_a3473a84369ad957185af0e24e986cffb} 
\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}} timing anomaly\+\_\+us \mbox{\hyperlink{group__ei__user__functions_gadcb0babc6f41a7d0aa4c0801c96ae7e4}{ei\+\_\+printf\+\_\+float}}((float) \mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}-\/$>$timing.\+anomaly\+\_\+us/1000) ei\+\_\+printf (\begin{DoxyParamCaption}\item[{"{}}]{ms.}{}\end{DoxyParamCaption})}

\Hypertarget{ei__run__classifier_8h_a0016ff426ac0eb3896430f9415c6b54d}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!for@{for}}
\index{for@{for}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{for()}{for()}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_a0016ff426ac0eb3896430f9415c6b54d} 
for (\begin{DoxyParamCaption}{}{}\end{DoxyParamCaption})}

\Hypertarget{ei__run__classifier_8h_aae4cec43cedf139537f8c29cae0bb3d5}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!if@{if}}
\index{if@{if}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{if()}{if()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_aae4cec43cedf139537f8c29cae0bb3d5} 
if (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{ei__fill__result__struct_8h_aafcd7d36638d6a564b6edbceef06ea8b}{block\+\_\+config}}-\/$>$quantized !}]{}{ = {\ttfamily 1}}\end{DoxyParamCaption})}

\Hypertarget{ei__run__classifier_8h_af2a7312f2ef33ddfda78f1916664c789}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!if@{if}}
\index{if@{if}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{if()}{if()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_af2a7312f2ef33ddfda78f1916664c789} 
if (\begin{DoxyParamCaption}\item[{impulse-\/$>$dsp\+\_\+blocks\+\_\+size !}]{}{ = {\ttfamily 1~\texorpdfstring{$\vert$}{|}\texorpdfstring{$\vert$}{|}~impulse-\/$>$dsp\+\_\+blocks\mbox{[}0\mbox{]}.extract\+\_\+fn~!=~extract\+\_\+image\+\_\+features}}\end{DoxyParamCaption})}

\Hypertarget{ei__run__classifier_8h_af97856f0b5a3a0ef250fb3ebfb0bd394}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!init\_impulse@{init\_impulse}}
\index{init\_impulse@{init\_impulse}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{init\_impulse()}{init\_impulse()}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_af97856f0b5a3a0ef250fb3ebfb0bd394} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} init\+\_\+impulse (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{handle}{}\end{DoxyParamCaption})}



Opens an impulse. 


\begin{DoxyParams}{Parameters}
{\em impulse} & struct with information about model and DSP\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A pointer to the impulse handle, or nullptr if memory allocation failed. 
\end{DoxyReturn}
\Hypertarget{ei__run__classifier_8h_af1bfd8468310266e1d46dc35d7e87d68}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!process\_impulse@{process\_impulse}}
\index{process\_impulse@{process\_impulse}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{process\_impulse()}{process\_impulse()}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_af1bfd8468310266e1d46dc35d7e87d68} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} process\+\_\+impulse (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{handle}{, }\item[{\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{signal}{, }\item[{\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{result}{, }\item[{bool}]{debug}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Process a complete impulse. 


\begin{DoxyParams}[1]{Parameters}
 & {\em impulse} & struct with information about model and DSP \\
\hline
 & {\em signal} & Sample data \\
\hline
 & {\em result} & Output classifier results \\
\hline
 & {\em handle} & Handle from open\+\_\+impulse. nullptr for backward compatibility \\
\hline
\mbox{\texttt{ in}}  & {\em debug} & Debug output enable\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The ei impulse error. 
\end{DoxyReturn}
\Hypertarget{ei__run__classifier_8h_a69f86739ca1b8bf368e33752263e350a}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!process\_impulse\_continuous@{process\_impulse\_continuous}}
\index{process\_impulse\_continuous@{process\_impulse\_continuous}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{process\_impulse\_continuous()}{process\_impulse\_continuous()}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_a69f86739ca1b8bf368e33752263e350a} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} process\+\_\+impulse\+\_\+continuous (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{handle}{, }\item[{\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{signal}{, }\item[{\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{result}{, }\item[{bool}]{debug}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Process a complete impulse for continuous inference. 


\begin{DoxyParams}[1]{Parameters}
 & {\em handle} & struct with information about model and DSP \\
\hline
 & {\em signal} & Sample data \\
\hline
 & {\em result} & Output classifier results \\
\hline
\mbox{\texttt{ in}}  & {\em debug} & Debug output enable\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The ei impulse error. 
\end{DoxyReturn}
\Hypertarget{ei__run__classifier_8h_a99bb6c5f105498ca322902e66f8a9ac4}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!run\_classifier\_image\_quantized@{run\_classifier\_image\_quantized}}
\index{run\_classifier\_image\_quantized@{run\_classifier\_image\_quantized}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{run\_classifier\_image\_quantized()}{run\_classifier\_image\_quantized()}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_a99bb6c5f105498ca322902e66f8a9ac4} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} run\+\_\+classifier\+\_\+image\+\_\+quantized (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{impulse}{, }\item[{\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{signal}{, }\item[{\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{result}{, }\item[{bool}]{debug}{ = {\ttfamily false}}\end{DoxyParamCaption})}

Special function to run the classifier on images, only works on TFLite models (either interpreter, EON, tensaiflow, drpai, tidl, memryx) that allocates a lot less memory by quantizing in place. This only works if \textquotesingle{}can\+\_\+run\+\_\+classifier\+\_\+image\+\_\+quantized\textquotesingle{} returns EI\+\_\+\+IMPULSE\+\_\+\+OK. \Hypertarget{ei__run__classifier_8h_a231fb970dff3187a2b7e90cd0464d09b}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!run\_inference@{run\_inference}}
\index{run\_inference@{run\_inference}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{run\_inference()}{run\_inference()}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_a231fb970dff3187a2b7e90cd0464d09b} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} run\+\_\+inference (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classei__impulse__handle__t}{ei\+\_\+impulse\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{handle}{, }\item[{\mbox{\hyperlink{structei__feature__t}{ei\+\_\+feature\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{fmatrix}{, }\item[{\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{result}{, }\item[{bool}]{debug}{ = {\ttfamily false}}\end{DoxyParamCaption})}



Do inferencing over the processed feature matrix. 


\begin{DoxyParams}[1]{Parameters}
 & {\em impulse} & struct with information about model and DSP \\
\hline
 & {\em fmatrix} & Processed matrix \\
\hline
 & {\em result} & Output classifier results \\
\hline
\mbox{\texttt{ in}}  & {\em debug} & Debug output enable\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The ei impulse error. 
\end{DoxyReturn}


\doxysubsection{Variable Documentation}
\Hypertarget{ei__run__classifier_8h_ae91aded9003b31c94d3255c990900bd2}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!block\_ptr@{block\_ptr}}
\index{block\_ptr@{block\_ptr}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{block\_ptr}{block\_ptr}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_ae91aded9003b31c94d3255c990900bd2} 
\mbox{\hyperlink{structei__learning__block__t}{ei\+\_\+learning\+\_\+block\+\_\+t}} block\+\_\+ptr}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (impulse-\/>inferencing\_engine\ !=\ \mbox{\hyperlink{ei__model__types_8h_a41d88fbfe5d8528c9feb74475ca4ba58}{EI\_CLASSIFIER\_TFLITE}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \&\&\ impulse-\/>inferencing\_engine\ !=\ \mbox{\hyperlink{ei__model__types_8h_af74b38c1ae2791716412519652b62619}{EI\_CLASSIFIER\_TENSAIFLOW}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \&\&\ impulse-\/>inferencing\_engine\ !=\ \mbox{\hyperlink{ei__model__types_8h_a4f502e364c3cfc320867bd63bf2d3f96}{EI\_CLASSIFIER\_DRPAI}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \&\&\ impulse-\/>inferencing\_engine\ !=\ \mbox{\hyperlink{ei__model__types_8h_a6262932ef3bf1ee94114d8ff7af46cd6}{EI\_CLASSIFIER\_ONNX\_TIDL}}}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \&\&\ impulse-\/>inferencing\_engine\ !=\ \mbox{\hyperlink{ei__model__types_8h_a58ef16352e9d423c4155a13e8edce7fd}{EI\_CLASSIFIER\_ATON}})\ }
\DoxyCodeLine{\ \ \ \ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{group__ei__returntypes_ggad9580b47a6cd5e74cfc31a03bdfecebea399c371041be7c468a3b05a4d8352d14}{EI\_IMPULSE\_UNSUPPORTED\_INFERENCING\_ENGINE}};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (impulse-\/>has\_anomaly)\{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{group__ei__returntypes_ggad9580b47a6cd5e74cfc31a03bdfecebeac362bb096eacd28725c13ecccd943cea}{EI\_IMPULSE\_ONLY\_SUPPORTED\_FOR\_IMAGES}};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ }
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{ei__run__classifier_8h_ae91aded9003b31c94d3255c990900bd2}{block\_ptr}}.\mbox{\hyperlink{structei__learning__block__t_a754ac1360ad49d5b208dabaa2406496e}{infer\_fn}}\ !=\ \mbox{\hyperlink{akida_8h_ae95031a834aea77650106530f566fdb5}{run\_nn\_inference}})\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{group__ei__returntypes_ggad9580b47a6cd5e74cfc31a03bdfecebeac362bb096eacd28725c13ecccd943cea}{EI\_IMPULSE\_ONLY\_SUPPORTED\_FOR\_IMAGES}};}
\DoxyCodeLine{\ \ \ \ \}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ }
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structei__learning__block__config__tflite__graph__t}{ei\_learning\_block\_config\_tflite\_graph\_t}}\ *\mbox{\hyperlink{ei__fill__result__struct_8h_aafcd7d36638d6a564b6edbceef06ea8b}{block\_config}}\ =\ (\mbox{\hyperlink{structei__learning__block__config__tflite__graph__t}{ei\_learning\_block\_config\_tflite\_graph\_t}}*)\mbox{\hyperlink{ei__run__classifier_8h_ae91aded9003b31c94d3255c990900bd2}{block\_ptr}}.\mbox{\hyperlink{structei__learning__block__t_a6db4a7600514856e1fab7a5479d01c1e}{config}}}

\end{DoxyCode}
\Hypertarget{ei__run__classifier_8h_a7f465eb9cdc29dbe3a9006716a6cfaec}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!classifier\_continuous\_features\_written@{classifier\_continuous\_features\_written}}
\index{classifier\_continuous\_features\_written@{classifier\_continuous\_features\_written}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{classifier\_continuous\_features\_written}{classifier\_continuous\_features\_written}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_a7f465eb9cdc29dbe3a9006716a6cfaec} 
uint64\+\_\+t classifier\+\_\+continuous\+\_\+features\+\_\+written = 0\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{ei__run__classifier_8h_a2fb43be102b153d659b668ad295aff40}\index{ei\_run\_classifier.h@{ei\_run\_classifier.h}!EI\_IMPULSE\_OK@{EI\_IMPULSE\_OK}}
\index{EI\_IMPULSE\_OK@{EI\_IMPULSE\_OK}!ei\_run\_classifier.h@{ei\_run\_classifier.h}}
\doxysubsubsection{\texorpdfstring{EI\_IMPULSE\_OK}{EI\_IMPULSE\_OK}}
{\footnotesize\ttfamily \label{ei__run__classifier_8h_a2fb43be102b153d659b668ad295aff40} 
return EI\+\_\+\+IMPULSE\+\_\+\+OK}

