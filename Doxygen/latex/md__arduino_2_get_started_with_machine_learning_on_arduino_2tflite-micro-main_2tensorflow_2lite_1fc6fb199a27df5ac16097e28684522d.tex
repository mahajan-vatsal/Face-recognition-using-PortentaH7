\chapter{TFLite for Microcontrollers Benchmarks}
\hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d}{}\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d}\index{TFLite for Microcontrollers Benchmarks@{TFLite for Microcontrollers Benchmarks}}
\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md137}%
\Hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md137}%


These benchmarks are for measuring the performance of key models and workloads. They are meant to be used as part of the model optimization process for a given platform.\hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md138}{}\doxysection{\texorpdfstring{Table of contents}{Table of contents}}\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md138}

\begin{DoxyItemize}
\item Keyword Benchmark
\item Person Detection Benchmark
\item Run on x86
\item Run on Xtensa XPG Simulator
\item Run on Sparkfun Edge
\item Run on FVP based on Arm Corstone-\/300 software
\end{DoxyItemize}\hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md139}{}\doxysection{\texorpdfstring{Keyword benchmark}{Keyword benchmark}}\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md139}
The keyword benchmark contains a model for keyword detection with scrambled weights and biases. This model is meant to test performance on a platform only. Since the weights are scrambled, the output is meaningless. In order to validate the accuracy of optimized kernels, please run the kernel tests.\hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md140}{}\doxysection{\texorpdfstring{Person detection benchmark}{Person detection benchmark}}\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md140}
The keyword benchmark provides a way to evaluate the performance of the 250KB visual wakewords model.\hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md141}{}\doxysection{\texorpdfstring{Run on x86}{Run on x86}}\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md141}
To run the keyword benchmark on x86, run


\begin{DoxyCode}{0}
\DoxyCodeLine{make\ -\/f\ tensorflow/lite/micro/tools/make/Makefile\ run\_keyword\_benchmark}

\end{DoxyCode}


To run the person detection benchmark on x86, run


\begin{DoxyCode}{0}
\DoxyCodeLine{make\ -\/f\ tensorflow/lite/micro/tools/make/Makefile\ run\_person\_detection\_benchmark}

\end{DoxyCode}
\hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md142}{}\doxysection{\texorpdfstring{Run on Xtensa XPG Simulator}{Run on Xtensa XPG Simulator}}\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md142}
To run the keyword benchmark on the Xtensa XPG simulator, you will need a valid Xtensa toolchain and license. With these set up, run\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{make\ -\/f\ tensorflow/lite/micro/tools/make/Makefile\ TARGET=xtensa\ OPTIMIZED\_KERNEL\_DIR=xtensa\ TARGET\_ARCH=<target\ architecture>\ XTENSA\_CORE=<xtensa\ core>\ run\_keyword\_benchmark\ -\/j18}

\end{DoxyCode}
\hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md143}{}\doxysection{\texorpdfstring{Run on Sparkfun Edge}{Run on Sparkfun Edge}}\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md143}
The following instructions will help you build and deploy this benchmark on the \href{https://sparkfun.com/products/15170}{\texttt{ Spark\+Fun Edge development board}}.

If you\textquotesingle{}re new to using this board, we recommend walking through the \href{https://codelabs.developers.google.com/codelabs/sparkfun-tensorflow}{\texttt{ AI on a microcontroller with Tensor\+Flow Lite and Spark\+Fun Edge}} codelab to get an understanding of the workflow.

Build binary using


\begin{DoxyCode}{0}
\DoxyCodeLine{make\ -\/f\ tensorflow/lite/micro/tools/make/Makefile\ TARGET=sparkfun\_edge\ person\_detection\_benchmark\_bin}

\end{DoxyCode}


Refer to flashing instructions in the \href{https://github.com/tensorflow/tflite-micro/blob/main/tensorflow/lite/micro/examples/person_detection/README.md\#running-on-sparkfun-edge}{\texttt{ Person Detection Example}}.\hypertarget{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md144}{}\doxysection{\texorpdfstring{Run on FVP based on Arm Corstone-\/300 software}{Run on FVP based on Arm Corstone-\/300 software}}\label{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_1fc6fb199a27df5ac16097e28684522d_autotoc_md144}
For more info about the Corstone-\/300 software see\+: \doxysectlink{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_82827bd6c13db4bb01fdae0f97c9e47c}{tensorflow/lite/micro/cortex\+\_\+m\+\_\+corstone\+\_\+300/\+README.md}{0}.

Disclaimer\+: Executing the benchmark test on the Corstone-\/300 software will provide a general metric of instructions executed. The estimates are not cycle accurate, however it aligns to instruction per cycle, and is a consistent environment. This means it can detect if code changes changed performance.

The person detection benchmark can also run with Ethos-\/U enabled, as the downloaded model will be optimized for Ethos-\/U. For more info see\+: \doxysectlink{md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_0ba4459073c33ccb7906653606a33922}{tensorflow/lite/micro/kernels/ethos\+\_\+u/\+README.md}{0}.

To run the keyword benchmark on FVP\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{make\ -\/f\ tensorflow/lite/micro/tools/make/Makefile\ TARGET=cortex\_m\_corstone\_300\ TARGET\_ARCH=cortex-\/m55\ run\_keyword\_benchmark}

\end{DoxyCode}


To run the person detection benchmark on FVP\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{make\ -\/f\ tensorflow/lite/micro/tools/make/Makefile\ TARGET=cortex\_m\_corstone\_300\ TARGET\_ARCH=cortex-\/m55\ run\_person\_detection\_benchmark}

\end{DoxyCode}


To run the person detection benchmark on FVP with Ethos-\/U\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{make\ -\/f\ tensorflow/lite/micro/tools/make/Makefile\ CO\_PROCESSOR=ethos\_u\ TARGET=cortex\_m\_corstone\_300\ TARGET\_ARCH=cortex-\/m55\ run\_person\_detection\_benchmark}

\end{DoxyCode}
 