\doxysection{Face\+\_\+\+Access\+\_\+inferencing/src/edge-\/impulse-\/sdk/classifier/inferencing\+\_\+engines/akida.h File Reference}
\hypertarget{akida_8h}{}\label{akida_8h}\index{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/classifier/inferencing\_engines/akida.h@{Face\_Access\_inferencing/src/edge-\/impulse-\/sdk/classifier/inferencing\_engines/akida.h}}
{\ttfamily \#include "{}model-\/parameters/model\+\_\+metadata.\+h"{}}\newline
{\ttfamily \#include $<$thread$>$}\newline
{\ttfamily \#include "{}tensorflow-\/lite/tensorflow/lite/c/common.\+h"{}}\newline
{\ttfamily \#include "{}tensorflow-\/lite/tensorflow/lite/interpreter.\+h"{}}\newline
{\ttfamily \#include "{}tensorflow-\/lite/tensorflow/lite/kernels/register.\+h"{}}\newline
{\ttfamily \#include "{}tensorflow-\/lite/tensorflow/lite/model.\+h"{}}\newline
{\ttfamily \#include "{}tensorflow-\/lite/tensorflow/lite/optional\+\_\+debug\+\_\+tools.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/tensorflow/lite/kernels/custom/tree\+\_\+ensemble\+\_\+classifier.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/classifier/ei\+\_\+model\+\_\+types.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/porting/ei\+\_\+classifier\+\_\+porting.\+h"{}}\newline
{\ttfamily \#include "{}edge-\/impulse-\/sdk/classifier/ei\+\_\+fill\+\_\+result\+\_\+struct.\+h"{}}\newline
{\ttfamily \#include "{}tensorflow-\/lite/tensorflow/lite/kernels/internal/reference/softmax.\+h"{}}\newline
{\ttfamily \#include "{}tflite\+\_\+helper.\+h"{}}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$fstream$>$}\newline
{\ttfamily \#include $<$sstream$>$}\newline
{\ttfamily \#include $<$iomanip$>$}\newline
{\ttfamily \#include $<$limits$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include "{}pybind11/embed.\+h"{}}\newline
{\ttfamily \#include "{}pybind11/numpy.\+h"{}}\newline
{\ttfamily \#include "{}pybind11/stl.\+h"{}}\newline
Include dependency graph for akida.\+h\+:
% FIG 0
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structei__tflite__state__t}{ei\+\_\+tflite\+\_\+state\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{akida_8h_a5869d3fdfd7859778956cb134e450b25}{EI\+\_\+\+CLASSIFIER\+\_\+\+USE\+\_\+\+AKIDA\+\_\+\+HARDWARE}}~1
\begin{DoxyCompactList}\small\item\em if we are not forcing SOFTWARE inference (simulation) then make sure we will try to use hardware \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{akida_8h_a78c6e19b13ec911a14929813c0e873a4}{EI\+\_\+\+CLASSIFIER\+\_\+\+USE\+\_\+\+AKIDA\+\_\+\+HARDWARE\+\_\+\+NO}}~0
\begin{DoxyCompactList}\small\item\em If more than one device is present in system setting this to device index can select a proper device. e.\+g.\+: set to 1 to selct /dev/akida1. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{akida_8h_a852c1b8b4e1ae56d138cc7b1bac3fb37}{EI\+\_\+\+CLASSIFIER\+\_\+\+INFERENCING\+\_\+\+ENGINE}}~\mbox{\hyperlink{ei__model__types_8h_a745f8a52a08edcab8489892fd4d2ae46}{EI\+\_\+\+CLASSIFIER\+\_\+\+TFLITE\+\_\+\+FULL}}
\item 
\#define \mbox{\hyperlink{akida_8h_a852c1b8b4e1ae56d138cc7b1bac3fb37}{EI\+\_\+\+CLASSIFIER\+\_\+\+INFERENCING\+\_\+\+ENGINE}}~\mbox{\hyperlink{ei__model__types_8h_a1da22f82aa279156afe8a54e4447b5bc}{EI\+\_\+\+CLASSIFIER\+\_\+\+AKIDA}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{akida_8h_a0b1bcf29bf5a39167d540cd3ee1ce0f8}{init\+\_\+akida}} (const uint8\+\_\+t \texorpdfstring{$\ast$}{*}model\+\_\+arr, size\+\_\+t model\+\_\+arr\+\_\+size, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}})
\item 
{\footnotesize template$<$typename T $>$ }\\void \mbox{\hyperlink{akida_8h_aac1b1c836ebe120022de348aaa277d27}{debug\+\_\+print}} (const std\+::vector$<$ T $>$ vec, const int val\+\_\+per\+\_\+row=3)
\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{akida_8h_ae95031a834aea77650106530f566fdb5}{run\+\_\+nn\+\_\+inference}} (const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}impulse, \mbox{\hyperlink{structei__feature__t}{ei\+\_\+feature\+\_\+t}} \texorpdfstring{$\ast$}{*}fmatrix, uint32\+\_\+t learn\+\_\+block\+\_\+index, uint32\+\_\+t \texorpdfstring{$\ast$}{*}input\+\_\+block\+\_\+ids, uint32\+\_\+t input\+\_\+block\+\_\+ids\+\_\+size, \mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{group__ei__functions_gaf4ad914acba713176b1f00a800e781ba}{result}}, void \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a0819d397f9fba7b345b75fef1c1f782a}{config\+\_\+ptr}}, bool \mbox{\hyperlink{ei__fill__result__struct_8h_a881f62341b5a41a3c5707268bd537be1}{debug}})
\begin{DoxyCompactList}\small\item\em Do neural network inferencing over the processed feature matrix. \end{DoxyCompactList}\item 
static \mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{akida_8h_ade70c8b8e08562c755284449a4aaae57}{get\+\_\+interpreter}} (\mbox{\hyperlink{structei__learning__block__config__tflite__graph__t}{ei\+\_\+learning\+\_\+block\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__fill__result__struct_8h_aafcd7d36638d6a564b6edbceef06ea8b}{block\+\_\+config}}, tflite\+::\+Interpreter \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\mbox{\hyperlink{_inference_allocate_tensor_8cpp_a0d8f3bb5211083760f7c593d57adb17d}{interpreter}})
\item 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} \mbox{\hyperlink{akida_8h_a85d5688f1dbc536dde02c237f84b5aa0}{run\+\_\+nn\+\_\+inference\+\_\+from\+\_\+dsp}} (\mbox{\hyperlink{structei__learning__block__config__tflite__graph__t}{ei\+\_\+learning\+\_\+block\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__fill__result__struct_8h_aafcd7d36638d6a564b6edbceef06ea8b}{block\+\_\+config}}, \mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classei_1_1signal}{signal}}, \mbox{\hyperlink{numpy__types_8h_a41f3bec87e0ffe843126a70f2024fac0}{matrix\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{ei__run__dsp_8h_a3ba015549c47e712909a20cde87dfe4f}{output\+\_\+matrix}})
\item 
\mbox{\hyperlink{akida_8h_aeeaf5d523ee6a290407328d5e17fa721}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}} ((unused)) int \mbox{\hyperlink{engines_8h_a335f8f33ce6e68893a2f4f7915e54cd4}{extract\+\_\+tflite\+\_\+features}}(\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{classei_1_1signal}{signal}}
\item 
\mbox{\hyperlink{akida_8h_a93caf3ab6ba7b29b743c765d2b83fa79}{if}} (\mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6_a6150e0515f7202e2fb518f7206ed97dc}{x}} !=0)
\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
std\+::stringstream \mbox{\hyperlink{akida_8h_a385b0bd18814f0f7ad3e2606c5f30f25}{engine\+\_\+info}}
\item 
static py\+::module\+\_\+ \mbox{\hyperlink{akida_8h_ad3aeb8015fd4de80acbfcccbd480d4f9}{akida}}
\item 
static py\+::object \mbox{\hyperlink{akida_8h_aae63da0a007121c8192c17ac8be89a16}{model}}
\item 
static py\+::object \mbox{\hyperlink{akida_8h_a0d0653d977a05dc75b9983c143d63cda}{model\+\_\+predict}}
\item 
static py\+::object \mbox{\hyperlink{akida_8h_a68b6b78623e05bae409754c3103e52be}{model\+\_\+forward}}
\item 
static py\+::object \mbox{\hyperlink{akida_8h_ad56ed4d147ee2780df7f469658e8dd67}{device}}
\item 
static bool \mbox{\hyperlink{akida_8h_af35d4fe88ce6a2e276c3ff3c542460ad}{akida\+\_\+initialized}} = false
\item 
static std\+::vector$<$ size\+\_\+t $>$ \mbox{\hyperlink{akida_8h_a0792621910eb31f95019ddc94eb3dece}{input\+\_\+shape}}
\item 
static \mbox{\hyperlink{classtflite_1_1_runtime_shape}{tflite\+::\+Runtime\+Shape}} \mbox{\hyperlink{akida_8h_a52cd3949eba004f3b8791be094e50549}{softmax\+\_\+shape}}
\item 
static \mbox{\hyperlink{structtflite_1_1_softmax_params}{tflite\+::\+Softmax\+Params}} \mbox{\hyperlink{akida_8h_aa32eba6b3164559e24b544f632e08fb6}{dummy\+\_\+params}}
\item 
static int \mbox{\hyperlink{akida_8h_a7b950177d9cb45e5c1ca09f7ff945deb}{model\+\_\+input\+\_\+bits}} = 0
\item 
static float \mbox{\hyperlink{akida_8h_a1d28dec57cce925ad92342891bd71e7c}{scale}}
\item 
static int \mbox{\hyperlink{akida_8h_abe40c211ae00ce28964899acf497071b}{down\+\_\+scale}}
\item 
std\+::map$<$ uint32\+\_\+t, \mbox{\hyperlink{structei__tflite__state__t}{ei\+\_\+tflite\+\_\+state\+\_\+t}} \texorpdfstring{$\ast$}{*} $>$ \mbox{\hyperlink{akida_8h_a8d592742eb6381339c788d23b68712fc}{ei\+\_\+tflite\+\_\+instances}}
\item 
\mbox{\hyperlink{numpy__types_8h_a41f3bec87e0ffe843126a70f2024fac0}{matrix\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{akida_8h_aac4d93b158d42bda5829a01a9c507312}{output\+\_\+matrix}}
\item 
\mbox{\hyperlink{numpy__types_8h_a41f3bec87e0ffe843126a70f2024fac0}{matrix\+\_\+t}} void \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{akida_8h_a3658b236936f6ec57ce82f0fd8cbdabb}{config\+\_\+ptr}}
\item 
\mbox{\hyperlink{numpy__types_8h_a41f3bec87e0ffe843126a70f2024fac0}{matrix\+\_\+t}} void const float \mbox{\hyperlink{akida_8h_a25c6eab61238d97eb4aaef9fc6d1fa4e}{frequency}}
\item 
\mbox{\hyperlink{structei__config__tflite__graph__t}{ei\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+t}} \mbox{\hyperlink{akida_8h_a3898ea656a9ba90bf49f93ba3906d1ee}{ei\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+0}}
\item 
\mbox{\hyperlink{structei__learning__block__config__tflite__graph__t}{ei\+\_\+learning\+\_\+block\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+t}} \mbox{\hyperlink{akida_8h_ab7daefa6e7828a2d77c57f1b54404881}{ei\+\_\+learning\+\_\+block\+\_\+config}}
\item 
auto \mbox{\hyperlink{akida_8h_ab73668665ed1903aab8905ff035a33c5}{x}} = \mbox{\hyperlink{akida_8h_a85d5688f1dbc536dde02c237f84b5aa0}{run\+\_\+nn\+\_\+inference\+\_\+from\+\_\+dsp}}(\&\mbox{\hyperlink{akida_8h_ab7daefa6e7828a2d77c57f1b54404881}{ei\+\_\+learning\+\_\+block\+\_\+config}}, \mbox{\hyperlink{classei_1_1signal}{signal}}, \mbox{\hyperlink{ei__run__dsp_8h_a3ba015549c47e712909a20cde87dfe4f}{output\+\_\+matrix}})
\item 
return \mbox{\hyperlink{akida_8h_a54eac5b77b39bd93efe5b92bbf779cd8}{EIDSP\+\_\+\+OK}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{akida_8h_a852c1b8b4e1ae56d138cc7b1bac3fb37}\index{akida.h@{akida.h}!EI\_CLASSIFIER\_INFERENCING\_ENGINE@{EI\_CLASSIFIER\_INFERENCING\_ENGINE}}
\index{EI\_CLASSIFIER\_INFERENCING\_ENGINE@{EI\_CLASSIFIER\_INFERENCING\_ENGINE}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{EI\_CLASSIFIER\_INFERENCING\_ENGINE}{EI\_CLASSIFIER\_INFERENCING\_ENGINE}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \label{akida_8h_a852c1b8b4e1ae56d138cc7b1bac3fb37} 
\#define EI\+\_\+\+CLASSIFIER\+\_\+\+INFERENCING\+\_\+\+ENGINE~\mbox{\hyperlink{ei__model__types_8h_a745f8a52a08edcab8489892fd4d2ae46}{EI\+\_\+\+CLASSIFIER\+\_\+\+TFLITE\+\_\+\+FULL}}}

\Hypertarget{akida_8h_a852c1b8b4e1ae56d138cc7b1bac3fb37}\index{akida.h@{akida.h}!EI\_CLASSIFIER\_INFERENCING\_ENGINE@{EI\_CLASSIFIER\_INFERENCING\_ENGINE}}
\index{EI\_CLASSIFIER\_INFERENCING\_ENGINE@{EI\_CLASSIFIER\_INFERENCING\_ENGINE}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{EI\_CLASSIFIER\_INFERENCING\_ENGINE}{EI\_CLASSIFIER\_INFERENCING\_ENGINE}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \label{akida_8h_a852c1b8b4e1ae56d138cc7b1bac3fb37} 
\#define EI\+\_\+\+CLASSIFIER\+\_\+\+INFERENCING\+\_\+\+ENGINE~\mbox{\hyperlink{ei__model__types_8h_a1da22f82aa279156afe8a54e4447b5bc}{EI\+\_\+\+CLASSIFIER\+\_\+\+AKIDA}}}

\Hypertarget{akida_8h_a5869d3fdfd7859778956cb134e450b25}\index{akida.h@{akida.h}!EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE@{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE}}
\index{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE@{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE}{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE}}
{\footnotesize\ttfamily \label{akida_8h_a5869d3fdfd7859778956cb134e450b25} 
\#define EI\+\_\+\+CLASSIFIER\+\_\+\+USE\+\_\+\+AKIDA\+\_\+\+HARDWARE~1}



if we are not forcing SOFTWARE inference (simulation) then make sure we will try to use hardware 

\Hypertarget{akida_8h_a78c6e19b13ec911a14929813c0e873a4}\index{akida.h@{akida.h}!EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE\_NO@{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE\_NO}}
\index{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE\_NO@{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE\_NO}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE\_NO}{EI\_CLASSIFIER\_USE\_AKIDA\_HARDWARE\_NO}}
{\footnotesize\ttfamily \label{akida_8h_a78c6e19b13ec911a14929813c0e873a4} 
\#define EI\+\_\+\+CLASSIFIER\+\_\+\+USE\+\_\+\+AKIDA\+\_\+\+HARDWARE\+\_\+\+NO~0}



If more than one device is present in system setting this to device index can select a proper device. e.\+g.\+: set to 1 to selct /dev/akida1. 



\doxysubsection{Function Documentation}
\Hypertarget{akida_8h_aeeaf5d523ee6a290407328d5e17fa721}\index{akida.h@{akida.h}!\_\_attribute\_\_@{\_\_attribute\_\_}}
\index{\_\_attribute\_\_@{\_\_attribute\_\_}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{\_\_attribute\_\_()}{\_\_attribute\_\_()}}
{\footnotesize\ttfamily \label{akida_8h_aeeaf5d523ee6a290407328d5e17fa721} 
\+\_\+\+\_\+attribute\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{(unused)}]{}{}\end{DoxyParamCaption})}

\Hypertarget{akida_8h_aac1b1c836ebe120022de348aaa277d27}\index{akida.h@{akida.h}!debug\_print@{debug\_print}}
\index{debug\_print@{debug\_print}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{debug\_print()}{debug\_print()}}
{\footnotesize\ttfamily \label{akida_8h_aac1b1c836ebe120022de348aaa277d27} 
template$<$typename T $>$ \\
void debug\+\_\+print (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ T $>$}]{vec}{, }\item[{const int}]{val\+\_\+per\+\_\+row}{ = {\ttfamily 3}}\end{DoxyParamCaption})}

\Hypertarget{akida_8h_ade70c8b8e08562c755284449a4aaae57}\index{akida.h@{akida.h}!get\_interpreter@{get\_interpreter}}
\index{get\_interpreter@{get\_interpreter}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{get\_interpreter()}{get\_interpreter()}}
{\footnotesize\ttfamily \label{akida_8h_ade70c8b8e08562c755284449a4aaae57} 
static \mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} get\+\_\+interpreter (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structei__learning__block__config__tflite__graph__t}{ei\+\_\+learning\+\_\+block\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{block\+\_\+config}{, }\item[{tflite\+::\+Interpreter \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}}]{interpreter}{}\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Construct a tflite interpreter (creates it if needed) \Hypertarget{akida_8h_a93caf3ab6ba7b29b743c765d2b83fa79}\index{akida.h@{akida.h}!if@{if}}
\index{if@{if}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{if()}{if()}}
{\footnotesize\ttfamily \label{akida_8h_a93caf3ab6ba7b29b743c765d2b83fa79} 
if (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6_a6150e0515f7202e2fb518f7206ed97dc}{x}} !}]{}{ = {\ttfamily 0}}\end{DoxyParamCaption})}

\Hypertarget{akida_8h_a0b1bcf29bf5a39167d540cd3ee1ce0f8}\index{akida.h@{akida.h}!init\_akida@{init\_akida}}
\index{init\_akida@{init\_akida}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{init\_akida()}{init\_akida()}}
{\footnotesize\ttfamily \label{akida_8h_a0b1bcf29bf5a39167d540cd3ee1ce0f8} 
bool init\+\_\+akida (\begin{DoxyParamCaption}\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{model\+\_\+arr}{, }\item[{size\+\_\+t}]{model\+\_\+arr\+\_\+size}{, }\item[{bool}]{debug}{}\end{DoxyParamCaption})}

\Hypertarget{akida_8h_ae95031a834aea77650106530f566fdb5}\index{akida.h@{akida.h}!run\_nn\_inference@{run\_nn\_inference}}
\index{run\_nn\_inference@{run\_nn\_inference}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{run\_nn\_inference()}{run\_nn\_inference()}}
{\footnotesize\ttfamily \label{akida_8h_ae95031a834aea77650106530f566fdb5} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} run\+\_\+nn\+\_\+inference (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{ei__model__types_8h_a936cf405a057a578f2bc7b540ccafe57}{ei\+\_\+impulse\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{impulse}{, }\item[{\mbox{\hyperlink{structei__feature__t}{ei\+\_\+feature\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{fmatrix}{, }\item[{uint32\+\_\+t}]{learn\+\_\+block\+\_\+index}{, }\item[{uint32\+\_\+t \texorpdfstring{$\ast$}{*}}]{input\+\_\+block\+\_\+ids}{, }\item[{uint32\+\_\+t}]{input\+\_\+block\+\_\+ids\+\_\+size}{, }\item[{\mbox{\hyperlink{structei__impulse__result__t}{ei\+\_\+impulse\+\_\+result\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{result}{, }\item[{void \texorpdfstring{$\ast$}{*}}]{config\+\_\+ptr}{, }\item[{bool}]{debug}{}\end{DoxyParamCaption})}



Do neural network inferencing over the processed feature matrix. 


\begin{DoxyParams}[1]{Parameters}
 & {\em impulse} & Struct describing impulse architecture \\
\hline
 & {\em fmatrix} & Processed matrix \\
\hline
 & {\em result} & Output classifier results \\
\hline
\mbox{\texttt{ in}}  & {\em debug} & Debug output enable\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The ei impulse error. 
\end{DoxyReturn}
\Hypertarget{akida_8h_a85d5688f1dbc536dde02c237f84b5aa0}\index{akida.h@{akida.h}!run\_nn\_inference\_from\_dsp@{run\_nn\_inference\_from\_dsp}}
\index{run\_nn\_inference\_from\_dsp@{run\_nn\_inference\_from\_dsp}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{run\_nn\_inference\_from\_dsp()}{run\_nn\_inference\_from\_dsp()}}
{\footnotesize\ttfamily \label{akida_8h_a85d5688f1dbc536dde02c237f84b5aa0} 
\mbox{\hyperlink{group__ei__returntypes_gad9580b47a6cd5e74cfc31a03bdfecebe}{EI\+\_\+\+IMPULSE\+\_\+\+ERROR}} run\+\_\+nn\+\_\+inference\+\_\+from\+\_\+dsp (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structei__learning__block__config__tflite__graph__t}{ei\+\_\+learning\+\_\+block\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{block\+\_\+config}{, }\item[{\mbox{\hyperlink{group__ei__structs_gaa11c321d559d65dd1adff6af0edf54e4}{signal\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{signal}{, }\item[{\mbox{\hyperlink{numpy__types_8h_a41f3bec87e0ffe843126a70f2024fac0}{matrix\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{output\+\_\+matrix}{}\end{DoxyParamCaption})}



\doxysubsection{Variable Documentation}
\Hypertarget{akida_8h_ad3aeb8015fd4de80acbfcccbd480d4f9}\index{akida.h@{akida.h}!akida@{akida}}
\index{akida@{akida}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{akida}{akida}}
{\footnotesize\ttfamily \label{akida_8h_ad3aeb8015fd4de80acbfcccbd480d4f9} 
py\+::module\+\_\+ akida\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_af35d4fe88ce6a2e276c3ff3c542460ad}\index{akida.h@{akida.h}!akida\_initialized@{akida\_initialized}}
\index{akida\_initialized@{akida\_initialized}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{akida\_initialized}{akida\_initialized}}
{\footnotesize\ttfamily \label{akida_8h_af35d4fe88ce6a2e276c3ff3c542460ad} 
bool akida\+\_\+initialized = false\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_a3658b236936f6ec57ce82f0fd8cbdabb}\index{akida.h@{akida.h}!config\_ptr@{config\_ptr}}
\index{config\_ptr@{config\_ptr}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{config\_ptr}{config\_ptr}}
{\footnotesize\ttfamily \label{akida_8h_a3658b236936f6ec57ce82f0fd8cbdabb} 
\mbox{\hyperlink{numpy__types_8h_a41f3bec87e0ffe843126a70f2024fac0}{matrix\+\_\+t}} void\texorpdfstring{$\ast$}{*} config\+\_\+ptr}

\Hypertarget{akida_8h_ad56ed4d147ee2780df7f469658e8dd67}\index{akida.h@{akida.h}!device@{device}}
\index{device@{device}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{device}{device}}
{\footnotesize\ttfamily \label{akida_8h_ad56ed4d147ee2780df7f469658e8dd67} 
py\+::object device\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_abe40c211ae00ce28964899acf497071b}\index{akida.h@{akida.h}!down\_scale@{down\_scale}}
\index{down\_scale@{down\_scale}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{down\_scale}{down\_scale}}
{\footnotesize\ttfamily \label{akida_8h_abe40c211ae00ce28964899acf497071b} 
int down\+\_\+scale\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_aa32eba6b3164559e24b544f632e08fb6}\index{akida.h@{akida.h}!dummy\_params@{dummy\_params}}
\index{dummy\_params@{dummy\_params}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{dummy\_params}{dummy\_params}}
{\footnotesize\ttfamily \label{akida_8h_aa32eba6b3164559e24b544f632e08fb6} 
\mbox{\hyperlink{structtflite_1_1_softmax_params}{tflite\+::\+Softmax\+Params}} dummy\+\_\+params\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_a3898ea656a9ba90bf49f93ba3906d1ee}\index{akida.h@{akida.h}!ei\_config\_tflite\_graph\_0@{ei\_config\_tflite\_graph\_0}}
\index{ei\_config\_tflite\_graph\_0@{ei\_config\_tflite\_graph\_0}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{ei\_config\_tflite\_graph\_0}{ei\_config\_tflite\_graph\_0}}
{\footnotesize\ttfamily \label{akida_8h_a3898ea656a9ba90bf49f93ba3906d1ee} 
\mbox{\hyperlink{structei__config__tflite__graph__t}{ei\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+t}} ei\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+0}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .implementation\_version\ =\ 1,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .model\ =\ dsp\_config-\/>model,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .model\_size\ =\ dsp\_config-\/>model\_size,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .arena\_size\ =\ dsp\_config-\/>arena\_size}
\DoxyCodeLine{\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{akida_8h_ab7daefa6e7828a2d77c57f1b54404881}\index{akida.h@{akida.h}!ei\_learning\_block\_config@{ei\_learning\_block\_config}}
\index{ei\_learning\_block\_config@{ei\_learning\_block\_config}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{ei\_learning\_block\_config}{ei\_learning\_block\_config}}
{\footnotesize\ttfamily \label{akida_8h_ab7daefa6e7828a2d77c57f1b54404881} 
\mbox{\hyperlink{structei__learning__block__config__tflite__graph__t}{ei\+\_\+learning\+\_\+block\+\_\+config\+\_\+tflite\+\_\+graph\+\_\+t}} ei\+\_\+learning\+\_\+block\+\_\+config}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=\ \{}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .implementation\_version\ =\ 1,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .classification\_mode\ =\ \mbox{\hyperlink{ei__model__types_8h_a76c13cf6c356590ec9aa183c25b90a5e}{EI\_CLASSIFIER\_CLASSIFICATION\_MODE\_DSP}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .block\_id\ =\ dsp\_config-\/>block\_id,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .object\_detection\ =\ \textcolor{keyword}{false},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .object\_detection\_last\_layer\ =\ \mbox{\hyperlink{ei__model__types_8h_a67edebb42ed0ac73b3a4337ae07a281e}{EI\_CLASSIFIER\_LAST\_LAYER\_UNKNOWN}},}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .output\_data\_tensor\ =\ 0,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .output\_labels\_tensor\ =\ 255,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .output\_score\_tensor\ =\ 255,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .threshold\ =\ 0,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .quantized\ =\ 0,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .compiled\ =\ 1,}
\DoxyCodeLine{\ \ \ \ \ \ \ \ .graph\_config\ =\ \&\mbox{\hyperlink{akida_8h_a3898ea656a9ba90bf49f93ba3906d1ee}{ei\_config\_tflite\_graph\_0}}}
\DoxyCodeLine{\ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{akida_8h_a8d592742eb6381339c788d23b68712fc}\index{akida.h@{akida.h}!ei\_tflite\_instances@{ei\_tflite\_instances}}
\index{ei\_tflite\_instances@{ei\_tflite\_instances}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{ei\_tflite\_instances}{ei\_tflite\_instances}}
{\footnotesize\ttfamily \label{akida_8h_a8d592742eb6381339c788d23b68712fc} 
std\+::map$<$uint32\+\_\+t, \mbox{\hyperlink{structei__tflite__state__t}{ei\+\_\+tflite\+\_\+state\+\_\+t}}\texorpdfstring{$\ast$}{*}$>$ ei\+\_\+tflite\+\_\+instances}

\Hypertarget{akida_8h_a54eac5b77b39bd93efe5b92bbf779cd8}\index{akida.h@{akida.h}!EIDSP\_OK@{EIDSP\_OK}}
\index{EIDSP\_OK@{EIDSP\_OK}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{EIDSP\_OK}{EIDSP\_OK}}
{\footnotesize\ttfamily \label{akida_8h_a54eac5b77b39bd93efe5b92bbf779cd8} 
return EIDSP\+\_\+\+OK}

\Hypertarget{akida_8h_a385b0bd18814f0f7ad3e2606c5f30f25}\index{akida.h@{akida.h}!engine\_info@{engine\_info}}
\index{engine\_info@{engine\_info}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{engine\_info}{engine\_info}}
{\footnotesize\ttfamily \label{akida_8h_a385b0bd18814f0f7ad3e2606c5f30f25} 
std\+::stringstream engine\+\_\+info}

\Hypertarget{akida_8h_a25c6eab61238d97eb4aaef9fc6d1fa4e}\index{akida.h@{akida.h}!frequency@{frequency}}
\index{frequency@{frequency}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{frequency}{frequency}}
{\footnotesize\ttfamily \label{akida_8h_a25c6eab61238d97eb4aaef9fc6d1fa4e} 
\mbox{\hyperlink{numpy__types_8h_a41f3bec87e0ffe843126a70f2024fac0}{matrix\+\_\+t}} void const float frequency}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\{}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{structei__dsp__config__tflite__t}{ei\_dsp\_config\_tflite\_t}}\ *dsp\_config\ =\ (\mbox{\hyperlink{structei__dsp__config__tflite__t}{ei\_dsp\_config\_tflite\_t}}*)\mbox{\hyperlink{akida_8h_a3658b236936f6ec57ce82f0fd8cbdabb}{config\_ptr}}}

\end{DoxyCode}
\Hypertarget{akida_8h_a0792621910eb31f95019ddc94eb3dece}\index{akida.h@{akida.h}!input\_shape@{input\_shape}}
\index{input\_shape@{input\_shape}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{input\_shape}{input\_shape}}
{\footnotesize\ttfamily \label{akida_8h_a0792621910eb31f95019ddc94eb3dece} 
std\+::vector$<$size\+\_\+t$>$ input\+\_\+shape\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_aae63da0a007121c8192c17ac8be89a16}\index{akida.h@{akida.h}!model@{model}}
\index{model@{model}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{model}{model}}
{\footnotesize\ttfamily \label{akida_8h_aae63da0a007121c8192c17ac8be89a16} 
py\+::object model\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_a68b6b78623e05bae409754c3103e52be}\index{akida.h@{akida.h}!model\_forward@{model\_forward}}
\index{model\_forward@{model\_forward}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{model\_forward}{model\_forward}}
{\footnotesize\ttfamily \label{akida_8h_a68b6b78623e05bae409754c3103e52be} 
py\+::object model\+\_\+forward\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_a7b950177d9cb45e5c1ca09f7ff945deb}\index{akida.h@{akida.h}!model\_input\_bits@{model\_input\_bits}}
\index{model\_input\_bits@{model\_input\_bits}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{model\_input\_bits}{model\_input\_bits}}
{\footnotesize\ttfamily \label{akida_8h_a7b950177d9cb45e5c1ca09f7ff945deb} 
int model\+\_\+input\+\_\+bits = 0\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_a0d0653d977a05dc75b9983c143d63cda}\index{akida.h@{akida.h}!model\_predict@{model\_predict}}
\index{model\_predict@{model\_predict}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{model\_predict}{model\_predict}}
{\footnotesize\ttfamily \label{akida_8h_a0d0653d977a05dc75b9983c143d63cda} 
py\+::object model\+\_\+predict\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_aac4d93b158d42bda5829a01a9c507312}\index{akida.h@{akida.h}!output\_matrix@{output\_matrix}}
\index{output\_matrix@{output\_matrix}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{output\_matrix}{output\_matrix}}
{\footnotesize\ttfamily \label{akida_8h_aac4d93b158d42bda5829a01a9c507312} 
\mbox{\hyperlink{numpy__types_8h_a41f3bec87e0ffe843126a70f2024fac0}{matrix\+\_\+t}}\texorpdfstring{$\ast$}{*} output\+\_\+matrix}

\Hypertarget{akida_8h_a1d28dec57cce925ad92342891bd71e7c}\index{akida.h@{akida.h}!scale@{scale}}
\index{scale@{scale}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{scale}{scale}}
{\footnotesize\ttfamily \label{akida_8h_a1d28dec57cce925ad92342891bd71e7c} 
float scale\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_a52cd3949eba004f3b8791be094e50549}\index{akida.h@{akida.h}!softmax\_shape@{softmax\_shape}}
\index{softmax\_shape@{softmax\_shape}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{softmax\_shape}{softmax\_shape}}
{\footnotesize\ttfamily \label{akida_8h_a52cd3949eba004f3b8791be094e50549} 
\mbox{\hyperlink{classtflite_1_1_runtime_shape}{tflite\+::\+Runtime\+Shape}} softmax\+\_\+shape\hspace{0.3cm}{\ttfamily [static]}}

\Hypertarget{akida_8h_ab73668665ed1903aab8905ff035a33c5}\index{akida.h@{akida.h}!x@{x}}
\index{x@{x}!akida.h@{akida.h}}
\doxysubsubsection{\texorpdfstring{x}{x}}
{\footnotesize\ttfamily \label{akida_8h_ab73668665ed1903aab8905ff035a33c5} 
auto x = \mbox{\hyperlink{akida_8h_a85d5688f1dbc536dde02c237f84b5aa0}{run\+\_\+nn\+\_\+inference\+\_\+from\+\_\+dsp}}(\&\mbox{\hyperlink{akida_8h_ab7daefa6e7828a2d77c57f1b54404881}{ei\+\_\+learning\+\_\+block\+\_\+config}}, \mbox{\hyperlink{classei_1_1signal}{signal}}, \mbox{\hyperlink{ei__run__dsp_8h_a3ba015549c47e712909a20cde87dfe4f}{output\+\_\+matrix}})}

