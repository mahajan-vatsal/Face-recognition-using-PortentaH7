<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Machine Vision using Portenta H7: README</title>
<link rel="icon" href="logo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Machine Vision using Portenta H7<span id="projectnumber">&#160;2</span>
   </div>
   <div id="projectbrief">This project aims to develop a face recognition-based access control system using the Arduino Portenta H7 and Vision Shield, leveraging Edge Impulse for machine learning. The system captures facial images, processes them locally using an AI model deployed on the Portenta H7 and determines access based on authorised personnel.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">README</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md259"></a>
Hello World Example</h1>
<p>This example is designed to demonstrate the absolute basics of using <a href="https://www.tensorflow.org/lite/microcontrollers">TensorFlow Lite for Microcontrollers</a>. It includes the full end-to-end workflow of training a model, converting it for use with TensorFlow Lite for Microcontrollers for running inference on a microcontroller.</p>
<h2><a class="anchor" id="autotoc_md260"></a>
Table of contents</h2>
<ul>
<li>Run the evaluate.py script on a development machine</li>
<li>Run the tests on a development machine</li>
<li>Train your own model</li>
</ul>
<h2><a class="anchor" id="autotoc_md261"></a>
Run the evaluate.py script on a development machine</h2>
<p>The evaluate.py script runs the hello_world.tflite model with x_values in the range of [0, 2*PI]. The script plots a diagram of the predicted value of sinwave using TFLM interpreter and compare that prediction with the actual value generated by the numpy lib. </p><div class="fragment"><div class="line">bazel build tensorflow/lite/micro/examples/hello_world:evaluate</div>
<div class="line">bazel run tensorflow/lite/micro/examples/hello_world:evaluate</div>
<div class="line">bazel run tensorflow/lite/micro/examples/hello_world:evaluate -- --use_tflite</div>
</div><!-- fragment --><p> <img src="images/hello_world_tflm.png" alt="TFLM hello_world sinwave prediction VS actual values" class="inline"/> <img src="images/hello_world_tflite.png" alt="TFLM hello_world sinwave prediction VS actual values" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md262"></a>
Run the evaluate_test.py script on a development machine</h2>
<p>These tests verify the input/output as well as the prediction of the hello_world.tflite model. There is a test to also verify the correctness of the model by running both TFLM and TFlite interpreter and then comparing the prediction from both interpreters. </p><div class="fragment"><div class="line">bazel build tensorflow/lite/micro/examples/hello_world:evaluate_test</div>
<div class="line">bazel run tensorflow/lite/micro/examples/hello_world:evaluate_test</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md263"></a>
Run the tests on a development machine</h2>
<p>Run the cc test using bazel </p><div class="fragment"><div class="line">bazel run tensorflow/lite/micro/examples/hello_world:hello_world_test</div>
</div><!-- fragment --><p> And to run it using make </p><div class="fragment"><div class="line">make -f tensorflow/lite/micro/tools/make/Makefile test_hello_world_test</div>
</div><!-- fragment --><p>The source for the test is <a href="hello_world_test.cc">hello_world_test.cc</a>. It's a fairly small amount of code that creates an interpreter, gets a handle to a model that's been compiled into the program, and then invokes the interpreter with the model and sample inputs.</p>
<h2><a class="anchor" id="autotoc_md264"></a>
Train your own model</h2>
<p>So far you have used an existing trained model to run inference on microcontrollers. If you wish to train your own model, here are the scripts that can help you to achieve that.</p>
<div class="fragment"><div class="line">bazel build tensorflow/lite/micro/examples/hello_world:train</div>
</div><!-- fragment --><p> And to run it </p><div class="fragment"><div class="line">bazel-bin/tensorflow/lite/micro/examples/hello_world/train --save_tf_model </div>
<div class="line">--save_dir=/tmp/model_created/</div>
</div><!-- fragment --><p> The above script will create a TF model and TFlite model inside the <code>/tmp/model_created</code> directory.</p>
<p>Now the above model is a <code>float</code> model. Means it can take floating point input and can produce floating point output.</p>
<p>If we want a fully quantized model we can use the <code><a class="el" href="ptq_8py.html">ptq.py</a></code> script inside the quantization directory. The <code><a class="el" href="ptq_8py.html">ptq.py</a></code> script can take a floating point TF model and can produce a quantized model.</p>
<p>Build the <code><a class="el" href="ptq_8py.html">ptq.py</a></code> script like </p><div class="fragment"><div class="line">bazel build tensorflow/lite/micro/examples/hello_world/quantization:ptq</div>
</div><!-- fragment --><p>Then we can run the <code>ptq</code> script to convert the float model to quant model as follows. Note that we are using the directory (<code>/tmp/model_created</code>) of the TF model as the source_model_dir here. The quant model (named <code>hello_world_int8.tflite</code>) will be created inside the target_dir. The <code><a class="el" href="ptq_8py.html">ptq.py</a></code> script will convert the <code>TF model</code> found inside the <code>/tmp/model_created</code> folder and convert it to a <code>int8</code> TFlite model. </p><div class="fragment"><div class="line">bazel-bin/tensorflow/lite/micro/examples/hello_world/quantization/ptq  </div>
<div class="line">--source_model_dir=/tmp/model_created --target_dir=/tmp/quant_model/</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
