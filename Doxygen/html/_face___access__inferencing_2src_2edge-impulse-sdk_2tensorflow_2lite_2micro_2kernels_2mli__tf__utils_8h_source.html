<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Machine Vision using Portenta H7: Face_Access_inferencing/src/edge-impulse-sdk/tensorflow/lite/micro/kernels/mli_tf_utils.h Source File</title>
<link rel="icon" href="logo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Machine Vision using Portenta H7<span id="projectnumber">&#160;2</span>
   </div>
   <div id="projectbrief">This project aims to develop a face recognition-based access control system using the Arduino Portenta H7 and Vision Shield, leveraging Edge Impulse for machine learning. The system captures facial images, processes them locally using an AI model deployed on the Portenta H7 and determines access based on authorised personnel.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_05f86cf2d1c107dceef0ab0392ddcfcf.html">Face_Access_inferencing</a></li><li class="navelem"><a class="el" href="dir_a10e16a828caf535b3ccf4484f92e610.html">src</a></li><li class="navelem"><a class="el" href="dir_295f854905297c9d29514d45981534fb.html">edge-impulse-sdk</a></li><li class="navelem"><a class="el" href="dir_88de7df65619900f92563be63df6b182.html">tensorflow</a></li><li class="navelem"><a class="el" href="dir_9e2e44523d0e7057efff3aa2b83d3c03.html">lite</a></li><li class="navelem"><a class="el" href="dir_7479794792bf05ac1675800fbf30d968.html">micro</a></li><li class="navelem"><a class="el" href="dir_5cc28eeb8f85df98dbeacd7840d9039c.html">kernels</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">mli_tf_utils.h</div></div>
</div><!--header-->
<div class="contents">
<a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2kernels_2mli__tf__utils_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Patched by Edge Impulse to include reference and hardware-accelerated kernels</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="preprocessor">#include &quot;<a class="code" href="ei__classifier__config_8h.html">../../../../classifier/ei_classifier_config.h</a>&quot;</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#if EI_CLASSIFIER_TFLITE_ENABLE_ARC == 1</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">/* Copyright 2021 The TensorFlow Authors. All Rights Reserved.</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"></span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">you may not use this file except in compliance with the License.</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"></span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment"></span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">See the License for the specific language governing permissions and</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">limitations under the License.</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">==============================================================================*/</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#ifndef TENSORFLOW_LITE_MICRO_KERNELS_ARC_MLI_TF_UTILS_H_</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#define TENSORFLOW_LITE_MICRO_KERNELS_ARC_MLI_TF_UTILS_H_</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;mli_api.h&quot;</span>  <span class="comment">// NOLINT</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2kernels_2mli__interface_8h.html">mli_interface.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2common_8h.html">edge-impulse-sdk/tensorflow/lite/kernels/internal/common.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2tensor__ctypes_8h.html">edge-impulse-sdk/tensorflow/lite/kernels/internal/tensor_ctypes.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2kernels_2kernel__util_8h.html">edge-impulse-sdk/tensorflow/lite/micro/kernels/kernel_util.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2micro__log_8h.html">edge-impulse-sdk/tensorflow/lite/micro/micro_log.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#define KRNL_C_DIM_NHWC 0  </span><span class="comment">// output channels</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacetflite.html">tflite</a> {</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="keyword">namespace </span>ops {</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="keyword">namespace </span>micro {</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#ad3445cf3ec51447164e596ab9592103a">ConvertToMliTensorData</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* tfT,</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>                                   MliTensorInterface* mliT,</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>                                   <span class="keywordtype">bool</span> is_bias_tensor) {</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>  <span class="comment">// Data is NULL until MliTensorAttachBuffer is called.</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>  mliT-&gt;SetElType(tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#a24d579d439274a598ce79f0ec6bf6f50">type</a>);</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>  <span class="keywordflow">if</span> (tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#a24d579d439274a598ce79f0ec6bf6f50">type</a> == <a class="code hl_enumvalue" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#a8a47ba81bdef28b5c479ee7928a7d123aa5aabb7d65c4d50cda0658c6ecb4851c">kTfLiteInt8</a>) {</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    mliT-&gt;SetData&lt;int8_t&gt;(<span class="keyword">nullptr</span>, tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#a65082739eecbd6d52d7d339d43b87606">bytes</a>);</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#a24d579d439274a598ce79f0ec6bf6f50">type</a> == <a class="code hl_enumvalue" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#a8a47ba81bdef28b5c479ee7928a7d123a3be7bb6b2164f8d28936ed3c3649182a">kTfLiteInt32</a>) {</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    mliT-&gt;SetData&lt;int32_t&gt;(<span class="keyword">nullptr</span>, tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#a65082739eecbd6d52d7d339d43b87606">bytes</a>);</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <a class="code hl_define" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2micro__log_8h.html#ab9bf491b4a37b06ba732fd7de6b04cb2">MicroPrintf</a>(<span class="stringliteral">&quot;Wrong data type. Expected int8_t or int32_t.&quot;</span>);</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src42c086e4473e7d05e4bf9eb4ee8591b1.html#a4bcc2836b3aadc325710951434580109">TFLITE_ABORT</a>;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  }</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>  <span class="keyword">const</span> int32_t dims_count = <a class="code hl_function" href="namespacetflite.html#a575226cacf2453458286f00dd4bed1b3">GetTensorShape</a>(tfT).<a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a9de8e21fa79a2a74e69578f0240f4ebe">DimensionsCount</a>();</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>  *mliT-&gt;Rank() = is_bias_tensor ? 1 : dims_count;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>  <span class="keywordtype">int</span> mli_tensor_memstride = 1;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>  <span class="keywordflow">if</span> (is_bias_tensor) {</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    mliT-&gt;Shape()[0] = <a class="code hl_function" href="namespacetflite.html#a575226cacf2453458286f00dd4bed1b3">GetTensorShape</a>(tfT).<a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a2039ed030a02c05b73a0ea723339a808">Dims</a>(dims_count - 1);</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    mliT-&gt;MemStride()[0] = mli_tensor_memstride;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = dims_count - 1; i &gt;= 0; --i) {</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>      mliT-&gt;Shape()[i] = <a class="code hl_function" href="namespacetflite.html#a575226cacf2453458286f00dd4bed1b3">GetTensorShape</a>(tfT).<a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a2039ed030a02c05b73a0ea723339a808">Dims</a>(i);</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>      mliT-&gt;MemStride()[i] = mli_tensor_memstride;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>      mli_tensor_memstride *= <a class="code hl_function" href="namespacetflite.html#a575226cacf2453458286f00dd4bed1b3">GetTensorShape</a>(tfT).<a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a2039ed030a02c05b73a0ea723339a808">Dims</a>(i);</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    }</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  }</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>}</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#acc9bb99724724839f127eef50f447218">ConvertToMliQuantParams</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* tfT,</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>                                    MliTensorInterface* mliT) {</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>  *mliT-&gt;Dim() = -1;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="preprocessor">#ifdef MLI_2_0</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>  *mliT-&gt;ZeroPointCapacity() = 0;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>  *mliT-&gt;ZeroPoint&lt;int16_t*&gt;() = tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#ad0fbad4e97f0be0a6e4bfa1b2be0e3fe">params</a>.<a class="code hl_variable" href="struct_tf_lite_quantization_params.html#a7bfb85a682ab431a6c0c609d3938ab6e">zero_point</a>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>  <span class="keywordtype">float</span> fscale = tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#ad0fbad4e97f0be0a6e4bfa1b2be0e3fe">params</a>.<a class="code hl_variable" href="struct_tf_lite_quantization_params.html#aedc85f69317ce1c27e6e88f886ea8af8">scale</a>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  mliT-&gt;SetScale(fscale);</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>}</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#a45ea380e22bb7ace8e209945f28bd6ec">ConvertToMliQuantParamsPerChannel</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* tfT,</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>                                              MliTensorInterface* mliT,</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>                                              <span class="keywordtype">bool</span> is_bias_tensor) {</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>  <span class="comment">// mli tensor scale and zero_point arrays should be allocated at this point</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span><span class="preprocessor">#ifdef MLI_2_0</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a21ca1982910062a76721e3b80fd4275e">TFLITE_DCHECK_NE</a>(*mliT-&gt;Scale&lt;int16_t**&gt;(), 0);</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a21ca1982910062a76721e3b80fd4275e">TFLITE_DCHECK_NE</a>(*mliT-&gt;ZeroPoint&lt;int16_t**&gt;(), 0);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a21ca1982910062a76721e3b80fd4275e">TFLITE_DCHECK_NE</a>(*mliT-&gt;Scale&lt;int32_t**&gt;(), 0);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a21ca1982910062a76721e3b80fd4275e">TFLITE_DCHECK_NE</a>(*mliT-&gt;ZeroPoint&lt;int16_t**&gt;(), 0);</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  <span class="comment">// get per channel quantization parameters</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  <span class="keyword">const</span> <span class="keyword">auto</span>* affine_quantization =</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>      <span class="keyword">reinterpret_cast&lt;</span><a class="code hl_struct" href="struct_tf_lite_affine_quantization.html">TfLiteAffineQuantization</a>*<span class="keyword">&gt;</span>(tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#aa4efa609d9ad9c78c5f53a592020de9e">quantization</a>.<a class="code hl_variable" href="struct_tf_lite_quantization.html#ad9fa8b753fc13a8328697b7538ad8580">params</a>);</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>  int32_t quantized_dimension =</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>      is_bias_tensor ? 0 : affine_quantization-&gt;<a class="code hl_variable" href="struct_tf_lite_affine_quantization.html#ab59ebe2c790ca6067e9792f2c7eb3a19">quantized_dimension</a>;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a> = mliT-&gt;Shape()[quantized_dimension];</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  *mliT-&gt;Dim() = quantized_dimension;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>  <span class="comment">// set capacities</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="preprocessor">#ifdef MLI_2_0</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>  *mliT-&gt;ScaleFracBitsCapacity() = <a class="code hl_variable" href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a> * <span class="keyword">sizeof</span>(int8_t);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>  *mliT-&gt;ScaleCapacity() = <a class="code hl_variable" href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a> * <span class="keyword">sizeof</span>(int16_t);</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>  *mliT-&gt;ZeroPointCapacity() = <a class="code hl_variable" href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a> * <span class="keyword">sizeof</span>(int16_t);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>  <span class="keywordtype">float</span>* fscale = affine_quantization-&gt;scale-&gt;data;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>  mliT-&gt;SetScalePerChannel(fscale, <a class="code hl_variable" href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a>);</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="preprocessor">#ifdef MLI_2_0</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>  int16_t* <a class="code hl_variable" href="batch__matmul__test_8cc.html#a26c07acd3fa6a6da13ddae2bc5c64b55">zero_point</a> = *mliT-&gt;ZeroPoint&lt;int16_t**&gt;();</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a>; i++) {</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <a class="code hl_variable" href="batch__matmul__test_8cc.html#a26c07acd3fa6a6da13ddae2bc5c64b55">zero_point</a>[i] = tfT-&gt;<a class="code hl_variable" href="struct_tf_lite_tensor.html#ad0fbad4e97f0be0a6e4bfa1b2be0e3fe">params</a>.<a class="code hl_variable" href="struct_tf_lite_quantization_params.html#a7bfb85a682ab431a6c0c609d3938ab6e">zero_point</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  }</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>}</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> datatype&gt;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#a76406fe47978c773a72df74146718223">MliTensorAttachBuffer</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_tf_lite_eval_tensor.html">TfLiteEvalTensor</a>*,</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                                  <span class="keyword">const</span> MliTensorInterface*);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#a10e348a9b3aab2a3396f63b63e308e9a">MliTensorAttachBuffer&lt;int8_t&gt;</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_tf_lite_eval_tensor.html">TfLiteEvalTensor</a>* tfT,</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                                          <span class="keyword">const</span> MliTensorInterface* mliT) {</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  <span class="comment">// &quot;const_cast&quot; here used to attach const data buffer to the initially</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  <span class="comment">// non-const mli_tensor. This is required by current implementation of MLI</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="comment">// backend and planned for redesign due to this and some other aspects.</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  mliT-&gt;SetData&lt;int8_t&gt;(</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>      <span class="keyword">const_cast&lt;</span>int8_t*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacetflite_1_1micro.html#a0e66bf95a19a5f5522df24cc23afc68f">tflite::micro::GetTensorData&lt;int8_t&gt;</a>(tfT)),</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>      *mliT-&gt;DataCapacity());</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>}</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span> </div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#a9082c498139da6a519107e4c1138ff95">MliTensorAttachBuffer&lt;int32_t&gt;</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_tf_lite_eval_tensor.html">TfLiteEvalTensor</a>* tfT,</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                                           <span class="keyword">const</span> MliTensorInterface* mliT) {</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  <span class="comment">// &quot;const_cast&quot; here used to attach const data buffer to the initially</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  <span class="comment">// non-const mli_tensor. This is required by current implementation of MLI</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  <span class="comment">// backend and planned for redesign due to this and some other aspects.</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  mliT-&gt;SetData&lt;int32_t&gt;(</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>      <span class="keyword">const_cast&lt;</span>int32_t*<span class="keyword">&gt;</span>(<a class="code hl_function" href="namespacetflite_1_1micro.html#a0e66bf95a19a5f5522df24cc23afc68f">tflite::micro::GetTensorData&lt;int32_t&gt;</a>(tfT)),</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>      *mliT-&gt;DataCapacity());</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>}</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span> </div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#a8e001c152a65812e9946f04acff4e8d4">ConvertToMliTensor</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* tfT,</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>                               MliTensorInterface* mliT) {</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#ad3445cf3ec51447164e596ab9592103a">ConvertToMliTensorData</a>(tfT, mliT, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>  <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#acc9bb99724724839f127eef50f447218">ConvertToMliQuantParams</a>(tfT, mliT);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>}</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#a0d444b338c9de1ad5ad0a7b9356bfae9">ConvertToMliTensorPerChannel</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* tfT,</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>                                         MliTensorInterface* mliT,</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>                                         <span class="keywordtype">bool</span> is_bias_tensor) {</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>  <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#ad3445cf3ec51447164e596ab9592103a">ConvertToMliTensorData</a>(tfT, mliT, is_bias_tensor);</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#a45ea380e22bb7ace8e209945f28bd6ec">ConvertToMliQuantParamsPerChannel</a>(tfT, mliT, is_bias_tensor);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>}</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#a09b969857ea67e31f8fe0b4543fddc5a">PrepareLocalTensor</a>(mli_tensor* <a class="code hl_namespace" href="namespacetensor.html">tensor</a>, mli_tensor* tensor_local) {</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span><span class="preprocessor">#ifdef MLI_2_0</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>  int8_t* local_data = tensor_local-&gt;data.mem.pi8;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  *tensor_local = *<a class="code hl_namespace" href="namespacetensor.html">tensor</a>;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  tensor_local-&gt;data.mem.pi8 = local_data;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>  int8_t* local_data = <span class="keyword">static_cast&lt;</span>int8_t*<span class="keyword">&gt;</span>(tensor_local-&gt;data);</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  *tensor_local = *<a class="code hl_namespace" href="namespacetensor.html">tensor</a>;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>  tensor_local-&gt;data = local_data;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>}</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1ops_1_1micro.html#aa76bc1398d0979344a8e13cd95d28b1d">AdjustBiasTensor</a>(MliTensorInterface* bias, MliTensorInterface* in,</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>                             MliTensorInterface* weights) {</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  int32_t quantized_dimension = *bias-&gt;Dim();</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a> =</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>      quantized_dimension &lt; 0 ? 1 : bias-&gt;Shape()[quantized_dimension];</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a>; i++) {</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    int32_t adjusted_bias_scale =</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        (*in-&gt;Scale&lt;int16_t*&gt;()) * (*weights-&gt;Scale&lt;int16_t**&gt;())[i];</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <span class="keywordtype">int</span> in_shift = *in-&gt;ScaleFracBits&lt;int8_t*&gt;();</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="keywordtype">int</span> w_shift = (*weights-&gt;ScaleFracBits&lt;int8_t**&gt;())[i];</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keywordtype">int</span> b_shift = (*bias-&gt;ScaleFracBits&lt;int8_t**&gt;())[i];</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordtype">int</span> bias_shift = in_shift + w_shift - b_shift;</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    (*bias-&gt;Scale&lt;int16_t**&gt;())[i] =</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        (int16_t)(adjusted_bias_scale &gt;&gt; bias_shift);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>}</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span><span class="preprocessor">#ifdef MLI_2_0_KRNL_TEST</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span><span class="comment">// Reorder an array according to given indexes. If backward is true, order of</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span><span class="comment">// index array must be reversed.</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span><span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">void</span> reorder(uint32_t* arr, <span class="keyword">const</span> uint8_t index[],</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>                           <span class="keywordtype">bool</span> backward) {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  uint32_t <a class="code hl_function" href="nicla__sense__fusion_8ino.html#ae6219c1117781a1dbbb7839946bca32c">temp</a>[MLI_MAX_RANK];</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  <span class="keywordflow">for</span> (int8_t i = 0; i &lt; MLI_MAX_RANK; i++) {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="keywordflow">if</span> (backward)</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>      <a class="code hl_function" href="nicla__sense__fusion_8ino.html#ae6219c1117781a1dbbb7839946bca32c">temp</a>[<a class="code hl_variable" href="namespace_arduino_tinyml_workshop.html#a230c8eac09a3338f6adcc073d97bc4a1">index</a>[i]] = arr[i];</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>      <a class="code hl_function" href="nicla__sense__fusion_8ino.html#ae6219c1117781a1dbbb7839946bca32c">temp</a>[i] = arr[<a class="code hl_variable" href="namespace_arduino_tinyml_workshop.html#a230c8eac09a3338f6adcc073d97bc4a1">index</a>[i]];</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>  }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  <span class="keywordflow">for</span> (int8_t i = 0; i &lt; MLI_MAX_RANK; i++) {</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    arr[i] = <a class="code hl_function" href="nicla__sense__fusion_8ino.html#ae6219c1117781a1dbbb7839946bca32c">temp</a>[i];</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  }</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>}</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span><span class="comment">// Change shape of mli tensor and recalculate mem strides.</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span><span class="keyword">inline</span> <span class="keywordtype">void</span> change_shape(mli_tensor* mliT, <span class="keyword">const</span> uint8_t dim_order[]) {</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  reorder(mliT-&gt;shape, dim_order, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  <span class="comment">// Calculate strides for new layout</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  <span class="keywordtype">int</span> mli_tensor_memstride = 1;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> shape_idx = mliT-&gt;rank - 1; shape_idx &gt;= 0; --shape_idx) {</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    mliT-&gt;mem_stride[shape_idx] = mli_tensor_memstride;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    mli_tensor_memstride *= mliT-&gt;shape[shape_idx];</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  }</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>}</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span> </div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span><span class="keyword">inline</span> <span class="keywordtype">void</span> permute_weights(<span class="keyword">const</span> mli_tensor* weights_src,</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                            <span class="keyword">const</span> mli_permute_cfg* permute_cfg,</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                            mli_tensor* weights_dst,</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>                            mli_data_container* buffer_data) {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  mli_tensor <a class="code hl_variable" href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a> = {};</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>  <a class="code hl_variable" href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a>.el_params = weights_dst-&gt;el_params;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  <a class="code hl_variable" href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a>.data = *buffer_data;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  <span class="comment">// Compare weights tensor size and avaliable buffer capacity.</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="stacker_8cc.html#a799a743b3abd553a37fc01ad3097df08">buffer_size</a> = buffer_data-&gt;capacity;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>  <span class="keywordtype">int</span> weights_size = mli_hlp_count_elem_num(weights_src, 0) *</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>                     mli_hlp_tensor_element_size(weights_src);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span> </div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  <span class="comment">// Need to change shape of distanation weights buffer according to permute</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <span class="comment">// dimensions order to calculate slice sizes</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  change_shape(weights_dst, permute_cfg-&gt;perm_dim);</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span> </div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="stacker_8cc.html#a799a743b3abd553a37fc01ad3097df08">buffer_size</a> &gt;= weights_size) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>    mli_mov_cfg_t copy_config;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    mli_mov_cfg_for_copy(&amp;copy_config);</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>    mli_mov_tensor_sync(weights_src, &amp;copy_config, &amp;<a class="code hl_variable" href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a>);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>    mli_krn_permute_sa8(&amp;<a class="code hl_variable" href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a>, permute_cfg, weights_dst);</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="comment">// Weights shape is NHWC and output (buffer) shape is HWC where N_w = C_o.</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <span class="comment">// Buffer size (H_o * W_o) must be more or equal then the weights size (H_w</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    <span class="comment">// * W_w * C_w). So, this is the reason, why buffer size (output tensor) is</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>    <span class="comment">// divided by channel shape.</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    uint32_t slice_size = <a class="code hl_variable" href="stacker_8cc.html#a799a743b3abd553a37fc01ad3097df08">buffer_size</a> / weights_src-&gt;shape[<a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_2mida7bb510aa51b58806c263868b8d78de.html#ac7b3bc07ef263d2f12d88fc3e87dd0d2">KRNL_C_DIM_NHWC</a>];</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    mli_mov_cfg_t copy_config = {};</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    uint32_t src_offsets[] = {0, 0, 0, 0};</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>    uint32_t src_sizes[] = {0, 0, 0, 0};</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <span class="keywordtype">int</span> dst_mem_stride[] = {0, 0, 0, 0};</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>    mli_tensor weights_dst_sub_tensor;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    mli_sub_tensor_cfg sub_tensor_cfg = {};</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>    sub_tensor_cfg.sub_tensor_rank = weights_src-&gt;rank;</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span> </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="comment">// Calculate dimensions for slice accroding to buffer capacity.</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <span class="comment">// Now, after calling change_shape() function, dst weights buffer has the</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="comment">// MLI layout (HWCN). This means, the innermost dimension (N) of dst weights</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>    <span class="comment">// tensor is equal to the innermost dimension of output tensor (N).</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    sub_tensor_cfg.size[weights_dst-&gt;rank - 1] =</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        src_sizes[weights_dst-&gt;rank - 1] = weights_src-&gt;shape[<a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_2mida7bb510aa51b58806c263868b8d78de.html#ac7b3bc07ef263d2f12d88fc3e87dd0d2">KRNL_C_DIM_NHWC</a>];</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="comment">// Now need to calculate other shapes for weights slice. Total slice size is</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="comment">// H*W*C*N, so to calculate sizes for each axis, avaliable slice size is</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <span class="comment">// divided by shape for each axis.</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    uint32_t slice_size_left = slice_size;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; weights_dst-&gt;rank - 1; i++) {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>      sub_tensor_cfg.size[i] = src_sizes[i] =</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>          slice_size_left / weights_dst-&gt;shape[i] &gt; 0 ? weights_dst-&gt;shape[i]</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                                                      : slice_size_left;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>      slice_size_left /= weights_dst-&gt;shape[i];</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>      slice_size_left = slice_size_left &gt; 0 ? slice_size_left : 1;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    }</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    <span class="comment">// Need to reorder src tensor sizes because it is still in TFLM format</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="comment">// (NHWC) and src_sizes array calculated as (HWCN).</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    reorder(src_sizes, permute_cfg-&gt;perm_dim, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    sub_tensor_cfg.offset[KRNL_C_DIM_HWCN] = src_offsets[KRNL_H_DIM_HWCN] = 0;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    sub_tensor_cfg.offset[KRNL_H_DIM_HWCN] = src_offsets[KRNL_W_DIM_HWCN] = 0;</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    sub_tensor_cfg.offset[KRNL_W_DIM_HWCN] = src_offsets[KRNL_D_DIM_HWCN] = 0;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    sub_tensor_cfg.offset[KRNL_D_DIM_HWCN] = src_offsets[KRNL_C_DIM_HWCN] = 0;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>      <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>          <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>            mli_mov_cfg_for_slice(&amp;copy_config, (<span class="keywordtype">int</span>*)src_offsets,</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>                                  (<span class="keywordtype">int</span>*)src_sizes, dst_mem_stride);</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            mli_mov_tensor_sync(weights_src, &amp;copy_config, &amp;<a class="code hl_variable" href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a>);</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            mli_hlp_create_subtensor(weights_dst, &amp;sub_tensor_cfg,</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>                                     &amp;weights_dst_sub_tensor);</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>            mli_krn_permute_sa8(&amp;<a class="code hl_variable" href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a>, permute_cfg, &amp;weights_dst_sub_tensor);</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span> </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            <span class="comment">// For each axis, it is necessary to recalculate the offsets and</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>            <span class="comment">// slice sizes.</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>            sub_tensor_cfg.offset[2] = src_offsets[3] += src_sizes[3];</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>            src_sizes[3] =</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>                std::min(src_sizes[3], weights_src-&gt;shape[3] - src_offsets[3]);</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>          } <span class="keywordflow">while</span> (src_offsets[3] &lt; weights_src-&gt;shape[3]);</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span> </div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>          sub_tensor_cfg.offset[1] = src_offsets[2] += src_sizes[2];</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>          src_sizes[2] =</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>              std::min(src_sizes[2], weights_src-&gt;shape[2] - src_offsets[2]);</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        } <span class="keywordflow">while</span> (src_offsets[2] &lt; weights_src-&gt;shape[2]);</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        sub_tensor_cfg.offset[0] = src_offsets[1] += src_sizes[1];</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        src_sizes[1] =</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>            std::min(src_sizes[1], weights_src-&gt;shape[1] - src_offsets[1]);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>      } <span class="keywordflow">while</span> (src_offsets[1] &lt; weights_src-&gt;shape[1]);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span> </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>      sub_tensor_cfg.offset[3] = src_offsets[0] += src_sizes[0];</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>      src_sizes[0] =</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>          std::min(src_sizes[0], weights_src-&gt;shape[0] - src_offsets[0]);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    } <span class="keywordflow">while</span> (src_offsets[0] &lt; weights_src-&gt;shape[0]);</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  }</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>}</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>}  <span class="comment">// namespace micro</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>}  <span class="comment">// namespace ops</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>}  <span class="comment">// namespace tflite</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span><span class="preprocessor">#endif  </span><span class="comment">// TENSORFLOW_LITE_MICRO_KERNELS_ARC_MLI_TF_UTILS_H_</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span><span class="preprocessor">#endif </span><span class="comment">// EI_CLASSIFIER_TFLITE_ENABLE_ARC == 1</span></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src42c086e4473e7d05e4bf9eb4ee8591b1_html_a4bcc2836b3aadc325710951434580109"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src42c086e4473e7d05e4bf9eb4ee8591b1.html#a4bcc2836b3aadc325710951434580109">TFLITE_ABORT</a></div><div class="ttdeci">#define TFLITE_ABORT</div><div class="ttdef"><b>Definition</b> op_macros.h:22</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73_html_a21ca1982910062a76721e3b80fd4275e"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a21ca1982910062a76721e3b80fd4275e">TFLITE_DCHECK_NE</a></div><div class="ttdeci">#define TFLITE_DCHECK_NE(x, y)</div><div class="ttdef"><b>Definition</b> compatibility.h:31</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8_html_a8a47ba81bdef28b5c479ee7928a7d123a3be7bb6b2164f8d28936ed3c3649182a"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#a8a47ba81bdef28b5c479ee7928a7d123a3be7bb6b2164f8d28936ed3c3649182a">kTfLiteInt32</a></div><div class="ttdeci">@ kTfLiteInt32</div><div class="ttdef"><b>Definition</b> c_api_types.h:99</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8_html_a8a47ba81bdef28b5c479ee7928a7d123aa5aabb7d65c4d50cda0658c6ecb4851c"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#a8a47ba81bdef28b5c479ee7928a7d123aa5aabb7d65c4d50cda0658c6ecb4851c">kTfLiteInt8</a></div><div class="ttdeci">@ kTfLiteInt8</div><div class="ttdef"><b>Definition</b> c_api_types.h:106</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_2mida7bb510aa51b58806c263868b8d78de_html_ac7b3bc07ef263d2f12d88fc3e87dd0d2"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_2mida7bb510aa51b58806c263868b8d78de.html#ac7b3bc07ef263d2f12d88fc3e87dd0d2">KRNL_C_DIM_NHWC</a></div><div class="ttdeci">#define KRNL_C_DIM_NHWC</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:26</div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2common_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2common_8h.html">common.h</a></div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2tensor__ctypes_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2tensor__ctypes_8h.html">tensor_ctypes.h</a></div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2kernels_2kernel__util_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2kernels_2kernel__util_8h.html">kernel_util.h</a></div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2kernels_2mli__interface_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2kernels_2mli__interface_8h.html">mli_interface.h</a></div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2micro__log_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2micro__log_8h.html">micro_log.h</a></div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2micro__log_8h_html_ab9bf491b4a37b06ba732fd7de6b04cb2"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2micro_2micro__log_8h.html#ab9bf491b4a37b06ba732fd7de6b04cb2">MicroPrintf</a></div><div class="ttdeci">#define MicroPrintf(...)</div><div class="ttdef"><b>Definition</b> micro_log.h:36</div></div>
<div class="ttc" id="abatch__matmul__test_8cc_html_a26c07acd3fa6a6da13ddae2bc5c64b55"><div class="ttname"><a href="batch__matmul__test_8cc.html#a26c07acd3fa6a6da13ddae2bc5c64b55">zero_point</a></div><div class="ttdeci">int zero_point</div><div class="ttdef"><b>Definition</b> batch_matmul_test.cc:45</div></div>
<div class="ttc" id="aclasstflite_1_1_runtime_shape_html_a2039ed030a02c05b73a0ea723339a808"><div class="ttname"><a href="classtflite_1_1_runtime_shape.html#a2039ed030a02c05b73a0ea723339a808">tflite::RuntimeShape::Dims</a></div><div class="ttdeci">int32_t Dims(int i) const</div><div class="ttdef"><b>Definition</b> runtime_shape.h:59</div></div>
<div class="ttc" id="aclasstflite_1_1_runtime_shape_html_a9de8e21fa79a2a74e69578f0240f4ebe"><div class="ttname"><a href="classtflite_1_1_runtime_shape.html#a9de8e21fa79a2a74e69578f0240f4ebe">tflite::RuntimeShape::DimensionsCount</a></div><div class="ttdeci">int32_t DimensionsCount() const</div><div class="ttdef"><b>Definition</b> runtime_shape.h:58</div></div>
<div class="ttc" id="aei__classifier__config_8h_html"><div class="ttname"><a href="ei__classifier__config_8h.html">ei_classifier_config.h</a></div></div>
<div class="ttc" id="anamespace_arduino_tinyml_workshop_html_a230c8eac09a3338f6adcc073d97bc4a1"><div class="ttname"><a href="namespace_arduino_tinyml_workshop.html#a230c8eac09a3338f6adcc073d97bc4a1">ArduinoTinymlWorkshop.index</a></div><div class="ttdeci">index</div><div class="ttdef"><b>Definition</b> ArduinoTinymlWorkshop.py:47</div></div>
<div class="ttc" id="anamespacetensor_html"><div class="ttname"><a href="namespacetensor.html">tensor</a></div><div class="ttdef"><b>Definition</b> tensor.py:1</div></div>
<div class="ttc" id="anamespacetflite_1_1micro_html_a0e66bf95a19a5f5522df24cc23afc68f"><div class="ttname"><a href="namespacetflite_1_1micro.html#a0e66bf95a19a5f5522df24cc23afc68f">tflite::micro::GetTensorData</a></div><div class="ttdeci">T * GetTensorData(TfLiteEvalTensor *tensor)</div><div class="ttdef"><b>Definition</b> kernel_util.h:64</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_a09b969857ea67e31f8fe0b4543fddc5a"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#a09b969857ea67e31f8fe0b4543fddc5a">tflite::ops::micro::PrepareLocalTensor</a></div><div class="ttdeci">void PrepareLocalTensor(mli_tensor *tensor, mli_tensor *tensor_local)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:149</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_a0d444b338c9de1ad5ad0a7b9356bfae9"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#a0d444b338c9de1ad5ad0a7b9356bfae9">tflite::ops::micro::ConvertToMliTensorPerChannel</a></div><div class="ttdeci">void ConvertToMliTensorPerChannel(const TfLiteTensor *tfT, MliTensorInterface *mliT, bool is_bias_tensor)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:142</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_a10e348a9b3aab2a3396f63b63e308e9a"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#a10e348a9b3aab2a3396f63b63e308e9a">tflite::ops::micro::MliTensorAttachBuffer&lt; int8_t &gt;</a></div><div class="ttdeci">void MliTensorAttachBuffer&lt; int8_t &gt;(const TfLiteEvalTensor *tfT, const MliTensorInterface *mliT)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:115</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_a45ea380e22bb7ace8e209945f28bd6ec"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#a45ea380e22bb7ace8e209945f28bd6ec">tflite::ops::micro::ConvertToMliQuantParamsPerChannel</a></div><div class="ttdeci">void ConvertToMliQuantParamsPerChannel(const TfLiteTensor *tfT, MliTensorInterface *mliT, bool is_bias_tensor)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:72</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_a76406fe47978c773a72df74146718223"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#a76406fe47978c773a72df74146718223">tflite::ops::micro::MliTensorAttachBuffer</a></div><div class="ttdeci">void MliTensorAttachBuffer(const TfLiteEvalTensor *, const MliTensorInterface *)</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_a8e001c152a65812e9946f04acff4e8d4"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#a8e001c152a65812e9946f04acff4e8d4">tflite::ops::micro::ConvertToMliTensor</a></div><div class="ttdeci">void ConvertToMliTensor(const TfLiteTensor *tfT, MliTensorInterface *mliT)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:136</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_a9082c498139da6a519107e4c1138ff95"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#a9082c498139da6a519107e4c1138ff95">tflite::ops::micro::MliTensorAttachBuffer&lt; int32_t &gt;</a></div><div class="ttdeci">void MliTensorAttachBuffer&lt; int32_t &gt;(const TfLiteEvalTensor *tfT, const MliTensorInterface *mliT)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:126</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_aa76bc1398d0979344a8e13cd95d28b1d"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#aa76bc1398d0979344a8e13cd95d28b1d">tflite::ops::micro::AdjustBiasTensor</a></div><div class="ttdeci">void AdjustBiasTensor(MliTensorInterface *bias, MliTensorInterface *in, MliTensorInterface *weights)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:161</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_acc9bb99724724839f127eef50f447218"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#acc9bb99724724839f127eef50f447218">tflite::ops::micro::ConvertToMliQuantParams</a></div><div class="ttdeci">void ConvertToMliQuantParams(const TfLiteTensor *tfT, MliTensorInterface *mliT)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:61</div></div>
<div class="ttc" id="anamespacetflite_1_1ops_1_1micro_html_ad3445cf3ec51447164e596ab9592103a"><div class="ttname"><a href="namespacetflite_1_1ops_1_1micro.html#ad3445cf3ec51447164e596ab9592103a">tflite::ops::micro::ConvertToMliTensorData</a></div><div class="ttdeci">void ConvertToMliTensorData(const TfLiteTensor *tfT, MliTensorInterface *mliT, bool is_bias_tensor)</div><div class="ttdef"><b>Definition</b> mli_tf_utils.h:32</div></div>
<div class="ttc" id="anamespacetflite_html"><div class="ttname"><a href="namespacetflite.html">tflite</a></div><div class="ttdef"><b>Definition</b> context_util.h:26</div></div>
<div class="ttc" id="anamespacetflite_html_a575226cacf2453458286f00dd4bed1b3"><div class="ttname"><a href="namespacetflite.html#a575226cacf2453458286f00dd4bed1b3">tflite::GetTensorShape</a></div><div class="ttdeci">RuntimeShape GetTensorShape(std::vector&lt; int32_t &gt; data)</div><div class="ttdef"><b>Definition</b> portable_tensor.h:26</div></div>
<div class="ttc" id="anano__ble33__sense__accelerometer__continuous_8ino_html_a221f01f29c6cba77d9479aba615283f5"><div class="ttname"><a href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a></div><div class="ttdeci">static float buffer[EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE]</div><div class="ttdef"><b>Definition</b> nano_ble33_sense_accelerometer_continuous.ino:51</div></div>
<div class="ttc" id="anicla__sense__fusion_8ino_html_ae6219c1117781a1dbbb7839946bca32c"><div class="ttname"><a href="nicla__sense__fusion_8ino.html#ae6219c1117781a1dbbb7839946bca32c">temp</a></div><div class="ttdeci">Sensor temp(SENSOR_ID_TEMP)</div></div>
<div class="ttc" id="astacker_8cc_html_a345cae2db28059ee72015d7c6acc9dd5"><div class="ttname"><a href="stacker_8cc.html#a345cae2db28059ee72015d7c6acc9dd5">num_channels</a></div><div class="ttdeci">int32_t num_channels</div><div class="ttdef"><b>Definition</b> stacker.cc:42</div></div>
<div class="ttc" id="astacker_8cc_html_a799a743b3abd553a37fc01ad3097df08"><div class="ttname"><a href="stacker_8cc.html#a799a743b3abd553a37fc01ad3097df08">buffer_size</a></div><div class="ttdeci">size_t buffer_size</div><div class="ttdef"><b>Definition</b> stacker.cc:47</div></div>
<div class="ttc" id="astruct_tf_lite_affine_quantization_html"><div class="ttname"><a href="struct_tf_lite_affine_quantization.html">TfLiteAffineQuantization</a></div><div class="ttdef"><b>Definition</b> common.h:305</div></div>
<div class="ttc" id="astruct_tf_lite_affine_quantization_html_ab59ebe2c790ca6067e9792f2c7eb3a19"><div class="ttname"><a href="struct_tf_lite_affine_quantization.html#ab59ebe2c790ca6067e9792f2c7eb3a19">TfLiteAffineQuantization::quantized_dimension</a></div><div class="ttdeci">int32_t quantized_dimension</div><div class="ttdef"><b>Definition</b> common.h:308</div></div>
<div class="ttc" id="astruct_tf_lite_eval_tensor_html"><div class="ttname"><a href="struct_tf_lite_eval_tensor.html">TfLiteEvalTensor</a></div><div class="ttdef"><b>Definition</b> common.h:607</div></div>
<div class="ttc" id="astruct_tf_lite_quantization_html_ad9fa8b753fc13a8328697b7538ad8580"><div class="ttname"><a href="struct_tf_lite_quantization.html#ad9fa8b753fc13a8328697b7538ad8580">TfLiteQuantization::params</a></div><div class="ttdeci">void * params</div><div class="ttdef"><b>Definition</b> common.h:295</div></div>
<div class="ttc" id="astruct_tf_lite_quantization_params_html_a7bfb85a682ab431a6c0c609d3938ab6e"><div class="ttname"><a href="struct_tf_lite_quantization_params.html#a7bfb85a682ab431a6c0c609d3938ab6e">TfLiteQuantizationParams::zero_point</a></div><div class="ttdeci">int32_t zero_point</div><div class="ttdef"><b>Definition</b> c_api_types.h:126</div></div>
<div class="ttc" id="astruct_tf_lite_quantization_params_html_aedc85f69317ce1c27e6e88f886ea8af8"><div class="ttname"><a href="struct_tf_lite_quantization_params.html#aedc85f69317ce1c27e6e88f886ea8af8">TfLiteQuantizationParams::scale</a></div><div class="ttdeci">float scale</div><div class="ttdef"><b>Definition</b> c_api_types.h:125</div></div>
<div class="ttc" id="astruct_tf_lite_tensor_html"><div class="ttname"><a href="struct_tf_lite_tensor.html">TfLiteTensor</a></div><div class="ttdef"><b>Definition</b> common.h:411</div></div>
<div class="ttc" id="astruct_tf_lite_tensor_html_a24d579d439274a598ce79f0ec6bf6f50"><div class="ttname"><a href="struct_tf_lite_tensor.html#a24d579d439274a598ce79f0ec6bf6f50">TfLiteTensor::type</a></div><div class="ttdeci">TfLiteType type</div><div class="ttdef"><b>Definition</b> common.h:414</div></div>
<div class="ttc" id="astruct_tf_lite_tensor_html_a65082739eecbd6d52d7d339d43b87606"><div class="ttname"><a href="struct_tf_lite_tensor.html#a65082739eecbd6d52d7d339d43b87606">TfLiteTensor::bytes</a></div><div class="ttdeci">size_t bytes</div><div class="ttdef"><b>Definition</b> common.h:434</div></div>
<div class="ttc" id="astruct_tf_lite_tensor_html_aa4efa609d9ad9c78c5f53a592020de9e"><div class="ttname"><a href="struct_tf_lite_tensor.html#aa4efa609d9ad9c78c5f53a592020de9e">TfLiteTensor::quantization</a></div><div class="ttdeci">TfLiteQuantization quantization</div><div class="ttdoc">Quantization information. Replaces params field above.</div><div class="ttdef"><b>Definition</b> common.h:462</div></div>
<div class="ttc" id="astruct_tf_lite_tensor_html_ad0fbad4e97f0be0a6e4bfa1b2be0e3fe"><div class="ttname"><a href="struct_tf_lite_tensor.html#ad0fbad4e97f0be0a6e4bfa1b2be0e3fe">TfLiteTensor::params</a></div><div class="ttdeci">TfLiteQuantizationParams params</div><div class="ttdoc">Quantization information.</div><div class="ttdef"><b>Definition</b> common.h:423</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
