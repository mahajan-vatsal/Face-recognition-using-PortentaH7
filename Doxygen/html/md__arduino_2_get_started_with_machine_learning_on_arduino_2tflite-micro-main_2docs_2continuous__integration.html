<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Machine Vision using Portenta H7: Continuous Integration Docs Contents</title>
<link rel="icon" href="logo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Machine Vision using Portenta H7<span id="projectnumber">&#160;2</span>
   </div>
   <div id="projectbrief">This project aims to develop a face recognition-based access control system using the Arduino Portenta H7 and Vision Shield, leveraging Edge Impulse for machine learning. The system captures facial images, processes them locally using an AI model deployed on the Portenta H7 and determines access based on authorised personnel.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Continuous Integration Docs Contents</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md101"></a></p>
<ul>
<li>User Facing CI<ul>
<li>`ci:run` - Run Tests</li>
<li>`ci:ready_to_merge` - Send To Merge Queue</li>
</ul>
</li>
<li>Manually Running Tests</li>
<li>Sync From Tensorflow Repository</li>
<li>Merge Queue Details</li>
</ul>
<h1><a class="anchor" id="autotoc_md102"></a>
User Facing CI</h1>
<p>The continuous integration system is controlled by applying labels to PRs. There are only two important labels: <code>ci:run</code> runs the testing suite, and <code>ci:ready_to_merge</code> places a PR in the merge queue. </p>
<h2><a class="anchor" id="autotoc_md103"></a>
<code>ci:run</code></h2>
<p>The <code>ci:run</code> label runs the <a href="../.github/workflows/ci.yml">main testing suite</a> against the PR. For details of the tests involved, examine the linked file. The <code>ci:run</code> tag is self-removing. </p>
<h2><a class="anchor" id="autotoc_md104"></a>
<code>ci:ready_to_merge</code></h2>
<p>After all tests from <code>ci:run</code> have passed, the Google CLA has been agreed to, and a reviewer has approved the PR, applying the <code>ci:ready_to_merge</code> label will enter the PR into the merge queue. Unless there is a conflict with other PR's in the queue, this should be a fire and forget operation. In the case of a conflict due to code that is merged before a given PR, you will need to troubleshoot your code manually. </p>
<h1><a class="anchor" id="autotoc_md105"></a>
Manually Running Tests</h1>
<p>Tests can also be run manually on the command line within a docker container, which can be built with: </p><div class="fragment"><div class="line">docker build -t tflm-ci -f ci/Dockerfile.micro .</div>
</div><!-- fragment --><p>or use the tflm-ci docker image from <a href="https://github.com/users/TFLM-bot/packages/container/package/tflm-ci">here</a>.</p>
<p>You will still need to copy or mount your fork of tflite-micro on to this docker container prior to running any tests. To run the built Docker image interactively and mount your local copy of tflite-micro on the container, run: </p><div class="fragment"><div class="line">docker run -v /path/to/local/tflite-micro:/path/to/docker/tflite-micro -it tflm-ci /bin/bash</div>
</div><!-- fragment --><p> This way changes from your local fork will be reflected in the Docker container.</p>
<p>You can also view or remove your instantiated containers by doing: </p><div class="fragment"><div class="line">docker ps --all</div>
<div class="line">docker rm &lt;docker image ID&gt;</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md106"></a>
Sync From The Tensorflow Repository</h1>
<p>While TfLite Micro and TfLite are in separate GitHub repositories, the two projects continue to share common code.</p>
<p>The <a href="https://github.com/tensorflow/tensorflow">TensorFlow repo</a> is the single source of truth for this shared code. As a result, any changes to this shared code must be made in the <a href="https://github.com/tensorflow/tensorflow">TensorFlow repo</a> which will then automatically sync'd via a scheduled <a href="../.github/workflows/sync.yml">GitHub workflow</a>. </p>
<h1><a class="anchor" id="autotoc_md107"></a>
Merge Queue Details</h1>
<p>This section is probably only of interest if you plan to be doing surgery on the CI system. </p>
<h2><a class="anchor" id="autotoc_md108"></a>
Mergify</h2>
<p>We use <a href="https://mergify.com/">Mergify</a> for our merge queue. <a href="https://docs.mergify.com/">The documentation</a> is reasonably straight forward. </p>
<h2><a class="anchor" id="autotoc_md109"></a>
Config File</h2>
<p>Our <a href="../.github/mergify.yml">mergify.yml</a> is fairly standard. It triggers on <code>ci:ready_to_merge</code> label and requires all branch protection checks to pass before a PR can be added to the queue. When the PR is merged it removes the label. </p>
<h2><a class="anchor" id="autotoc_md110"></a>
<code>ci:run</code> In Queue</h2>
<p>The one slightly complicated wrinkle in our system is the test suite being run only when the <code>ci:run</code> label is applied. As soon as the tests are run, the label is <a href="../.github/workflows/remove-labels.yml">removed</a>.</p>
<p>As the queue processes each PR, it creates a temporary branch and merges in the results of the previous passing PRs my merging main. This merge resets all the test results, so the <code>ci:run</code> tag must be <a href="../.github/workflows/apply_cirun.yml">reapplied</a> in queue. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
