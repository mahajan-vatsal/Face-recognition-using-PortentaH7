<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Machine Vision using Portenta H7: Arduino/GetStartedWithMachineLearningOnArduino/tflite-micro-main/tensorflow/lite/micro/micro_allocator.h Source File</title>
<link rel="icon" href="logo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Machine Vision using Portenta H7<span id="projectnumber">&#160;2</span>
   </div>
   <div id="projectbrief">This project aims to develop a face recognition-based access control system using the Arduino Portenta H7 and Vision Shield, leveraging Edge Impulse for machine learning. The system captures facial images, processes them locally using an AI model deployed on the Portenta H7 and determines access based on authorised personnel.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a991eec27578c865874ede3d8ec657c2.html">Arduino</a></li><li class="navelem"><a class="el" href="dir_5b434fadadbc73afff09af364c4592fa.html">GetStartedWithMachineLearningOnArduino</a></li><li class="navelem"><a class="el" href="dir_37328d0195f4d1497edc6914cc71a1c6.html">tflite-micro-main</a></li><li class="navelem"><a class="el" href="dir_e5bdcbd8b9c0fefb7a2e0f3ea674e16e.html">tensorflow</a></li><li class="navelem"><a class="el" href="dir_503634df472a76a989a31bcd8d94bcd0.html">lite</a></li><li class="navelem"><a class="el" href="dir_b8cffeb19aff853b8801b5d330607df8.html">micro</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">micro_allocator.h</div></div>
</div><!--header-->
<div class="contents">
<a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_2micro_2micro__allocator_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/* Copyright 2023 The TensorFlow Authors. All Rights Reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"></span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">you may not use this file except in compliance with the License.</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"></span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"></span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">See the License for the specific language governing permissions and</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">limitations under the License.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">==============================================================================*/</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#ifndef TENSORFLOW_LITE_MICRO_MICRO_ALLOCATOR_H_</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#define TENSORFLOW_LITE_MICRO_MICRO_ALLOCATOR_H_</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &lt;cstdint&gt;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;tensorflow/lite/micro/arena_allocator/single_arena_buffer_allocator.h&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;tensorflow/lite/micro/compatibility.h&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;tensorflow/lite/micro/flatbuffer_utils.h&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;tensorflow/lite/micro/memory_planner/micro_memory_planner.h&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="micro__common_8h.html">tensorflow/lite/micro/micro_common.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;tensorflow/lite/micro/tflite_bridge/flatbuffer_conversions_bridge.h&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;tensorflow/lite/schema/schema_generated.h&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacetflite.html">tflite</a> {</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="comment">// TODO(b/199402574): rename to tflite_internal or just remove internal</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="comment">// namespace.</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="keyword">namespace </span>internal {</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="comment">// Sets up all of the data structure members for a TfLiteTensor based on the</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="comment">// contents of a serialized tensor in the flatbuffer.</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment">// TODO(b/162311891): Drop this method when the interpreter has an API for</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="comment">// returning buffers on TfLiteEvalTensor.</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="namespacetflite_1_1internal.html#abb4052f3f3605a78a6d109c228475f90">InitializeTfLiteTensorFromFlatbuffer</a>(</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    IPersistentBufferAllocator* persistent_buffer_allocator,</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    INonPersistentBufferAllocator* non_persistent_buffer_allocator,</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    <span class="keywordtype">bool</span> allocate_temp, <span class="keyword">const</span> tflite::Tensor&amp; flatbuffer_tensor,</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="keyword">const</span> <a class="code hl_class" href="classflatbuffers_1_1_vector.html">flatbuffers::Vector</a>&lt;flatbuffers::Offset&lt;Buffer&gt;&gt;* buffers,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>);</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment">// Holds placeholder information for a scratch buffer request from a kernel.</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="comment">// This struct is only used during the model prepare stage. Each request from a</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="comment">// kernel is stored in the head section. During the prepare stage, the head</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="comment">// section will at least hold kMaxScratchBuffersPerOp number of requests plus</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="comment">// any requests from previous kernel requests.</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="comment">//</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="comment">// When the memory plan is finalized, these structs are no longer used in favor</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="comment">// of a sequential, array of ScratchBufferHandle allocations in the tail</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="comment">// section. These allocations are indexed by the request API defined in the</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="comment">// TfLiteContext struct.</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="keyword">struct </span>ScratchBufferRequest {</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>  <span class="comment">// Number of bytes required by the buffer. The actual allocated size might be</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  <span class="comment">// greater than `bytes` due to buffer alignment.</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structtflite_1_1internal_1_1_scratch_buffer_request.html#a6b3bb06d3d8a6951665de7c7d11cbabc">bytes</a>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>  <span class="comment">// Node where the buffer is allocated for. This provides useful information to</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  <span class="comment">// determine the lifetime of the buffer. In AllocationInfo, this buffer will</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>  <span class="comment">// have `before` = node_idx and `after` = node_idx.</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="structtflite_1_1internal_1_1_scratch_buffer_request.html#abff04364278f265e9968be3f372d00a7">node_idx</a>;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="structtflite_1_1internal_1_1_scratch_buffer_request.html#a2d9182d71406802899c90d663dc681a0">subgraph_idx</a>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>};</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>}  <span class="comment">// namespace internal</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="comment">// Enum used to keep track of which MemoryPlanner is being used for</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="comment">// MicroAllocater::Create();</span></div>
<div class="foldopen" id="foldopen00071" data-start="{" data-end="};">
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1">   71</a></span><span class="keyword">enum class</span> <a class="code hl_enumeration" href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1">MemoryPlannerType</a> {</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  <a class="code hl_enumvalue" href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1ac4861b96ac740cfc11a26a3c8f372b5c">kGreedy</a>,</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  <a class="code hl_enumvalue" href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1aac97f0008bcf7c7fe4f2ff94160e1385">kLinear</a>,</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>};</div>
</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="keyword">struct </span>NodeAndRegistration {</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>  <a class="code hl_struct" href="struct_tf_lite_node.html">TfLiteNode</a> <a class="code hl_variable" href="structtflite_1_1_node_and_registration.html#a04219fadd2bb40751a09a67a8ffc426a">node</a>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="structtflite_1_1_node_and_registration.html#a2b3fcf22244a2d4fa64da5805bc5dd03">   78</a></span>  <span class="keyword">const</span> <a class="code hl_struct" href="struct_t_f_l_m_registration.html">TFLMRegistration</a>* <a class="code hl_variable" href="structtflite_1_1_node_and_registration.html#a2b3fcf22244a2d4fa64da5805bc5dd03">registration</a>;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>};</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="comment">// Holds a pointer to a buffer for a scratch buffer requested by a kernel during</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="comment">// the model prepare stage. This struct is allocated in-place and allows for</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="comment">// quick pointer-indexed lookup for speed during model inference.</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="keyword">struct </span><a class="code hl_struct" href="structtflite_1_1_scratch_buffer_handle.html">ScratchBufferHandle</a> {</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <span class="comment">// Pointer to location of the scratch buffer:</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  uint8_t* <a class="code hl_variable" href="structtflite_1_1_scratch_buffer_handle.html#a55eeb5a8b0008454c3ad0a49b8dcd694">data</a>;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>};</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="comment">// Stores all per-subgraph allocations. This includes the node and registration</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="comment">// array, and tensor list for each subgraph.</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="keyword">struct </span>SubgraphAllocations {</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  NodeAndRegistration* <a class="code hl_variable" href="structtflite_1_1_subgraph_allocations.html#aa04d95458c77cc66e175bc49cb242fbc">node_and_registrations</a>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>  <a class="code hl_struct" href="struct_tf_lite_eval_tensor.html">TfLiteEvalTensor</a>* <a class="code hl_variable" href="structtflite_1_1_subgraph_allocations.html#a3464388baf2c05985e1d62ae1e3e0265">tensors</a>;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>};</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="comment">// Allocator responsible for allocating memory for all intermediate tensors</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span><span class="comment">// necessary to invoke a model.</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="comment">//</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span><span class="comment">// The lifetime of the model, tensor arena and error reporter must be at</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span><span class="comment">// least as long as that of the allocator object, since the allocator needs</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="comment">// them to be accessible during its entire lifetime.</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="comment">//</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span><span class="comment">// The MicroAllocator simply plans out additional allocations that are required</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span><span class="comment">// to standup a model for inference in TF Micro. This class currently relies on</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span><span class="comment">// an additional allocator - SingleArenaBufferAllocator - for all allocations</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span><span class="comment">// from an arena. These allocations are divided into head (non-persistent) and</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span><span class="comment">// tail (persistent) regions:</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span><span class="comment">//</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="comment">// Memory layout to help understand how it works</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span><span class="comment">// This information could change in the future version.</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span><span class="comment">// ************** .memory_allocator-&gt;GetBuffer()</span></div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span><span class="comment">// Tensors/Scratch buffers (head)</span></div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="comment">// ************** .head_watermark</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span><span class="comment">// unused memory</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span><span class="comment">// ************** .memory_allocator-&gt;GetBuffer() + -&gt;GetMaxBufferSize()</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span><span class="comment">//                                               - -&gt;GetDataSize()</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span><span class="comment">// persistent area (tail)</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="comment">// ************** .memory_allocator-&gt;GetBuffer() + -&gt;GetMaxBufferSize()</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span><span class="keyword">class </span>MicroAllocator {</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> <span class="keyword">public</span>:</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  <span class="comment">// Creates a MicroAllocator instance from a given tensor arena. This arena</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="comment">// will be managed by the created instance. The GreedyMemoryPlanner will</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  <span class="comment">// by default be used and created on the arena.</span></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  <span class="comment">// Note: Please use alignas(16) to make sure tensor_arena is 16</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>  <span class="comment">// bytes aligned, otherwise some head room will be wasted.</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>  <span class="comment">// TODO(b/157615197): Cleanup constructor + factory usage.</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>  <span class="keyword">static</span> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a18615b3ce4daf12e3d715e09600366c3">MicroAllocator</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a48bf21c87345607dcfd2b76c481b6eb5">Create</a>(</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>      uint8_t* <a class="code hl_variable" href="namespacetflite.html#ad7380db20a16cb04f096c963d9ade791">tensor_arena</a>, <span class="keywordtype">size_t</span> arena_size,</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>      <a class="code hl_enumeration" href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1">MemoryPlannerType</a> memory_planner_type = <a class="code hl_enumvalue" href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1ac4861b96ac740cfc11a26a3c8f372b5c">MemoryPlannerType::kGreedy</a>);</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  <span class="comment">// Creates a MicroAllocator instance from a given tensor arena and a given</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  <span class="comment">// MemoryPlanner. This arena will be managed by the created instance. Note:</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  <span class="comment">// Please use alignas(16) to make sure tensor_arena is 16 bytes</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  <span class="comment">// aligned, otherwise some head room will be wasted.</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a018b9d20e8d9ebd17360948e622237b7">  135</a></span>  <span class="keyword">static</span> <a class="code hl_class" href="classtflite_1_1_micro_allocator.html">MicroAllocator</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a018b9d20e8d9ebd17360948e622237b7">Create</a>(uint8_t* <a class="code hl_variable" href="namespacetflite.html#ad7380db20a16cb04f096c963d9ade791">tensor_arena</a>, <span class="keywordtype">size_t</span> arena_size,</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                                <a class="code hl_class" href="classtflite_1_1_micro_memory_planner.html">MicroMemoryPlanner</a>* memory_planner);</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>  <span class="comment">// Creates a MicroAllocator instance using the provided</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  <span class="comment">// SingleArenaBufferAllocator instance and the MemoryPlanner. This allocator</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  <span class="comment">// instance will use the SingleArenaBufferAllocator instance to manage</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  <span class="comment">// allocations internally.</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a35bcf5002a662e06502afefed8f643c6">  142</a></span>  <span class="keyword">static</span> <a class="code hl_class" href="classtflite_1_1_micro_allocator.html">MicroAllocator</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a35bcf5002a662e06502afefed8f643c6">Create</a>(<a class="code hl_class" href="classtflite_1_1_single_arena_buffer_allocator.html">SingleArenaBufferAllocator</a>* memory_allocator,</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>                                <a class="code hl_class" href="classtflite_1_1_micro_memory_planner.html">MicroMemoryPlanner</a>* memory_planner);</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>  <span class="comment">// Creates a MicroAllocator instance using the provided</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  <span class="comment">// SingleArenaBufferAllocator instance and the MemoryPlanner. This allocator</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  <span class="comment">// instance will use the SingleArenaBufferAllocator instance to manage</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>  <span class="comment">// allocations internally.</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <span class="keyword">static</span> <a class="code hl_class" href="classtflite_1_1_micro_allocator.html">MicroAllocator</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a48bf21c87345607dcfd2b76c481b6eb5">Create</a>(</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>      uint8_t* persistent_tensor_arena, <span class="keywordtype">size_t</span> persistent_arena_size,</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>      uint8_t* non_persistent_tensor_arena, <span class="keywordtype">size_t</span> non_persistent_arena_size,</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>      <a class="code hl_enumeration" href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1">MemoryPlannerType</a> memory_planner_type = <a class="code hl_enumvalue" href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1ac4861b96ac740cfc11a26a3c8f372b5c">MemoryPlannerType::kGreedy</a>);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>  <span class="comment">// Returns the fixed amount of memory overhead of MicroAllocator.</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#aec5363e9f7023f51d3b23d97e92a247f">  155</a></span>  <span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#aec5363e9f7023f51d3b23d97e92a247f">GetDefaultTailUsage</a>(<span class="keywordtype">bool</span> is_memory_planner_given);</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  <span class="comment">// Returns True if the MicroAllocator uses a LinearMemoryPlanner(is compatible</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>  <span class="comment">// with the PerserveAllTensors flag / feature ) and False otherwise.</span></div>
<div class="foldopen" id="foldopen00159" data-start="{" data-end="}">
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#af5c11b6af1817d710c16dee9ffdc90e0">  159</a></span>  <span class="keywordtype">bool</span> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#af5c11b6af1817d710c16dee9ffdc90e0">preserves_all_tensor</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#a7e8df6e9dffd618bff5154ab4f514f22">memory_planner_</a>-&gt;<a class="code hl_function" href="classtflite_1_1_micro_memory_planner.html#a9e0dd5044fce5bbf961258e6e6c1fc37">preserves_all_tensors</a>();</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>  };</div>
</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>  <span class="comment">// Allocates internal resources required for model inference for each subgraph</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <span class="comment">// from the arena.</span></div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <span class="comment">//</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  <span class="comment">// This method will run through the flatbuffer data supplied in the model to</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>  <span class="comment">// properly allocate tensor, node, and op registration data. This method is</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  <span class="comment">// expected to be followed with a call to FinishModelAllocation()  Returns a</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <span class="comment">// pointer to an array of SubgraphAllocations (also stored in the tail of the</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  <span class="comment">// arena) where each index corresponds to a different subgraph in the model.</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  <span class="comment">// Return value is nullptr if the allocations failed.</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a9377b0d649a7e61c4e5832af2fa2b51e">  172</a></span>  <a class="code hl_struct" href="structtflite_1_1_subgraph_allocations.html">SubgraphAllocations</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a9377b0d649a7e61c4e5832af2fa2b51e">StartModelAllocation</a>(<span class="keyword">const</span> Model* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a>);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>  <span class="comment">// Finish allocating internal resources required for model inference.</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  <span class="comment">//</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>  <span class="comment">// -Plan the memory for activation tensors and scratch buffers.</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>  <span class="comment">// -Update eval tensors for each subgraph based on planned offsets.</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  <span class="comment">// -Allocate scratch buffer handles array and update based on planned offsets.</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <span class="comment">//</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  <span class="comment">// This method should be called after assigning model resources</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  <span class="comment">// in StartModelAllocation(). The subgraph_allocations pointer should be the</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  <span class="comment">// value passed into this class during StartModelAllocation(). Scratch buffer</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <span class="comment">// handles are stored in the out-param `scratch_buffer_handles` array which is</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  <span class="comment">// allocated in this method. This value will be used in `GetScratchBuffer`</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  <span class="comment">// call to retrieve scratch buffers.</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#ac2f623bad24d35f85fa40642b797d90c">  186</a></span>  <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#ac2f623bad24d35f85fa40642b797d90c">FinishModelAllocation</a>(</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>      <span class="keyword">const</span> Model* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a>, <a class="code hl_struct" href="structtflite_1_1_subgraph_allocations.html">SubgraphAllocations</a>* subgraph_allocations,</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>      <a class="code hl_struct" href="structtflite_1_1_scratch_buffer_handle.html">ScratchBufferHandle</a>** scratch_buffer_handles);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  <span class="comment">// Allocates a TfLiteTensor struct and populates the returned value with</span></div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>  <span class="comment">// properties from the model flatbuffer. This struct is allocated from</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>  <span class="comment">// persistent arena memory is only guaranteed for the lifetime of the</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  <span class="comment">// application. The eval_tensors pointer should be the value passed into this</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  <span class="comment">// class during StartModelAllocation() and contains the source-of-truth for</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  <span class="comment">// buffers.</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a89720c3a9285c3dd02ed51f2c6ef563b">  196</a></span>  <span class="keyword">virtual</span> <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a89720c3a9285c3dd02ed51f2c6ef563b">AllocatePersistentTfLiteTensor</a>(</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>      <span class="keyword">const</span> Model* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structtflite_1_1_subgraph_allocations.html">SubgraphAllocations</a>* subgraph_allocations,</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>      <span class="keywordtype">int</span> tensor_index, <span class="keywordtype">int</span> subgraph_index);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>  <span class="comment">// Allocates a TfLiteTensor struct and populates the returned value with</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  <span class="comment">// properties from the model flatbuffer. This struct is allocated from</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  <span class="comment">// temporary arena memory is only guaranteed until a call is made to</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  <span class="comment">// ResetTempAllocations(). Subgraph_allocations contains the array of</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  <span class="comment">// TfLiteEvalTensors. If the newly allocated temp at the specified subgraph</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  <span class="comment">// and tensor index is already present int the TfLiteEvalTensor array, its</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  <span class="comment">// data buffer will be re-used.</span></div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#abe9037a63bc46333c997c8058698e13f">  207</a></span>  <span class="keyword">virtual</span> <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#abe9037a63bc46333c997c8058698e13f">AllocateTempTfLiteTensor</a>(</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>      <span class="keyword">const</span> Model* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structtflite_1_1_subgraph_allocations.html">SubgraphAllocations</a>* subgraph_allocations,</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>      <span class="keywordtype">int</span> tensor_index, <span class="keywordtype">int</span> subgraph_index);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a41d2f07de254dced8a9a852bd1737404">  211</a></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a41d2f07de254dced8a9a852bd1737404">DeallocateTempTfLiteTensor</a>(<a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>*);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  <span class="comment">// Returns a pointer to a buffer from the temporary arena memory and is only</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  <span class="comment">// guaranteed until a call is made to ResetTempAllocations().</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>  <span class="keyword">virtual</span> uint8_t* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a834b5db13075f03c0ac9cc37d0d7b00b">AllocateTempBuffer</a>(<span class="keywordtype">size_t</span> <a class="code hl_variable" href="hello__world__model_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a>, <span class="keywordtype">size_t</span> alignment);</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span> </div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  <span class="comment">// Signals that the temporary buffer no longer needed.</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a1cde326086409e229a547bc306970e14">DeallocateTempBuffer</a>(uint8_t* <a class="code hl_variable" href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a>);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>  <span class="comment">// Resets all temporary allocations. This method should be called after a</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  <span class="comment">// chain of temp allocations (e.g. chain of TfLiteTensor objects via</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  <span class="comment">// AllocateTfLiteTensor()).</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#af4adf7f7ad5129548550090450af6f77">  223</a></span>  <span class="keyword">virtual</span> <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#af4adf7f7ad5129548550090450af6f77">ResetTempAllocations</a>();</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <span class="comment">// Returns true if all temporary buffers including temp TfLiteTensor are</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>  <span class="comment">// already deallocated.</span></div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a33d8c6a5720e8f86862a6753362cacac">  227</a></span>  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a33d8c6a5720e8f86862a6753362cacac">IsAllTempDeallocated</a>();</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  <span class="comment">// Allocates persistent buffer which has the same life time as the allocator.</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  <span class="comment">// The memory is immediately available and is allocated from the tail of the</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  <span class="comment">// arena.</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a25c327c85634acde35c7b9ee07848cc5">  232</a></span>  <span class="keyword">virtual</span> <span class="keywordtype">void</span>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a25c327c85634acde35c7b9ee07848cc5">AllocatePersistentBuffer</a>(<span class="keywordtype">size_t</span> bytes);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span> </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  <span class="comment">// Register a scratch buffer of size `bytes` for Node with `node_id`.</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>  <span class="comment">// This method only requests a buffer with a given size to be used after a</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>  <span class="comment">// model has finished allocation via FinishModelAllocation(). All requested</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>  <span class="comment">// buffers will be accessible by the out-param in that method.</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a70c8d3d8f2480413dd987a7a55c85928">  238</a></span>  <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a70c8d3d8f2480413dd987a7a55c85928">RequestScratchBufferInArena</a>(<span class="keywordtype">size_t</span> bytes, <span class="keywordtype">int</span> subgraph_idx,</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>                                           <span class="keywordtype">int</span>* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src7bb90234a942007b3f55b52484ee7c3e.html#a82de2679c069b1bce97a7d4aeb83cf60">buffer_idx</a>);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span> </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  <span class="comment">// Finish allocating a specific NodeAndRegistration prepare block (kernel</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  <span class="comment">// entry for a model) with a given node ID. This call ensures that any scratch</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>  <span class="comment">// buffer requests and temporary allocations are handled and ready for the</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>  <span class="comment">// next node prepare block.</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a21077a1c40daf387a92fd96f45847adf">  245</a></span>  <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a21077a1c40daf387a92fd96f45847adf">FinishPrepareNodeAllocations</a>(<span class="keywordtype">int</span> node_id);</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span> </div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  <span class="comment">// Returns the arena usage in bytes, only available after</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  <span class="comment">// `FinishModelAllocation`. Otherwise, it will return 0.</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#ae902f60497b0dbc6b62f33d7e593b0af">  249</a></span>  <span class="keywordtype">size_t</span> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#ae902f60497b0dbc6b62f33d7e593b0af">used_bytes</a>() <span class="keyword">const</span>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a35fbb58e368cc8450b925ee325888e0d">  251</a></span>  <a class="code hl_class" href="classtflite_1_1_builtin_data_allocator.html">TfLiteBridgeBuiltinDataAllocator</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a35fbb58e368cc8450b925ee325888e0d">GetBuiltinDataAllocator</a>();</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span> </div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> <span class="keyword">protected</span>:</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a18615b3ce4daf12e3d715e09600366c3">  254</a></span>  <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a18615b3ce4daf12e3d715e09600366c3">MicroAllocator</a>(<a class="code hl_class" href="classtflite_1_1_single_arena_buffer_allocator.html">SingleArenaBufferAllocator</a>* memory_allocator,</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                 <a class="code hl_class" href="classtflite_1_1_micro_memory_planner.html">MicroMemoryPlanner</a>* memory_planner);</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a240a5f8a03e3962648a92cb83cdd9d1e">  256</a></span>  <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a240a5f8a03e3962648a92cb83cdd9d1e">MicroAllocator</a>(<a class="code hl_class" href="classtflite_1_1_i_persistent_buffer_allocator.html">IPersistentBufferAllocator</a>* persistent_buffer_allocator,</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                 <a class="code hl_class" href="classtflite_1_1_i_non_persistent_buffer_allocator.html">INonPersistentBufferAllocator</a>* non_persistent_buffer_allocator,</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                 <a class="code hl_class" href="classtflite_1_1_micro_memory_planner.html">MicroMemoryPlanner</a>* memory_planner);</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#ad41e195272de7c5c3a04cdec0fef2254">  259</a></span>  <span class="keyword">virtual</span> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#ad41e195272de7c5c3a04cdec0fef2254">~MicroAllocator</a>();</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span> </div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>  <span class="comment">// Allocates an array in the arena to hold pointers to the node and</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>  <span class="comment">// registration pointers required to represent the inference graph of the</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>  <span class="comment">// model.</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#afa1c5bf899c3c705bcfaa4539c8f4086">  264</a></span>  <span class="keyword">virtual</span> <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#afa1c5bf899c3c705bcfaa4539c8f4086">AllocateNodeAndRegistrations</a>(</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>      <span class="keyword">const</span> Model* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a>, <a class="code hl_struct" href="structtflite_1_1_subgraph_allocations.html">SubgraphAllocations</a>* subgraph_allocations);</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  <span class="comment">// Allocates the list of persistent TfLiteEvalTensors that are used for the</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  <span class="comment">// &quot;eval&quot; phase of model inference. These structs will be the source of truth</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>  <span class="comment">// for all tensor buffers.</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a0ec39c3aa3aeeb068ad334d69f1b873e">  270</a></span>  <span class="keyword">virtual</span> <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a0ec39c3aa3aeeb068ad334d69f1b873e">AllocateTfLiteEvalTensors</a>(</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>      <span class="keyword">const</span> Model* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a>, <a class="code hl_struct" href="structtflite_1_1_subgraph_allocations.html">SubgraphAllocations</a>* subgraph_allocations);</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  <span class="comment">// Allocates persistent tensor buffers for variable tensors in the subgraph.</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>  <span class="comment">// Online and offline variable tensors are handled differently hence the</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>  <span class="comment">// offline_planner_offsets parameter is needed.</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#aedd7c833abcf5a4bb8f831ff3011f211">  276</a></span>  <span class="keyword">virtual</span> <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#aedd7c833abcf5a4bb8f831ff3011f211">AllocateVariables</a>(</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>      <span class="keyword">const</span> SubGraph* subgraph, <a class="code hl_struct" href="struct_tf_lite_eval_tensor.html">TfLiteEvalTensor</a>* eval_tensors,</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>      <span class="keyword">const</span> int32_t* offline_planner_offsets);</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span> </div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>  <span class="comment">// Allocate and return a persistent TfLiteTensor.</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  <span class="comment">// TODO(b/162311891): Drop this method when the interpreter has an API for</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  <span class="comment">// accessing TfLiteEvalTensor structs.</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a61b4a608671dd70cb1e77c456128ea62">  283</a></span>  <span class="keyword">virtual</span> <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a61b4a608671dd70cb1e77c456128ea62">AllocatePersistentTfLiteTensorInternal</a>();</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>  <span class="comment">// Populates a TfLiteTensor struct with data from the model flatbuffer. Any</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>  <span class="comment">// quantization data is allocated from either the tail (persistent) or temp</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>  <span class="comment">// sections of the arena based on the allocation flag.</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#adf9addcc5527004ecbda0dc6c2156de6">  288</a></span>  <span class="keyword">virtual</span> <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#adf9addcc5527004ecbda0dc6c2156de6">PopulateTfLiteTensorFromFlatbuffer</a>(<span class="keyword">const</span> Model* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a>,</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>                                                          <a class="code hl_struct" href="struct_tf_lite_tensor.html">TfLiteTensor</a>* <a class="code hl_namespace" href="namespacetensor.html">tensor</a>,</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>                                                          <span class="keywordtype">int</span> tensor_index,</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>                                                          <span class="keywordtype">int</span> subgraph_idx,</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>                                                          <span class="keywordtype">bool</span> allocate_temp);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span> </div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> <span class="keyword">private</span>:</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>  <span class="comment">// Commits a memory plan for all non-persistent buffer allocations in the</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>  <span class="comment">// &#39;head&#39; section of the memory arena. The eval_tensors pointer is the list of</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>  <span class="comment">// pre-allocated TfLiteEvalTensor structs that will point to the buffers that</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  <span class="comment">// will be allocated into the head section in this function call. The</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  <span class="comment">// scratch_buffer_handles pointer is the array of pre-allocated</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  <span class="comment">// ScratchBufferHandle structs that will point to allocated buffers also in</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>  <span class="comment">// the head section.</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a3206b9e5aa18aa0ee0311a389ef96f8c">  302</a></span>  <span class="keyword">virtual</span> <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a3206b9e5aa18aa0ee0311a389ef96f8c">CommitStaticMemoryPlan</a>(</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>      <span class="keyword">const</span> Model* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a>, <a class="code hl_struct" href="structtflite_1_1_subgraph_allocations.html">SubgraphAllocations</a>* allocations,</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>      <a class="code hl_struct" href="structtflite_1_1_scratch_buffer_handle.html">ScratchBufferHandle</a>* scratch_buffer_handles);</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>  <span class="comment">// Allocates an array of ScratchBufferHandle structs in the tail section for a</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>  <span class="comment">// given number of handles.</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a83624901f7ed3d01bdcbb249fd0581ed">  308</a></span>  <span class="keyword">virtual</span> <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a83624901f7ed3d01bdcbb249fd0581ed">AllocateScratchBufferHandles</a>(</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>      <a class="code hl_struct" href="structtflite_1_1_scratch_buffer_handle.html">ScratchBufferHandle</a>** scratch_buffer_handles, <span class="keywordtype">size_t</span> handle_count);</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span> </div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  <span class="comment">// Clears all internal scratch buffer request counts and resets the head to</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <span class="comment">// prepare for kernels to request scratch buffer data when a model is</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>  <span class="comment">// preparing.</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#abe35adb1f5f9b43fa6994551df200e74">  314</a></span>  <a class="code hl_enumeration" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a> <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#abe35adb1f5f9b43fa6994551df200e74">InitScratchBufferData</a>();</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>  <span class="comment">// Returns the pointer for the array of ScratchBufferRequest allocations in</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  <span class="comment">// the head section.</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno"><a class="line" href="classtflite_1_1_micro_allocator.html#a039c44ee0c3c0186e2ecc47dfa5e44d1">  318</a></span>  <a class="code hl_struct" href="structtflite_1_1internal_1_1_scratch_buffer_request.html">internal::ScratchBufferRequest</a>* <a class="code hl_function" href="classtflite_1_1_micro_allocator.html#a039c44ee0c3c0186e2ecc47dfa5e44d1">GetScratchBufferRequests</a>();</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>  <span class="comment">// A simple memory allocator that always allocate from the arena tail or head.</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>  <a class="code hl_class" href="classtflite_1_1_i_non_persistent_buffer_allocator.html">INonPersistentBufferAllocator</a>* <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#a4db1fb548f80128566f4cc29ba23e4c5">non_persistent_buffer_allocator_</a>;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  <a class="code hl_class" href="classtflite_1_1_i_persistent_buffer_allocator.html">IPersistentBufferAllocator</a>* <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#aa1c281070ab76feb8393d82fd83cb25f">persistent_buffer_allocator_</a>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>  <span class="comment">// Allocator used to allocate persistent builtin data.</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>  <a class="code hl_class" href="classtflite_1_1_builtin_data_allocator.html">TfLiteBridgeBuiltinDataAllocator</a>* <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#a0ea318f1b441e020320ff8f304b2b0ef">builtin_data_allocator_</a>;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>  <span class="comment">// Activation buffer memory planner.</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>  <a class="code hl_class" href="classtflite_1_1_micro_memory_planner.html">MicroMemoryPlanner</a>* <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#a7e8df6e9dffd618bff5154ab4f514f22">memory_planner_</a>;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>  <span class="keywordtype">bool</span> <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#ad1b6e94b87087665b8d31a13ca0935fc">model_is_allocating_</a>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span> </div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  <span class="comment">// Holds the number of ScratchBufferRequest instances stored in the head</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  <span class="comment">// section when a model is allocating.</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#a3b07d83b82983da85cf3e1c898c432cc">scratch_buffer_request_count_</a> = 0;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>  <span class="comment">// Holds ScratchBufferRequest when a model is allocating</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>  uint8_t* <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#ab6f1f4d2011b5ddfad623fb1a7997a08">scratch_buffer_head_</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>  <span class="comment">// Holds the byte length of the memory plan with the largest head usage. Used</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>  <span class="comment">// to ensure that multi-tenant allocations can share the head for buffers.</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="classtflite_1_1_micro_allocator.html#a480f9d019a81f3ce4e140feab70289e7">max_head_buffer_usage_</a> = 0;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src336b24cffab807348972c47c46f8de00.html#a92a34c72cfcc4f6c5bd49086ba082af4">TF_LITE_REMOVE_VIRTUAL_DELETE</a></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>};</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>}  <span class="comment">// namespace tflite</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span><span class="preprocessor">#endif  </span><span class="comment">// TENSORFLOW_LITE_MICRO_MICRO_ALLOCATOR_H_</span></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h_html_ae142afd8c2e2c711c1c62440deebe03c"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2model_8h.html#ae142afd8c2e2c711c1c62440deebe03c">model</a></div><div class="ttdeci">const unsigned char model[]</div><div class="ttdef"><b>Definition</b> model.h:1</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src336b24cffab807348972c47c46f8de00_html_a92a34c72cfcc4f6c5bd49086ba082af4"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src336b24cffab807348972c47c46f8de00.html#a92a34c72cfcc4f6c5bd49086ba082af4">TF_LITE_REMOVE_VIRTUAL_DELETE</a></div><div class="ttdeci">#define TF_LITE_REMOVE_VIRTUAL_DELETE</div><div class="ttdef"><b>Definition</b> compatibility.h:29</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src7bb90234a942007b3f55b52484ee7c3e_html_a82de2679c069b1bce97a7d4aeb83cf60"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src7bb90234a942007b3f55b52484ee7c3e.html#a82de2679c069b1bce97a7d4aeb83cf60">buffer_idx</a></div><div class="ttdeci">int buffer_idx</div><div class="ttdef"><b>Definition</b> conv.cpp:39</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8_html_acf79d2fb5fa520303014d1303f1f6361"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcf7df9e575f8a1f1a49c58fb0f49428b8.html#acf79d2fb5fa520303014d1303f1f6361">TfLiteStatus</a></div><div class="ttdeci">TfLiteStatus</div><div class="ttdef"><b>Definition</b> c_api_types.h:55</div></div>
<div class="ttc" id="aclassflatbuffers_1_1_vector_html"><div class="ttname"><a href="classflatbuffers_1_1_vector.html">flatbuffers::Vector</a></div><div class="ttdef"><b>Definition</b> fb_vector.h:144</div></div>
<div class="ttc" id="aclasstflite_1_1_builtin_data_allocator_html"><div class="ttname"><a href="classtflite_1_1_builtin_data_allocator.html">tflite::BuiltinDataAllocator</a></div><div class="ttdef"><b>Definition</b> flatbuffer_conversions.h:33</div></div>
<div class="ttc" id="aclasstflite_1_1_i_non_persistent_buffer_allocator_html"><div class="ttname"><a href="classtflite_1_1_i_non_persistent_buffer_allocator.html">tflite::INonPersistentBufferAllocator</a></div><div class="ttdef"><b>Definition</b> ibuffer_allocator.h:47</div></div>
<div class="ttc" id="aclasstflite_1_1_i_persistent_buffer_allocator_html"><div class="ttname"><a href="classtflite_1_1_i_persistent_buffer_allocator.html">tflite::IPersistentBufferAllocator</a></div><div class="ttdef"><b>Definition</b> ibuffer_allocator.h:32</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html">tflite::MicroAllocator</a></div><div class="ttdef"><b>Definition</b> micro_allocator.h:112</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a018b9d20e8d9ebd17360948e622237b7"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a018b9d20e8d9ebd17360948e622237b7">tflite::MicroAllocator::Create</a></div><div class="ttdeci">static MicroAllocator * Create(uint8_t *tensor_arena, size_t arena_size, MicroMemoryPlanner *memory_planner)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a039c44ee0c3c0186e2ecc47dfa5e44d1"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a039c44ee0c3c0186e2ecc47dfa5e44d1">tflite::MicroAllocator::GetScratchBufferRequests</a></div><div class="ttdeci">internal::ScratchBufferRequest * GetScratchBufferRequests()</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a0ea318f1b441e020320ff8f304b2b0ef"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a0ea318f1b441e020320ff8f304b2b0ef">tflite::MicroAllocator::builtin_data_allocator_</a></div><div class="ttdeci">TfLiteBridgeBuiltinDataAllocator * builtin_data_allocator_</div><div class="ttdef"><b>Definition</b> micro_allocator.h:303</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a0ec39c3aa3aeeb068ad334d69f1b873e"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a0ec39c3aa3aeeb068ad334d69f1b873e">tflite::MicroAllocator::AllocateTfLiteEvalTensors</a></div><div class="ttdeci">virtual TfLiteStatus AllocateTfLiteEvalTensors(const Model *model, SubgraphAllocations *subgraph_allocations)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a18615b3ce4daf12e3d715e09600366c3"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a18615b3ce4daf12e3d715e09600366c3">tflite::MicroAllocator::MicroAllocator</a></div><div class="ttdeci">MicroAllocator(SingleArenaBufferAllocator *memory_allocator, MicroMemoryPlanner *memory_planner)</div><div class="ttdef"><b>Definition</b> micro_allocator.cpp:348</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a1cde326086409e229a547bc306970e14"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a1cde326086409e229a547bc306970e14">tflite::MicroAllocator::DeallocateTempBuffer</a></div><div class="ttdeci">virtual void DeallocateTempBuffer(uint8_t *buffer)</div><div class="ttdef"><b>Definition</b> micro_allocator.cc:748</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a21077a1c40daf387a92fd96f45847adf"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a21077a1c40daf387a92fd96f45847adf">tflite::MicroAllocator::FinishPrepareNodeAllocations</a></div><div class="ttdeci">TfLiteStatus FinishPrepareNodeAllocations(int node_id)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a240a5f8a03e3962648a92cb83cdd9d1e"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a240a5f8a03e3962648a92cb83cdd9d1e">tflite::MicroAllocator::MicroAllocator</a></div><div class="ttdeci">MicroAllocator(IPersistentBufferAllocator *persistent_buffer_allocator, INonPersistentBufferAllocator *non_persistent_buffer_allocator, MicroMemoryPlanner *memory_planner)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a25c327c85634acde35c7b9ee07848cc5"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a25c327c85634acde35c7b9ee07848cc5">tflite::MicroAllocator::AllocatePersistentBuffer</a></div><div class="ttdeci">virtual void * AllocatePersistentBuffer(size_t bytes)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a3206b9e5aa18aa0ee0311a389ef96f8c"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a3206b9e5aa18aa0ee0311a389ef96f8c">tflite::MicroAllocator::CommitStaticMemoryPlan</a></div><div class="ttdeci">virtual TfLiteStatus CommitStaticMemoryPlan(const Model *model, SubgraphAllocations *allocations, ScratchBufferHandle *scratch_buffer_handles)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a33d8c6a5720e8f86862a6753362cacac"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a33d8c6a5720e8f86862a6753362cacac">tflite::MicroAllocator::IsAllTempDeallocated</a></div><div class="ttdeci">virtual bool IsAllTempDeallocated()</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a35bcf5002a662e06502afefed8f643c6"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a35bcf5002a662e06502afefed8f643c6">tflite::MicroAllocator::Create</a></div><div class="ttdeci">static MicroAllocator * Create(SingleArenaBufferAllocator *memory_allocator, MicroMemoryPlanner *memory_planner)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a35fbb58e368cc8450b925ee325888e0d"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a35fbb58e368cc8450b925ee325888e0d">tflite::MicroAllocator::GetBuiltinDataAllocator</a></div><div class="ttdeci">TfLiteBridgeBuiltinDataAllocator * GetBuiltinDataAllocator()</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a3b07d83b82983da85cf3e1c898c432cc"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a3b07d83b82983da85cf3e1c898c432cc">tflite::MicroAllocator::scratch_buffer_request_count_</a></div><div class="ttdeci">size_t scratch_buffer_request_count_</div><div class="ttdef"><b>Definition</b> micro_allocator.h:312</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a41d2f07de254dced8a9a852bd1737404"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a41d2f07de254dced8a9a852bd1737404">tflite::MicroAllocator::DeallocateTempTfLiteTensor</a></div><div class="ttdeci">virtual void DeallocateTempTfLiteTensor(TfLiteTensor *)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a480f9d019a81f3ce4e140feab70289e7"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a480f9d019a81f3ce4e140feab70289e7">tflite::MicroAllocator::max_head_buffer_usage_</a></div><div class="ttdeci">size_t max_head_buffer_usage_</div><div class="ttdef"><b>Definition</b> micro_allocator.h:319</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a48bf21c87345607dcfd2b76c481b6eb5"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a48bf21c87345607dcfd2b76c481b6eb5">tflite::MicroAllocator::Create</a></div><div class="ttdeci">static MicroAllocator * Create(uint8_t *tensor_arena, size_t arena_size)</div><div class="ttdef"><b>Definition</b> micro_allocator.cpp:377</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a4db1fb548f80128566f4cc29ba23e4c5"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a4db1fb548f80128566f4cc29ba23e4c5">tflite::MicroAllocator::non_persistent_buffer_allocator_</a></div><div class="ttdeci">INonPersistentBufferAllocator * non_persistent_buffer_allocator_</div><div class="ttdef"><b>Definition</b> micro_allocator.h:299</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a61b4a608671dd70cb1e77c456128ea62"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a61b4a608671dd70cb1e77c456128ea62">tflite::MicroAllocator::AllocatePersistentTfLiteTensorInternal</a></div><div class="ttdeci">virtual TfLiteTensor * AllocatePersistentTfLiteTensorInternal()</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a70c8d3d8f2480413dd987a7a55c85928"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a70c8d3d8f2480413dd987a7a55c85928">tflite::MicroAllocator::RequestScratchBufferInArena</a></div><div class="ttdeci">TfLiteStatus RequestScratchBufferInArena(size_t bytes, int subgraph_idx, int *buffer_idx)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a7e8df6e9dffd618bff5154ab4f514f22"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a7e8df6e9dffd618bff5154ab4f514f22">tflite::MicroAllocator::memory_planner_</a></div><div class="ttdeci">MicroMemoryPlanner * memory_planner_</div><div class="ttdef"><b>Definition</b> micro_allocator.h:306</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a834b5db13075f03c0ac9cc37d0d7b00b"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a834b5db13075f03c0ac9cc37d0d7b00b">tflite::MicroAllocator::AllocateTempBuffer</a></div><div class="ttdeci">virtual uint8_t * AllocateTempBuffer(size_t size, size_t alignment)</div><div class="ttdef"><b>Definition</b> micro_allocator.cc:744</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a83624901f7ed3d01bdcbb249fd0581ed"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a83624901f7ed3d01bdcbb249fd0581ed">tflite::MicroAllocator::AllocateScratchBufferHandles</a></div><div class="ttdeci">virtual TfLiteStatus AllocateScratchBufferHandles(ScratchBufferHandle **scratch_buffer_handles, size_t handle_count)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a89720c3a9285c3dd02ed51f2c6ef563b"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a89720c3a9285c3dd02ed51f2c6ef563b">tflite::MicroAllocator::AllocatePersistentTfLiteTensor</a></div><div class="ttdeci">virtual TfLiteTensor * AllocatePersistentTfLiteTensor(const Model *model, const SubgraphAllocations *subgraph_allocations, int tensor_index, int subgraph_index)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_a9377b0d649a7e61c4e5832af2fa2b51e"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#a9377b0d649a7e61c4e5832af2fa2b51e">tflite::MicroAllocator::StartModelAllocation</a></div><div class="ttdeci">SubgraphAllocations * StartModelAllocation(const Model *model)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_aa1c281070ab76feb8393d82fd83cb25f"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#aa1c281070ab76feb8393d82fd83cb25f">tflite::MicroAllocator::persistent_buffer_allocator_</a></div><div class="ttdeci">IPersistentBufferAllocator * persistent_buffer_allocator_</div><div class="ttdef"><b>Definition</b> micro_allocator.h:300</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_ab6f1f4d2011b5ddfad623fb1a7997a08"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#ab6f1f4d2011b5ddfad623fb1a7997a08">tflite::MicroAllocator::scratch_buffer_head_</a></div><div class="ttdeci">uint8_t * scratch_buffer_head_</div><div class="ttdef"><b>Definition</b> micro_allocator.h:315</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_abe35adb1f5f9b43fa6994551df200e74"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#abe35adb1f5f9b43fa6994551df200e74">tflite::MicroAllocator::InitScratchBufferData</a></div><div class="ttdeci">TfLiteStatus InitScratchBufferData()</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_abe9037a63bc46333c997c8058698e13f"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#abe9037a63bc46333c997c8058698e13f">tflite::MicroAllocator::AllocateTempTfLiteTensor</a></div><div class="ttdeci">virtual TfLiteTensor * AllocateTempTfLiteTensor(const Model *model, const SubgraphAllocations *subgraph_allocations, int tensor_index, int subgraph_index)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_ac2f623bad24d35f85fa40642b797d90c"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#ac2f623bad24d35f85fa40642b797d90c">tflite::MicroAllocator::FinishModelAllocation</a></div><div class="ttdeci">TfLiteStatus FinishModelAllocation(const Model *model, SubgraphAllocations *subgraph_allocations, ScratchBufferHandle **scratch_buffer_handles)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_ad1b6e94b87087665b8d31a13ca0935fc"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#ad1b6e94b87087665b8d31a13ca0935fc">tflite::MicroAllocator::model_is_allocating_</a></div><div class="ttdeci">bool model_is_allocating_</div><div class="ttdef"><b>Definition</b> micro_allocator.h:308</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_ad41e195272de7c5c3a04cdec0fef2254"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#ad41e195272de7c5c3a04cdec0fef2254">tflite::MicroAllocator::~MicroAllocator</a></div><div class="ttdeci">virtual ~MicroAllocator()</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_adf9addcc5527004ecbda0dc6c2156de6"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#adf9addcc5527004ecbda0dc6c2156de6">tflite::MicroAllocator::PopulateTfLiteTensorFromFlatbuffer</a></div><div class="ttdeci">virtual TfLiteStatus PopulateTfLiteTensorFromFlatbuffer(const Model *model, TfLiteTensor *tensor, int tensor_index, int subgraph_idx, bool allocate_temp)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_ae902f60497b0dbc6b62f33d7e593b0af"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#ae902f60497b0dbc6b62f33d7e593b0af">tflite::MicroAllocator::used_bytes</a></div><div class="ttdeci">size_t used_bytes() const</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_aec5363e9f7023f51d3b23d97e92a247f"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#aec5363e9f7023f51d3b23d97e92a247f">tflite::MicroAllocator::GetDefaultTailUsage</a></div><div class="ttdeci">static size_t GetDefaultTailUsage(bool is_memory_planner_given)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_aedd7c833abcf5a4bb8f831ff3011f211"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#aedd7c833abcf5a4bb8f831ff3011f211">tflite::MicroAllocator::AllocateVariables</a></div><div class="ttdeci">virtual TfLiteStatus AllocateVariables(const SubGraph *subgraph, TfLiteEvalTensor *eval_tensors, const int32_t *offline_planner_offsets)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_af4adf7f7ad5129548550090450af6f77"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#af4adf7f7ad5129548550090450af6f77">tflite::MicroAllocator::ResetTempAllocations</a></div><div class="ttdeci">virtual TfLiteStatus ResetTempAllocations()</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_af5c11b6af1817d710c16dee9ffdc90e0"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#af5c11b6af1817d710c16dee9ffdc90e0">tflite::MicroAllocator::preserves_all_tensor</a></div><div class="ttdeci">bool preserves_all_tensor() const</div><div class="ttdef"><b>Definition</b> micro_allocator.h:159</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_allocator_html_afa1c5bf899c3c705bcfaa4539c8f4086"><div class="ttname"><a href="classtflite_1_1_micro_allocator.html#afa1c5bf899c3c705bcfaa4539c8f4086">tflite::MicroAllocator::AllocateNodeAndRegistrations</a></div><div class="ttdeci">virtual TfLiteStatus AllocateNodeAndRegistrations(const Model *model, SubgraphAllocations *subgraph_allocations)</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_memory_planner_html"><div class="ttname"><a href="classtflite_1_1_micro_memory_planner.html">tflite::MicroMemoryPlanner</a></div><div class="ttdef"><b>Definition</b> micro_memory_planner.h:45</div></div>
<div class="ttc" id="aclasstflite_1_1_micro_memory_planner_html_a9e0dd5044fce5bbf961258e6e6c1fc37"><div class="ttname"><a href="classtflite_1_1_micro_memory_planner.html#a9e0dd5044fce5bbf961258e6e6c1fc37">tflite::MicroMemoryPlanner::preserves_all_tensors</a></div><div class="ttdeci">virtual bool preserves_all_tensors() const =0</div></div>
<div class="ttc" id="aclasstflite_1_1_single_arena_buffer_allocator_html"><div class="ttname"><a href="classtflite_1_1_single_arena_buffer_allocator.html">tflite::SingleArenaBufferAllocator</a></div><div class="ttdef"><b>Definition</b> single_arena_buffer_allocator.h:32</div></div>
<div class="ttc" id="agroup__ei__functions_html_gaf4ad914acba713176b1f00a800e781ba"><div class="ttname"><a href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a></div><div class="ttdeci">const ei_learning_block_config_tflite_graph_t ei_impulse_result_t * result</div><div class="ttdef"><b>Definition</b> ei_fill_result_struct.h:206</div></div>
<div class="ttc" id="ahello__world__model_8cc_html_a439227feff9d7f55384e8780cfc2eb82"><div class="ttname"><a href="hello__world__model_8cc.html#a439227feff9d7f55384e8780cfc2eb82">size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition</b> hello_world_model.cc:113</div></div>
<div class="ttc" id="amicro__common_8h_html"><div class="ttname"><a href="micro__common_8h.html">micro_common.h</a></div></div>
<div class="ttc" id="anamespacetensor_html"><div class="ttname"><a href="namespacetensor.html">tensor</a></div><div class="ttdef"><b>Definition</b> tensor.py:1</div></div>
<div class="ttc" id="anamespacetflite_1_1internal_html_abb4052f3f3605a78a6d109c228475f90"><div class="ttname"><a href="namespacetflite_1_1internal.html#abb4052f3f3605a78a6d109c228475f90">tflite::internal::InitializeTfLiteTensorFromFlatbuffer</a></div><div class="ttdeci">TfLiteStatus InitializeTfLiteTensorFromFlatbuffer(IPersistentBufferAllocator *persistent_buffer_allocator, INonPersistentBufferAllocator *non_persistent_buffer_allocator, bool allocate_temp, const tflite::Tensor &amp;flatbuffer_tensor, const flatbuffers::Vector&lt; flatbuffers::Offset&lt; Buffer &gt; &gt; *buffers, TfLiteTensor *result)</div><div class="ttdef"><b>Definition</b> micro_allocator.cpp:193</div></div>
<div class="ttc" id="anamespacetflite_html"><div class="ttname"><a href="namespacetflite.html">tflite</a></div><div class="ttdef"><b>Definition</b> context_util.h:26</div></div>
<div class="ttc" id="anamespacetflite_html_a303f33bcf2c76d89b0a0bf911adb3ee1"><div class="ttname"><a href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1">tflite::MemoryPlannerType</a></div><div class="ttdeci">MemoryPlannerType</div><div class="ttdef"><b>Definition</b> micro_allocator.h:71</div></div>
<div class="ttc" id="anamespacetflite_html_a303f33bcf2c76d89b0a0bf911adb3ee1aac97f0008bcf7c7fe4f2ff94160e1385"><div class="ttname"><a href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1aac97f0008bcf7c7fe4f2ff94160e1385">tflite::MemoryPlannerType::kLinear</a></div><div class="ttdeci">@ kLinear</div></div>
<div class="ttc" id="anamespacetflite_html_a303f33bcf2c76d89b0a0bf911adb3ee1ac4861b96ac740cfc11a26a3c8f372b5c"><div class="ttname"><a href="namespacetflite.html#a303f33bcf2c76d89b0a0bf911adb3ee1ac4861b96ac740cfc11a26a3c8f372b5c">tflite::MemoryPlannerType::kGreedy</a></div><div class="ttdeci">@ kGreedy</div></div>
<div class="ttc" id="anamespacetflite_html_ad7380db20a16cb04f096c963d9ade791"><div class="ttname"><a href="namespacetflite.html#ad7380db20a16cb04f096c963d9ade791">tflite::tensor_arena</a></div><div class="ttdeci">uint8_t tensor_arena[kTensorArenaSize]</div><div class="ttdef"><b>Definition</b> keyword_benchmark.cc:44</div></div>
<div class="ttc" id="anano__ble33__sense__accelerometer__continuous_8ino_html_a221f01f29c6cba77d9479aba615283f5"><div class="ttname"><a href="nano__ble33__sense__accelerometer__continuous_8ino.html#a221f01f29c6cba77d9479aba615283f5">buffer</a></div><div class="ttdeci">static float buffer[EI_CLASSIFIER_DSP_INPUT_FRAME_SIZE]</div><div class="ttdef"><b>Definition</b> nano_ble33_sense_accelerometer_continuous.ino:51</div></div>
<div class="ttc" id="astruct_t_f_l_m_registration_html"><div class="ttname"><a href="struct_t_f_l_m_registration.html">TFLMRegistration</a></div><div class="ttdef"><b>Definition</b> micro_common.h:23</div></div>
<div class="ttc" id="astruct_tf_lite_eval_tensor_html"><div class="ttname"><a href="struct_tf_lite_eval_tensor.html">TfLiteEvalTensor</a></div><div class="ttdef"><b>Definition</b> common.h:607</div></div>
<div class="ttc" id="astruct_tf_lite_node_html"><div class="ttname"><a href="struct_tf_lite_node.html">TfLiteNode</a></div><div class="ttdef"><b>Definition</b> common.h:481</div></div>
<div class="ttc" id="astruct_tf_lite_tensor_html"><div class="ttname"><a href="struct_tf_lite_tensor.html">TfLiteTensor</a></div><div class="ttdef"><b>Definition</b> common.h:411</div></div>
<div class="ttc" id="astructtflite_1_1_node_and_registration_html_a04219fadd2bb40751a09a67a8ffc426a"><div class="ttname"><a href="structtflite_1_1_node_and_registration.html#a04219fadd2bb40751a09a67a8ffc426a">tflite::NodeAndRegistration::node</a></div><div class="ttdeci">TfLiteNode node</div><div class="ttdef"><b>Definition</b> micro_allocator.h:70</div></div>
<div class="ttc" id="astructtflite_1_1_node_and_registration_html_a2b3fcf22244a2d4fa64da5805bc5dd03"><div class="ttname"><a href="structtflite_1_1_node_and_registration.html#a2b3fcf22244a2d4fa64da5805bc5dd03">tflite::NodeAndRegistration::registration</a></div><div class="ttdeci">const TFLMRegistration * registration</div><div class="ttdef"><b>Definition</b> micro_allocator.h:78</div></div>
<div class="ttc" id="astructtflite_1_1_scratch_buffer_handle_html"><div class="ttname"><a href="structtflite_1_1_scratch_buffer_handle.html">tflite::ScratchBufferHandle</a></div><div class="ttdef"><b>Definition</b> micro_allocator.h:77</div></div>
<div class="ttc" id="astructtflite_1_1_scratch_buffer_handle_html_a55eeb5a8b0008454c3ad0a49b8dcd694"><div class="ttname"><a href="structtflite_1_1_scratch_buffer_handle.html#a55eeb5a8b0008454c3ad0a49b8dcd694">tflite::ScratchBufferHandle::data</a></div><div class="ttdeci">uint8_t * data</div><div class="ttdef"><b>Definition</b> micro_allocator.h:79</div></div>
<div class="ttc" id="astructtflite_1_1_subgraph_allocations_html"><div class="ttname"><a href="structtflite_1_1_subgraph_allocations.html">tflite::SubgraphAllocations</a></div><div class="ttdef"><b>Definition</b> micro_allocator.h:84</div></div>
<div class="ttc" id="astructtflite_1_1_subgraph_allocations_html_a3464388baf2c05985e1d62ae1e3e0265"><div class="ttname"><a href="structtflite_1_1_subgraph_allocations.html#a3464388baf2c05985e1d62ae1e3e0265">tflite::SubgraphAllocations::tensors</a></div><div class="ttdeci">TfLiteEvalTensor * tensors</div><div class="ttdef"><b>Definition</b> micro_allocator.h:86</div></div>
<div class="ttc" id="astructtflite_1_1_subgraph_allocations_html_aa04d95458c77cc66e175bc49cb242fbc"><div class="ttname"><a href="structtflite_1_1_subgraph_allocations.html#aa04d95458c77cc66e175bc49cb242fbc">tflite::SubgraphAllocations::node_and_registrations</a></div><div class="ttdeci">NodeAndRegistration * node_and_registrations</div><div class="ttdef"><b>Definition</b> micro_allocator.h:85</div></div>
<div class="ttc" id="astructtflite_1_1internal_1_1_scratch_buffer_request_html"><div class="ttname"><a href="structtflite_1_1internal_1_1_scratch_buffer_request.html">tflite::internal::ScratchBufferRequest</a></div><div class="ttdef"><b>Definition</b> micro_allocator.h:56</div></div>
<div class="ttc" id="astructtflite_1_1internal_1_1_scratch_buffer_request_html_a2d9182d71406802899c90d663dc681a0"><div class="ttname"><a href="structtflite_1_1internal_1_1_scratch_buffer_request.html#a2d9182d71406802899c90d663dc681a0">tflite::internal::ScratchBufferRequest::subgraph_idx</a></div><div class="ttdeci">int subgraph_idx</div><div class="ttdef"><b>Definition</b> micro_allocator.h:64</div></div>
<div class="ttc" id="astructtflite_1_1internal_1_1_scratch_buffer_request_html_a6b3bb06d3d8a6951665de7c7d11cbabc"><div class="ttname"><a href="structtflite_1_1internal_1_1_scratch_buffer_request.html#a6b3bb06d3d8a6951665de7c7d11cbabc">tflite::internal::ScratchBufferRequest::bytes</a></div><div class="ttdeci">size_t bytes</div><div class="ttdef"><b>Definition</b> micro_allocator.h:59</div></div>
<div class="ttc" id="astructtflite_1_1internal_1_1_scratch_buffer_request_html_abff04364278f265e9968be3f372d00a7"><div class="ttname"><a href="structtflite_1_1internal_1_1_scratch_buffer_request.html#abff04364278f265e9968be3f372d00a7">tflite::internal::ScratchBufferRequest::node_idx</a></div><div class="ttdeci">int node_idx</div><div class="ttdef"><b>Definition</b> micro_allocator.h:63</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
