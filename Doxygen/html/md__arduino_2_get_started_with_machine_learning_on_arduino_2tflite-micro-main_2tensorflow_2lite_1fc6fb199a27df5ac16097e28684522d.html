<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Machine Vision using Portenta H7: TFLite for Microcontrollers Benchmarks</title>
<link rel="icon" href="logo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Machine Vision using Portenta H7<span id="projectnumber">&#160;2</span>
   </div>
   <div id="projectbrief">This project aims to develop a face recognition-based access control system using the Arduino Portenta H7 and Vision Shield, leveraging Edge Impulse for machine learning. The system captures facial images, processes them locally using an AI model deployed on the Portenta H7 and determines access based on authorised personnel.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">TFLite for Microcontrollers Benchmarks</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md137"></a></p>
<p>These benchmarks are for measuring the performance of key models and workloads. They are meant to be used as part of the model optimization process for a given platform.</p>
<h1><a class="anchor" id="autotoc_md138"></a>
Table of contents</h1>
<ul>
<li>Keyword Benchmark</li>
<li>Person Detection Benchmark</li>
<li>Run on x86</li>
<li>Run on Xtensa XPG Simulator</li>
<li>Run on Sparkfun Edge</li>
<li>Run on FVP based on Arm Corstone-300 software</li>
</ul>
<h1><a class="anchor" id="autotoc_md139"></a>
Keyword benchmark</h1>
<p>The keyword benchmark contains a model for keyword detection with scrambled weights and biases. This model is meant to test performance on a platform only. Since the weights are scrambled, the output is meaningless. In order to validate the accuracy of optimized kernels, please run the kernel tests.</p>
<h1><a class="anchor" id="autotoc_md140"></a>
Person detection benchmark</h1>
<p>The keyword benchmark provides a way to evaluate the performance of the 250KB visual wakewords model.</p>
<h1><a class="anchor" id="autotoc_md141"></a>
Run on x86</h1>
<p>To run the keyword benchmark on x86, run</p>
<div class="fragment"><div class="line">make -f tensorflow/lite/micro/tools/make/Makefile run_keyword_benchmark</div>
</div><!-- fragment --><p>To run the person detection benchmark on x86, run</p>
<div class="fragment"><div class="line">make -f tensorflow/lite/micro/tools/make/Makefile run_person_detection_benchmark</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md142"></a>
Run on Xtensa XPG Simulator</h1>
<p>To run the keyword benchmark on the Xtensa XPG simulator, you will need a valid Xtensa toolchain and license. With these set up, run:</p>
<div class="fragment"><div class="line">make -f tensorflow/lite/micro/tools/make/Makefile TARGET=xtensa OPTIMIZED_KERNEL_DIR=xtensa TARGET_ARCH=&lt;target architecture&gt; XTENSA_CORE=&lt;xtensa core&gt; run_keyword_benchmark -j18</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md143"></a>
Run on Sparkfun Edge</h1>
<p>The following instructions will help you build and deploy this benchmark on the <a href="https://sparkfun.com/products/15170">SparkFun Edge development board</a>.</p>
<p>If you're new to using this board, we recommend walking through the <a href="https://codelabs.developers.google.com/codelabs/sparkfun-tensorflow">AI on a microcontroller with TensorFlow Lite and SparkFun Edge</a> codelab to get an understanding of the workflow.</p>
<p>Build binary using</p>
<div class="fragment"><div class="line">make -f tensorflow/lite/micro/tools/make/Makefile TARGET=sparkfun_edge person_detection_benchmark_bin</div>
</div><!-- fragment --><p>Refer to flashing instructions in the <a href="https://github.com/tensorflow/tflite-micro/blob/main/tensorflow/lite/micro/examples/person_detection/README.md#running-on-sparkfun-edge">Person Detection Example</a>.</p>
<h1><a class="anchor" id="autotoc_md144"></a>
Run on FVP based on Arm Corstone-300 software</h1>
<p>For more info about the Corstone-300 software see: <a class="el" href="md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_82827bd6c13db4bb01fdae0f97c9e47c.html">tensorflow/lite/micro/cortex_m_corstone_300/README.md</a>.</p>
<p>Disclaimer: Executing the benchmark test on the Corstone-300 software will provide a general metric of instructions executed. The estimates are not cycle accurate, however it aligns to instruction per cycle, and is a consistent environment. This means it can detect if code changes changed performance.</p>
<p>The person detection benchmark can also run with Ethos-U enabled, as the downloaded model will be optimized for Ethos-U. For more info see: <a class="el" href="md__arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-main_2tensorflow_2lite_0ba4459073c33ccb7906653606a33922.html">tensorflow/lite/micro/kernels/ethos_u/README.md</a>.</p>
<p>To run the keyword benchmark on FVP:</p>
<div class="fragment"><div class="line">make -f tensorflow/lite/micro/tools/make/Makefile TARGET=cortex_m_corstone_300 TARGET_ARCH=cortex-m55 run_keyword_benchmark</div>
</div><!-- fragment --><p>To run the person detection benchmark on FVP:</p>
<div class="fragment"><div class="line">make -f tensorflow/lite/micro/tools/make/Makefile TARGET=cortex_m_corstone_300 TARGET_ARCH=cortex-m55 run_person_detection_benchmark</div>
</div><!-- fragment --><p>To run the person detection benchmark on FVP with Ethos-U:</p>
<div class="fragment"><div class="line">make -f tensorflow/lite/micro/tools/make/Makefile CO_PROCESSOR=ethos_u TARGET=cortex_m_corstone_300 TARGET_ARCH=cortex-m55 run_person_detection_benchmark</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
