<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Machine Vision using Portenta H7: Face_Access_inferencing/src/edge-impulse-sdk/tensorflow/lite/kernels/internal/common.h Source File</title>
<link rel="icon" href="logo.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">Machine Vision using Portenta H7<span id="projectnumber">&#160;2</span>
   </div>
   <div id="projectbrief">This project aims to develop a face recognition-based access control system using the Arduino Portenta H7 and Vision Shield, leveraging Edge Impulse for machine learning. The system captures facial images, processes them locally using an AI model deployed on the Portenta H7 and determines access based on authorised personnel.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_05f86cf2d1c107dceef0ab0392ddcfcf.html">Face_Access_inferencing</a></li><li class="navelem"><a class="el" href="dir_a10e16a828caf535b3ccf4484f92e610.html">src</a></li><li class="navelem"><a class="el" href="dir_295f854905297c9d29514d45981534fb.html">edge-impulse-sdk</a></li><li class="navelem"><a class="el" href="dir_88de7df65619900f92563be63df6b182.html">tensorflow</a></li><li class="navelem"><a class="el" href="dir_9e2e44523d0e7057efff3aa2b83d3c03.html">lite</a></li><li class="navelem"><a class="el" href="dir_248234859e74565ab0a1ed75f89f7de6.html">kernels</a></li><li class="navelem"><a class="el" href="dir_cb9d2711fd6f9fa370ea69752f915f38.html">internal</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">common.h</div></div>
</div><!--header-->
<div class="contents">
<a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2common_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/* Copyright 2017 The TensorFlow Authors. All Rights Reserved.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment"></span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">you may not use this file except in compliance with the License.</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">You may obtain a copy of the License at</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment"></span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment"></span> </div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">See the License for the specific language governing permissions and</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">limitations under the License.</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">==============================================================================*/</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#ifndef TENSORFLOW_LITE_KERNELS_INTERNAL_COMMON_H_</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#define TENSORFLOW_LITE_KERNELS_INTERNAL_COMMON_H_</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#ifndef ALLOW_SLOW_GENERIC_DEPTHWISECONV_FALLBACK</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#ifdef GEMMLOWP_ALLOW_SLOW_SCALAR_FALLBACK</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#define ALLOW_SLOW_GENERIC_DEPTHWISECONV_FALLBACK</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &lt;functional&gt;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2third__party_2gemmlowp_2fixedpoint_2fixedpoint_8h.html">edge-impulse-sdk/third_party/gemmlowp/fixedpoint/fixedpoint.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2cppmath_8h.html">edge-impulse-sdk/tensorflow/lite/kernels/internal/cppmath.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2optimized_2neon__check_8h.html">edge-impulse-sdk/tensorflow/lite/kernels/internal/optimized/neon_check.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2types_8h.html">edge-impulse-sdk/tensorflow/lite/kernels/internal/types.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacetflite.html">tflite</a> {</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacetflite.html#a112b78cba61da67cc551da86e41c6761">kReverseShift</a> = -1;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a391a5d8e5e1a87759286ead1095a50f4">GetActivationMinMax</a>(<a class="code hl_enumeration" href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1">FusedActivationFunctionType</a> ac,</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>                                <span class="keywordtype">float</span>* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a>,</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>                                <span class="keywordtype">float</span>* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a>) {</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>  <span class="keywordflow">switch</span> (ac) {</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1a35c3ace1970663a16e5c65baa5941b13">FusedActivationFunctionType::kNone</a>:</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>      *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a> = std::numeric_limits&lt;float&gt;::lowest();</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>      *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a> = std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1a067892a9ea619b2c378e06000c9763af">FusedActivationFunctionType::kRelu</a>:</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>      *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a> = 0.f;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>      *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a> = std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1ae0a0000573fa134f9ee575b47d839ee4">FusedActivationFunctionType::kRelu1</a>:</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>      *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a> = -1.f;</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>      *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a> = 1.f;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1a4c7f8cb4a4aefd7ac6a89fa1b747233d">FusedActivationFunctionType::kRelu6</a>:</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>      *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a> = 0.f;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>      *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a> = 6.f;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>  }</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>}</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="keyword">inline</span> T <a class="code hl_function" href="namespacetflite.html#a0738549de81a149ce859d0edd7c31a05">ActivationFunctionWithMinMax</a>(T <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, T <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a>,</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>                                      T <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a>) {</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>  <span class="keyword">using </span>std::max;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <span class="keyword">using </span>std::min;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>  <span class="keywordflow">return</span> <a class="code hl_define" href="common__functions_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(<a class="code hl_define" href="common__functions_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a>), <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a>);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>}</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span> </div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="comment">// Legacy function, left for compatibility only.</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="keyword">template</span> &lt;FusedActivationFunctionType Ac&gt;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="keywordtype">float</span> <a class="code hl_function" href="namespacetflite.html#a3f8466214ce6e31f84f1af6add1b2bcb">ActivationFunction</a>(<span class="keywordtype">float</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) {</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>  <span class="keywordtype">float</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a>, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  <a class="code hl_function" href="namespacetflite.html#a391a5d8e5e1a87759286ead1095a50f4">GetActivationMinMax</a>(Ac, &amp;<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a>, &amp;<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a>);</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacetflite.html#a0738549de81a149ce859d0edd7c31a05">ActivationFunctionWithMinMax</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a>,</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>                                      <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a>);</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>}</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a5462ef7c778d2472287642d9f6276ee6">BiasAndClamp</a>(<span class="keywordtype">float</span> clamp_min, <span class="keywordtype">float</span> clamp_max, <span class="keywordtype">int</span> bias_size,</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>                         <span class="keyword">const</span> <span class="keywordtype">float</span>* bias_data, <span class="keywordtype">int</span> array_size,</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>                         <span class="keywordtype">float</span>* array_data) {</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>  <span class="keywordflow">if</span> (bias_size == 0) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  <span class="comment">// Note: see b/132215220: in May 2019 we thought it would be OK to replace</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  <span class="comment">// this with the Eigen one-liner:</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>  <span class="comment">//   return (array.colwise() + bias).cwiseMin(clamp_max).cwiseMin(clamp_max).</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  <span class="comment">// This turned out to severely regress performance: +4ms (i.e. 8%) on</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  <span class="comment">// MobileNet v2 / 1.0 / 224. So we keep custom NEON code for now.</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a67d8abfffe84d6f96f1886241e903664">TFLITE_DCHECK_EQ</a>((array_size % bias_size), 0);</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="preprocessor">#ifdef USE_NEON</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>  <span class="keywordtype">float</span>* array_ptr = array_data;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>  <span class="keywordtype">float</span>* array_end_ptr = array_ptr + array_size;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>  <span class="keyword">const</span> <span class="keyword">auto</span> clamp_min_vec = vdupq_n_f32(clamp_min);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>  <span class="keyword">const</span> <span class="keyword">auto</span> clamp_max_vec = vdupq_n_f32(clamp_max);</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>  <span class="keywordflow">for</span> (; array_ptr != array_end_ptr; array_ptr += bias_size) {</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="keywordflow">for</span> (; i &lt;= bias_size - 16; i += 16) {</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>      <span class="keyword">auto</span> b0 = vld1q_f32(bias_data + i);</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>      <span class="keyword">auto</span> b1 = vld1q_f32(bias_data + i + 4);</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>      <span class="keyword">auto</span> b2 = vld1q_f32(bias_data + i + 8);</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>      <span class="keyword">auto</span> b3 = vld1q_f32(bias_data + i + 12);</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>      <span class="keyword">auto</span> a0 = vld1q_f32(array_ptr + i);</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>      <span class="keyword">auto</span> a1 = vld1q_f32(array_ptr + i + 4);</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>      <span class="keyword">auto</span> a2 = vld1q_f32(array_ptr + i + 8);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>      <span class="keyword">auto</span> a3 = vld1q_f32(array_ptr + i + 12);</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>      <span class="keyword">auto</span> x0 = vaddq_f32(a0, b0);</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>      <span class="keyword">auto</span> x1 = vaddq_f32(a1, b1);</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>      <span class="keyword">auto</span> x2 = vaddq_f32(a2, b2);</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>      <span class="keyword">auto</span> x3 = vaddq_f32(a3, b3);</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>      x0 = vmaxq_f32(clamp_min_vec, x0);</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>      x1 = vmaxq_f32(clamp_min_vec, x1);</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>      x2 = vmaxq_f32(clamp_min_vec, x2);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>      x3 = vmaxq_f32(clamp_min_vec, x3);</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>      x0 = vminq_f32(clamp_max_vec, x0);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>      x1 = vminq_f32(clamp_max_vec, x1);</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>      x2 = vminq_f32(clamp_max_vec, x2);</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>      x3 = vminq_f32(clamp_max_vec, x3);</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>      vst1q_f32(array_ptr + i, x0);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>      vst1q_f32(array_ptr + i + 4, x1);</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      vst1q_f32(array_ptr + i + 8, x2);</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>      vst1q_f32(array_ptr + i + 12, x3);</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    }</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keywordflow">for</span> (; i &lt;= bias_size - 4; i += 4) {</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>      <span class="keyword">auto</span> <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a> = vld1q_f32(bias_data + i);</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>      <span class="keyword">auto</span> <a class="code hl_variable" href="namespacetflite-camera-button.html#ac1be43aa5f1883983bb8e5bb88cd53a1">a</a> = vld1q_f32(array_ptr + i);</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>      <span class="keyword">auto</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = vaddq_f32(a, <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>);</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>      <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = vmaxq_f32(clamp_min_vec, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>);</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>      <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = vminq_f32(clamp_max_vec, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>);</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>      vst1q_f32(array_ptr + i, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    }</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keywordflow">for</span> (; i &lt; bias_size; i++) {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>      array_ptr[i] = <a class="code hl_function" href="namespacetflite.html#a0738549de81a149ce859d0edd7c31a05">ActivationFunctionWithMinMax</a>(array_ptr[i] + bias_data[i],</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>                                                  clamp_min, clamp_max);</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  }</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span><span class="preprocessor">#else  </span><span class="comment">// not NEON</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> array_offset = 0; array_offset &lt; array_size;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>       array_offset += bias_size) {</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bias_size; i++) {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>      array_data[array_offset + i] = <a class="code hl_function" href="namespacetflite.html#a0738549de81a149ce859d0edd7c31a05">ActivationFunctionWithMinMax</a>(</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>          array_data[array_offset + i] + bias_data[i], clamp_min, clamp_max);</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    }</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  }</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>}</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span><span class="comment">// Single-rounding MultiplyByQuantizedMultiplier</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span><span class="preprocessor">#if TFLITE_SINGLE_ROUNDING</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#a8bf8cda01e9429a8a204886334ce9d24">MultiplyByQuantizedMultiplier</a>(int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>,</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>                                             int32_t quantized_multiplier,</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>                                             <span class="keywordtype">int</span> <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>) {</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(quantized_multiplier &gt;= 0);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(<a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> &gt;= -31 &amp;&amp; <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> &lt;= 30);</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>  <span class="keyword">const</span> int64_t total_shift = 31 - <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <span class="keyword">const</span> int64_t round = <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(1) &lt;&lt; (total_shift - 1);</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>  int64_t <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(quantized_multiplier) + round;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> &gt;&gt; total_shift;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span> </div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(<a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> &gt;= std::numeric_limits&lt;int32_t&gt;::min() &amp;&amp;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> &lt;= std::numeric_limits&lt;int32_t&gt;::max());</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>);</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>}</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#a871ed2eb866b2abcfa5d3ea59f8115cc">MultiplyByQuantizedMultiplierSmallerThanOneExp</a>(</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, int32_t quantized_multiplier, <span class="keywordtype">int</span> <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>) {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a153a4c7bc866139ad88ebf7cb7f4c400">TFLITE_DCHECK_LE</a>(<a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>, 0);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacetflite.html#a8bf8cda01e9429a8a204886334ce9d24">MultiplyByQuantizedMultiplier</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, quantized_multiplier, <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>);</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>}</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#af6e41c0b657bdbaddfb16fa6949268b4">MultiplyByQuantizedMultiplierGreaterThanOne</a>(</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, int32_t quantized_multiplier, <span class="keywordtype">int</span> <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>) {</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#ae45cce3e44eefbb5a09cea1b3baba0e3">TFLITE_DCHECK_GE</a>(<a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>, 0);</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacetflite.html#a8bf8cda01e9429a8a204886334ce9d24">MultiplyByQuantizedMultiplier</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, quantized_multiplier, <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>);</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>}</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#a8bf8cda01e9429a8a204886334ce9d24">MultiplyByQuantizedMultiplier</a>(int64_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>,</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                                             int32_t quantized_multiplier,</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                                             <span class="keywordtype">int</span> <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>) {</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>  <span class="comment">// Inputs:</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  <span class="comment">// - quantized_multiplier has fixed point at bit 31</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>  <span class="comment">// - shift is -31 to +7 (negative for right shift)</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  <span class="comment">//</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  <span class="comment">// Assumptions: The following input ranges are assumed</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  <span class="comment">// - quantize_scale&gt;=0  (the usual range is (1&lt;&lt;30) to (1&gt;&gt;31)-1)</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <span class="comment">// - scaling is chosen so final scaled result fits in int32_t</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  <span class="comment">// - input x is in the range -(1&lt;&lt;47) &lt;= x &lt; (1&lt;&lt;47)</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(quantized_multiplier &gt;= 0);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(<a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> &gt;= -31 &amp;&amp; <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> &lt; 8);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &gt;= -(<span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(1) &lt;&lt; 47) &amp;&amp;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>                <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &lt; (<span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(1) &lt;&lt; 47));</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>  <span class="keyword">const</span> int32_t reduced_multiplier =</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>      (quantized_multiplier &lt; 0x7FFF0000)</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>          ? ((quantized_multiplier + (1 &lt;&lt; 15)) &gt;&gt; 16)</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>          : 0x7FFF;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  <span class="keyword">const</span> int64_t total_shift = 15 - <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  <span class="keyword">const</span> int64_t round = <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(1) &lt;&lt; (total_shift - 1);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  int64_t <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * <span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(reduced_multiplier) + round;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> &gt;&gt; total_shift;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(<a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> &gt;= std::numeric_limits&lt;int32_t&gt;::min() &amp;&amp;</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>                <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> &lt;= std::numeric_limits&lt;int32_t&gt;::max());</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>);</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>}</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span> </div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span><span class="preprocessor">#ifdef USE_NEON</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span><span class="keyword">inline</span> int32x4x4_t MultiplyByQuantizedMultiplier4Rows(</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    int32x4x4_t input_val, int32_t quantized_multiplier, <span class="keywordtype">int</span> <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>) {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(quantized_multiplier &gt;= 0);</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> right_shift = std::min(-1, <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a> = <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> - right_shift;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>  <span class="keyword">const</span> int32x4_t multiplier_dup = vdupq_n_s32(quantized_multiplier);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  <span class="keyword">const</span> int32x4_t left_shift_dup = vdupq_n_s32(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a>);</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>  <span class="keyword">const</span> int32x4_t right_shift_dup = vdupq_n_s32(right_shift);</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  int32x4x4_t <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>.val[0] = vrshlq_s32(</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>      vqdmulhq_s32(vshlq_s32(input_val.val[0], left_shift_dup), multiplier_dup),</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>      right_shift_dup);</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span> </div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>.val[1] = vrshlq_s32(</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>      vqdmulhq_s32(vshlq_s32(input_val.val[1], left_shift_dup), multiplier_dup),</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>      right_shift_dup);</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>.val[2] = vrshlq_s32(</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>      vqdmulhq_s32(vshlq_s32(input_val.val[2], left_shift_dup), multiplier_dup),</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>      right_shift_dup);</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>.val[3] = vrshlq_s32(</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>      vqdmulhq_s32(vshlq_s32(input_val.val[3], left_shift_dup), multiplier_dup),</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>      right_shift_dup);</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>}</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><span class="preprocessor">#endif  </span><span class="comment">// USE_NEON</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span><span class="comment">// Double-rounding MultiplyByQuantizedMultiplier</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#a871ed2eb866b2abcfa5d3ea59f8115cc">MultiplyByQuantizedMultiplierSmallerThanOneExp</a>(</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>    int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, int32_t quantized_multiplier, <span class="keywordtype">int</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a>) {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>  <span class="keyword">using </span><a class="code hl_function" href="namespacegemmlowp.html#a7d5169f4bc71a22c6a5adf9c1b73267d">gemmlowp::RoundingDivideByPOT</a>;</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  <span class="keyword">using </span><a class="code hl_function" href="namespacegemmlowp.html#a7ef1c7121f41059f08e28aad77e2736f">gemmlowp::SaturatingRoundingDoublingHighMul</a>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacegemmlowp.html#a7d5169f4bc71a22c6a5adf9c1b73267d">RoundingDivideByPOT</a>(</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>      <a class="code hl_function" href="namespacegemmlowp.html#a7ef1c7121f41059f08e28aad77e2736f">SaturatingRoundingDoublingHighMul</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, quantized_multiplier), -<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a>);</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>}</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#af6e41c0b657bdbaddfb16fa6949268b4">MultiplyByQuantizedMultiplierGreaterThanOne</a>(</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, int32_t quantized_multiplier, <span class="keywordtype">int</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a>) {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  <span class="keyword">using </span><a class="code hl_function" href="namespacegemmlowp.html#a7ef1c7121f41059f08e28aad77e2736f">gemmlowp::SaturatingRoundingDoublingHighMul</a>;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacegemmlowp.html#a7ef1c7121f41059f08e28aad77e2736f">SaturatingRoundingDoublingHighMul</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * (1 &lt;&lt; <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a>),</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                                           quantized_multiplier);</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>}</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span> </div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#a8bf8cda01e9429a8a204886334ce9d24">MultiplyByQuantizedMultiplier</a>(int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>,</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>                                             int32_t quantized_multiplier,</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                                             <span class="keywordtype">int</span> <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>) {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>  <span class="keyword">using </span><a class="code hl_function" href="namespacegemmlowp.html#a7d5169f4bc71a22c6a5adf9c1b73267d">gemmlowp::RoundingDivideByPOT</a>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  <span class="keyword">using </span><a class="code hl_function" href="namespacegemmlowp.html#a7ef1c7121f41059f08e28aad77e2736f">gemmlowp::SaturatingRoundingDoublingHighMul</a>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a> = <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> &gt; 0 ? <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> : 0;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>  <span class="keywordtype">int</span> right_shift = <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> &gt; 0 ? 0 : -<a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacegemmlowp.html#a7d5169f4bc71a22c6a5adf9c1b73267d">RoundingDivideByPOT</a>(<a class="code hl_function" href="namespacegemmlowp.html#a7ef1c7121f41059f08e28aad77e2736f">SaturatingRoundingDoublingHighMul</a>(</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                                 <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * (1 &lt;&lt; <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a>), quantized_multiplier),</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>                             right_shift);</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>}</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span> </div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#a8bf8cda01e9429a8a204886334ce9d24">MultiplyByQuantizedMultiplier</a>(int64_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>,</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                                             int32_t quantized_multiplier,</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                                             <span class="keywordtype">int</span> <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  <span class="comment">// Inputs:</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>  <span class="comment">// - quantized_multiplier has fixed point at bit 31</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>  <span class="comment">// - shift is -31 to +7 (negative for right shift)</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>  <span class="comment">//</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>  <span class="comment">// Assumptions: The following input ranges are assumed</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>  <span class="comment">// - quantize_scale&gt;=0  (the usual range is (1&lt;&lt;30) to (1&gt;&gt;31)-1)</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>  <span class="comment">// - scaling is chosen so final scaled result fits in int32_t</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>  <span class="comment">// - input x is in the range -(1&lt;&lt;47) &lt;= x &lt; (1&lt;&lt;47)</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>  <a class="code hl_function" href="ei__aligned__malloc_8h.html#a95cd4fa643ce672b347744b35c5b7056">assert</a>(quantized_multiplier &gt;= 0);</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>  <a class="code hl_function" href="ei__aligned__malloc_8h.html#a95cd4fa643ce672b347744b35c5b7056">assert</a>(<a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> &gt;= -31 &amp;&amp; <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a> &lt; 8);</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>  <a class="code hl_function" href="ei__aligned__malloc_8h.html#a95cd4fa643ce672b347744b35c5b7056">assert</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &gt;= -(<span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(1) &lt;&lt; 47) &amp;&amp;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>         <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &lt; (<span class="keyword">static_cast&lt;</span>int64_t<span class="keyword">&gt;</span>(1) &lt;&lt; 47));</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span> </div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  int32_t reduced_multiplier = (quantized_multiplier &lt; 0x7FFF0000)</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>                                   ? ((quantized_multiplier + (1 &lt;&lt; 15)) &gt;&gt; 16)</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>                                   : 0x7FFF;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>  <span class="keywordtype">int</span> total_shift = 15 - <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>  <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = (<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * (int64_t)reduced_multiplier) + ((int64_t)1 &lt;&lt; (total_shift - 1));</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>  int32_t <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &gt;&gt; total_shift;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>}</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span> </div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span><span class="preprocessor">#ifdef USE_NEON</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span><span class="comment">// Round uses ARM&#39;s rounding shift right.</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="keyword">inline</span> int32x4x4_t MultiplyByQuantizedMultiplier4Rows(</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    int32x4x4_t input_val, int32_t quantized_multiplier, <span class="keywordtype">int</span> <a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>) {</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a> = std::max(<a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>, 0);</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> right_shift = std::min(<a class="code hl_variable" href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a>, 0);</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>  int32x4x4_t <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  int32x4_t multiplier_dup = vdupq_n_s32(quantized_multiplier);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  int32x4_t left_shift_dup = vdupq_n_s32(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a>);</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  int32x4_t right_shift_dup = vdupq_n_s32(right_shift);</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span> </div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>.val[0] =</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>      vrshlq_s32(vqrdmulhq_s32(vshlq_s32(input_val.val[0], left_shift_dup),</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>                               multiplier_dup),</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>                 right_shift_dup);</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>.val[1] =</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>      vrshlq_s32(vqrdmulhq_s32(vshlq_s32(input_val.val[1], left_shift_dup),</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>                               multiplier_dup),</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                 right_shift_dup);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span> </div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>.val[2] =</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>      vrshlq_s32(vqrdmulhq_s32(vshlq_s32(input_val.val[2], left_shift_dup),</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                               multiplier_dup),</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                 right_shift_dup);</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span> </div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>.val[3] =</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>      vrshlq_s32(vqrdmulhq_s32(vshlq_s32(input_val.val[3], left_shift_dup),</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>                               multiplier_dup),</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                 right_shift_dup);</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>}</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span><span class="preprocessor">#endif  </span><span class="comment">// USE_NEON</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span><span class="preprocessor">#endif  </span><span class="comment">// TFLITE_SINGLE_ROUNDING</span></div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span><span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite.html#a90b39c749aaf4b036ab5268d03fed4b5">CountLeadingZeros</a>(T integer_input) {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>  <span class="keyword">static_assert</span>(std::is_unsigned&lt;T&gt;::value,</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                <span class="stringliteral">&quot;Only unsigned integer types handled.&quot;</span>);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span><span class="preprocessor">#if defined(__GNUC__)</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  <span class="keywordflow">return</span> integer_input ? __builtin_clz(integer_input)</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>                       : std::numeric_limits&lt;T&gt;::digits;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>  <span class="keywordflow">if</span> (integer_input == 0) {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keywordflow">return</span> std::numeric_limits&lt;T&gt;::digits;</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>  }</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>  <span class="keyword">const</span> T one_in_leading_positive = <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(1)</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                                    &lt;&lt; (std::numeric_limits&lt;T&gt;::digits - 1);</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>  <span class="keywordtype">int</span> leading_zeros = 0;</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>  <span class="keywordflow">while</span> (integer_input &lt; one_in_leading_positive) {</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    integer_input &lt;&lt;= 1;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    ++leading_zeros;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>  }</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>  <span class="keywordflow">return</span> leading_zeros;</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>}</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span> </div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span><span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite.html#ac4374f7a31a1a872479fb969c365de70">CountLeadingSignBits</a>(T integer_input) {</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>  <span class="keyword">static_assert</span>(std::is_signed&lt;T&gt;::value, <span class="stringliteral">&quot;Only signed integer types handled.&quot;</span>);</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span><span class="preprocessor">#if defined(__GNUC__) &amp;&amp; !defined(__clang__)</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>  <span class="keywordflow">return</span> integer_input ? __builtin_clrsb(integer_input)</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>                       : std::numeric_limits&lt;T&gt;::digits;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>  <span class="keyword">using </span>U = <span class="keyword">typename</span> std::make_unsigned&lt;T&gt;::type;</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>  <span class="keywordflow">return</span> integer_input &gt;= 0</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>             ? <a class="code hl_function" href="namespacetflite.html#a90b39c749aaf4b036ab5268d03fed4b5">CountLeadingZeros</a>(<span class="keyword">static_cast&lt;</span>U<span class="keyword">&gt;</span>(integer_input)) - 1</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>         : integer_input != std::numeric_limits&lt;T&gt;::min()</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>             ? <a class="code hl_function" href="namespacetflite.html#a90b39c749aaf4b036ab5268d03fed4b5">CountLeadingZeros</a>(2 * <span class="keyword">static_cast&lt;</span>U<span class="keyword">&gt;</span>(-integer_input) - 1)</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>             : 0;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>}</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span> </div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span><span class="comment">// Use &quot;count leading zeros&quot; helper functions to do a fast Floor(log_2(x)).</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Integer&gt;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span><span class="keyword">inline</span> Integer <a class="code hl_function" href="namespacetflite.html#a43de35b04f739a88bca00031e19ddc55">FloorLog2</a>(Integer n) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>  <span class="keyword">static_assert</span>(std::is_integral&lt;Integer&gt;::value, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>  <span class="keyword">static_assert</span>(std::is_signed&lt;Integer&gt;::value, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>  <span class="keyword">static_assert</span>(<span class="keyword">sizeof</span>(Integer) == 4 || <span class="keyword">sizeof</span>(Integer) == 8, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aa1fb5f50e87b3ea5035ce24090d458d4">TFLITE_CHECK_GT</a>(n, 0);</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>  <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(Integer) == 4) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="keywordflow">return</span> 30 - <a class="code hl_function" href="namespacetflite.html#ac4374f7a31a1a872479fb969c365de70">CountLeadingSignBits</a>(n);</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>  } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="keywordflow">return</span> 62 - <a class="code hl_function" href="namespacetflite.html#ac4374f7a31a1a872479fb969c365de70">CountLeadingSignBits</a>(n);</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>  }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>}</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span> </div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span><span class="keyword">namespace </span>detail {</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span> </div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span><span class="comment">// LUTPopulate takes an optional type-erased transform_params to allow passing</span></div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span><span class="comment">// extra parameters to the transform function pointer. const void* is used</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span><span class="comment">// instead of std::function to be compatible with TFLite Micro</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> FloatT, <span class="keyword">typename</span> Func&gt;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span><span class="keyword">inline</span> <span class="keyword">typename</span> std::enable_if&lt;std::is_same&lt;Func, FloatT (*)(FloatT)&gt;<a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">::value</a>,</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>                               FloatT&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span><a class="code hl_function" href="namespacetflite_1_1detail.html#a00eb2d8d8766161e3d00553394071031">LUTTransform</a>(Func transform, <span class="keyword">const</span> <span class="keywordtype">void</span>* <span class="comment">/*transform_params*/</span>, FloatT <a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>) {</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>  <span class="keyword">static_assert</span>(std::is_floating_point&lt;FloatT&gt;::value,</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>                <span class="stringliteral">&quot;FloatT must be a floating-point type.&quot;</span>);</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>  <span class="keywordflow">return</span> transform(<a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>);</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>}</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> FloatT, <span class="keyword">typename</span> Func&gt;</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span><span class="keyword">inline</span> <span class="keyword">typename</span> std::enable_if&lt;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    std::is_same&lt;Func, FloatT (*)(FloatT, <span class="keyword">const</span> <span class="keywordtype">void</span>*)&gt;<a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">::value</a>, FloatT&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span><a class="code hl_function" href="namespacetflite_1_1detail.html#a00eb2d8d8766161e3d00553394071031">LUTTransform</a>(Func transform, <span class="keyword">const</span> <span class="keywordtype">void</span>* transform_params, FloatT <a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>) {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  <span class="keyword">static_assert</span>(std::is_floating_point&lt;FloatT&gt;::value,</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>                <span class="stringliteral">&quot;FloatT must be a floating-point type.&quot;</span>);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>  <span class="keywordflow">return</span> transform(<a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>, transform_params);</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>}</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span> </div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span><span class="comment">// Use the same LUT generation code for both uint8_t and int8_t. Int8_t indexes</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span><span class="comment">// will be directly casted to uint8_t, the int8 LUT will thus be ordered as [0,</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span><span class="comment">// 1, ..., 127, -128, ..., -2, -1] instead of [-128, -127, ..., -1, 0, 1, ...,</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span><span class="comment">// 126, 127].</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T, <span class="keyword">typename</span> Func&gt;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1detail.html#adbde00855839620ca0835ba3d5e3c739">LUTPopulateInt8</a>(<span class="keywordtype">float</span> input_scale, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>,</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>                            <span class="keywordtype">float</span> <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>,</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>                            Func transform, <span class="keyword">const</span> <span class="keywordtype">void</span>* transform_params,</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>                            T* lut) {</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  <span class="keyword">static_assert</span>(</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>      std::is_same&lt;T, uint8_t&gt;::value || std::is_same&lt;T, int8_t&gt;::value,</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>      <span class="stringliteral">&quot;T must be an uint8 or int8 type.&quot;</span>);</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>  uint8_t* lut_uint8 = <span class="keyword">reinterpret_cast&lt;</span>uint8_t*<span class="keyword">&gt;</span>(lut);</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>  <span class="keyword">const</span> <span class="keywordtype">float</span> inverse_scale = 1 / <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>  int32_t maxval = std::numeric_limits&lt;T&gt;::max();</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>  int32_t minval = std::numeric_limits&lt;T&gt;::min();</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>  <span class="keywordflow">for</span> (int32_t val = minval; val &lt;= maxval; ++val) {</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> dequantized = input_scale * (val - <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>);</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> transformed =</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <a class="code hl_function" href="namespacetflite_1_1detail.html#a00eb2d8d8766161e3d00553394071031">LUTTransform</a>(transform, transform_params, dequantized);</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> rescaled = TfLiteRound(transformed * inverse_scale);</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <span class="keyword">const</span> int32_t quantized =</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(rescaled + <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>);</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>    lut_uint8[<span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(val))] = <span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>        <span class="keyword">static_cast&lt;</span>T<span class="keyword">&gt;</span>(std::max(std::min(maxval, quantized), minval)));</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>  }</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>}</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span> </div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span><span class="comment">// Keep floating-point type configurable for backward compatibility. float</span></div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span><span class="comment">// should be used for FloatT by default.</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> FloatT, <span class="keyword">typename</span> Func&gt;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite_1_1detail.html#a0e5d22cc0481ea2758802f49a7c6b2cd">LUTPopulateInt16</a>(FloatT input_scale, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>,</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                             FloatT <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>,</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>                             Func transform, <span class="keyword">const</span> <span class="keywordtype">void</span>* transform_params,</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>                             int16_t* lut) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>  <span class="keyword">static_assert</span>(std::is_floating_point&lt;FloatT&gt;::value,</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>                <span class="stringliteral">&quot;FloatT must be a floating-point type.&quot;</span>);</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>  <span class="keyword">const</span> FloatT input_min =</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>      input_scale * (std::numeric_limits&lt;int16_t&gt;::min() - <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>);</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  <span class="keyword">const</span> FloatT input_max =</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>      input_scale * (std::numeric_limits&lt;int16_t&gt;::max() - <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>);</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>  <span class="keyword">const</span> FloatT output_min =</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>      <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a> * (std::numeric_limits&lt;int16_t&gt;::min() - <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>);</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>  <span class="keyword">const</span> FloatT output_max =</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>      <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a> * (std::numeric_limits&lt;int16_t&gt;::max() - <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>);</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span> </div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> nb_steps = 512;</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>  <span class="keyword">const</span> FloatT step = (input_max - input_min) / nb_steps;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>  <span class="keyword">const</span> FloatT half_step = step / 2;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>  <span class="keyword">const</span> FloatT output_scaling_inv =</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>      <span class="keyword">static_cast&lt;</span>FloatT<span class="keyword">&gt;</span>(std::numeric_limits&lt;int16_t&gt;::max() -</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>                          std::numeric_limits&lt;int16_t&gt;::min() + 1) /</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>      (output_max - output_min);</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>  <span class="keyword">const</span> FloatT table_min =</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>      <span class="keyword">static_cast&lt;</span>FloatT<span class="keyword">&gt;</span>(std::numeric_limits&lt;int16_t&gt;::min());</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>  <span class="keyword">const</span> FloatT table_max =</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>      <span class="keyword">static_cast&lt;</span>FloatT<span class="keyword">&gt;</span>(std::numeric_limits&lt;int16_t&gt;::max());</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span> </div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nb_steps; i++) {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>    <span class="keyword">const</span> FloatT val =</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>        <a class="code hl_function" href="namespacetflite_1_1detail.html#a00eb2d8d8766161e3d00553394071031">LUTTransform&lt;FloatT&gt;</a>(transform, transform_params, input_min + i * step);</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <span class="keyword">const</span> FloatT val_midpoint = <a class="code hl_function" href="namespacetflite_1_1detail.html#a00eb2d8d8766161e3d00553394071031">LUTTransform&lt;FloatT&gt;</a>(</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        transform, transform_params, input_min + i * step + half_step);</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    <span class="keyword">const</span> FloatT val_next = <a class="code hl_function" href="namespacetflite_1_1detail.html#a00eb2d8d8766161e3d00553394071031">LUTTransform&lt;FloatT&gt;</a>(transform, transform_params,</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>                                                 input_min + (i + 1) * step);</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span> </div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    <span class="keyword">const</span> FloatT sample_val = TfLiteRound(val * output_scaling_inv);</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="keyword">const</span> FloatT midpoint_interp_val =</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        TfLiteRound((val_next * output_scaling_inv +</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                     TfLiteRound(val * output_scaling_inv)) /</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                    2);</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>    <span class="keyword">const</span> FloatT midpoint_val = TfLiteRound(val_midpoint * output_scaling_inv);</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>    <span class="keyword">const</span> FloatT midpoint_err = midpoint_interp_val - midpoint_val;</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>    <span class="keyword">const</span> FloatT bias = TfLiteRound(midpoint_err / 2);</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    lut[i] = <span class="keyword">static_cast&lt;</span>int16_t<span class="keyword">&gt;</span>(std::min&lt;FloatT&gt;(</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>        std::max&lt;FloatT&gt;(sample_val - bias, table_min), table_max));</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>  }</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span> </div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>  lut[nb_steps] = <span class="keyword">static_cast&lt;</span>int16_t<span class="keyword">&gt;</span>(std::min&lt;FloatT&gt;(</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>      std::max&lt;FloatT&gt;(TfLiteRound(<a class="code hl_function" href="namespacetflite_1_1detail.html#a00eb2d8d8766161e3d00553394071031">LUTTransform&lt;FloatT&gt;</a>(</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>                                       transform, transform_params, input_max) *</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>                                   output_scaling_inv),</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>                       table_min),</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>      table_max));</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>}</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>}  <span class="comment">// namespace detail</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span> </div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span><span class="keyword">inline</span> <span class="keyword">typename</span> std::enable_if&lt;std::is_same&lt;T, uint8_t&gt;::value ||</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>                                   std::is_same&lt;T, int8_t&gt;::value,</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>                               <span class="keywordtype">void</span>&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span><a class="code hl_function" href="namespacetflite.html#a9adbebe0595b9401865a5a828af0dd73">LUTPopulate</a>(<span class="keywordtype">float</span> input_scale, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>            int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, <span class="keywordtype">float</span> (*transform)(<span class="keywordtype">float</span>), T* lut) {</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>  <a class="code hl_function" href="namespacetflite_1_1detail.html#adbde00855839620ca0835ba3d5e3c739">detail::LUTPopulateInt8</a>(input_scale, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>                          <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, transform, <span class="keyword">nullptr</span>, lut);</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>}</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span> </div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span><span class="keyword">inline</span> <span class="keyword">typename</span> std::enable_if&lt;std::is_same&lt;T, uint8_t&gt;::value ||</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>                                   std::is_same&lt;T, int8_t&gt;::value,</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>                               <span class="keywordtype">void</span>&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span><a class="code hl_function" href="namespacetflite.html#a9adbebe0595b9401865a5a828af0dd73">LUTPopulate</a>(<span class="keywordtype">float</span> input_scale, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>            int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, <span class="keywordtype">float</span> (*transform)(<span class="keywordtype">float</span>, <span class="keyword">const</span> <span class="keywordtype">void</span>*),</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>            <span class="keyword">const</span> <span class="keywordtype">void</span>* transform_params, T* lut) {</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>  <a class="code hl_function" href="namespacetflite_1_1detail.html#adbde00855839620ca0835ba3d5e3c739">detail::LUTPopulateInt8</a>(input_scale, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>                          <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, transform, transform_params, lut);</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>}</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span> </div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span><span class="keyword">inline</span> <span class="keyword">typename</span> std::enable_if&lt;std::is_same&lt;T, int16_t&gt;::value, <span class="keywordtype">void</span>&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span><a class="code hl_function" href="namespacetflite.html#a9adbebe0595b9401865a5a828af0dd73">LUTPopulate</a>(<span class="keywordtype">float</span> input_scale, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>            int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, <span class="keywordtype">float</span> (*transform)(<span class="keywordtype">float</span>), T* lut) {</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>  <a class="code hl_function" href="namespacetflite_1_1detail.html#a0e5d22cc0481ea2758802f49a7c6b2cd">detail::LUTPopulateInt16&lt;float&gt;</a>(input_scale, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>                                  <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, transform, <span class="keyword">nullptr</span>, lut);</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>}</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span><span class="keyword">inline</span> <span class="keyword">typename</span> std::enable_if&lt;std::is_same&lt;T, int16_t&gt;::value, <span class="keywordtype">void</span>&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span><a class="code hl_function" href="namespacetflite.html#a9adbebe0595b9401865a5a828af0dd73">LUTPopulate</a>(<span class="keywordtype">float</span> input_scale, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <span class="keywordtype">float</span> <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>            int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, <span class="keywordtype">float</span> (*transform)(<span class="keywordtype">float</span>, <span class="keyword">const</span> <span class="keywordtype">void</span>*),</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>            <span class="keyword">const</span> <span class="keywordtype">void</span>* transform_params, T* lut) {</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>  <a class="code hl_function" href="namespacetflite_1_1detail.html#a0e5d22cc0481ea2758802f49a7c6b2cd">detail::LUTPopulateInt16&lt;float&gt;</a>(input_scale, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>                                  <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, transform,</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>                                  transform_params, lut);</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>}</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span><span class="comment">// Deprecated, avoid usage and prefer the float version. Kept for</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span><span class="comment">// backward-compatiblity.</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span><span class="keyword">inline</span> <span class="keyword">typename</span> std::enable_if&lt;std::is_same&lt;T, int16_t&gt;::value, <span class="keywordtype">void</span>&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a></div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span><a class="code hl_function" href="namespacetflite.html#a9adbebe0595b9401865a5a828af0dd73">LUTPopulate</a>(<span class="keywordtype">double</span> input_scale, int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <span class="keywordtype">double</span> <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>            int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, <span class="keywordtype">double</span> (*transform)(<span class="keywordtype">double</span>), T* lut) {</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>  <a class="code hl_function" href="namespacetflite_1_1detail.html#a0e5d22cc0481ea2758802f49a7c6b2cd">detail::LUTPopulateInt16&lt;double&gt;</a>(input_scale, <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a>, <a class="code hl_variable" href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a>,</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>                                   <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a>, transform, <span class="keyword">nullptr</span>, lut);</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>}</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span> </div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span><span class="comment">// The size of the LUT depends on the type of input. For uint8 and int8 inputs a</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span><span class="comment">// simple 256 entries LUT is used. For int16 inputs the high 9 bits are used for</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span><span class="comment">// indexing and the 7 remaining bits are used for interpolation. We thus use a</span></div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span><span class="comment">// 513-entries LUT for int16 cases, 512 for the 9-bit indexing and 1 extra entry</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span><span class="comment">// to interpolate the last value.</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite.html#ab27f8efe68754a68d65fa1100cd645bb">LUTSize</a>() {</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>  <span class="keyword">static_assert</span>(std::is_same&lt;T, uint8_t&gt;::value ||</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                    std::is_same&lt;T, int8_t&gt;::value ||</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>                    std::is_same&lt;T, int16_t&gt;::value,</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>                <span class="stringliteral">&quot;Only LUTs with uint8, int8 or int16 inputs are supported.&quot;</span>);</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>  <span class="comment">// As per c++11: constexpr methods cannot have more than one return statement.</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>  <span class="keywordflow">return</span> (std::is_same&lt;T, uint8_t&gt;::value || std::is_same&lt;T, int8_t&gt;::value)</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>             ? 256</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>             : 513;</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>}</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span> </div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span><span class="comment">// int16_t -&gt; int16_t table lookup with interpolation</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span><span class="comment">// LUT must have 513 values</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span><span class="keyword">inline</span> int16_t <a class="code hl_function" href="namespacetflite.html#af3cb549a185a8970419fc95354980452">LUTLookup</a>(int16_t <a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>, <span class="keyword">const</span> int16_t* lut) {</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>  <span class="comment">// 512 base values, lut[513] is only used to calculate the slope</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>  <span class="keyword">const</span> uint16_t <a class="code hl_variable" href="namespace_arduino_tinyml_workshop.html#a230c8eac09a3338f6adcc073d97bc4a1">index</a> = <span class="keyword">static_cast&lt;</span>uint16_t<span class="keyword">&gt;</span>(256 + (<a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a> &gt;&gt; 7));</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>  <a class="code hl_function" href="ei__aligned__malloc_8h.html#a95cd4fa643ce672b347744b35c5b7056">assert</a>(index &lt; 512 &amp;&amp; <span class="stringliteral">&quot;LUT index out of range.&quot;</span>);</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>  <span class="keyword">const</span> int16_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcaf138809236f667e9686fdd4aaf17705.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a> &amp; 0x7f;</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span> </div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>  <span class="comment">// Base and slope are Q0.x</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  <span class="keyword">const</span> int16_t base = lut[<a class="code hl_variable" href="namespace_arduino_tinyml_workshop.html#a230c8eac09a3338f6adcc073d97bc4a1">index</a>];</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>  <span class="keyword">const</span> int16_t slope = lut[<a class="code hl_variable" href="namespace_arduino_tinyml_workshop.html#a230c8eac09a3338f6adcc073d97bc4a1">index</a> + 1] - lut[<a class="code hl_variable" href="namespace_arduino_tinyml_workshop.html#a230c8eac09a3338f6adcc073d97bc4a1">index</a>];</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span> </div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>  <span class="comment">// Q0.x * Q0.7 = Q0.(x + 7)</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>  <span class="comment">// Round and convert from Q0.(x + 7) to Q0.x</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> delta = (slope * <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcaf138809236f667e9686fdd4aaf17705.html#aed7ea92f45bd273dde380a45ddced592">offset</a> + 64) &gt;&gt; 7;</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span> </div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>  <span class="comment">// Q0.15 + Q0.15</span></div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>int16_t<span class="keyword">&gt;</span>(base + delta);</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>}</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span> </div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span><span class="comment">// int8_t -&gt; int8_t table lookup without interpolation</span></div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span><span class="comment">// LUT must have 256 values</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span><span class="comment">// LUTPopulate&lt;int8_t&gt; has ordered the LUT so that indexing it with an</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span><span class="comment">// int8_t is just done by casting it to an uint8_t.</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span><span class="keyword">inline</span> int8_t <a class="code hl_function" href="namespacetflite.html#af3cb549a185a8970419fc95354980452">LUTLookup</a>(int8_t <a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>, <span class="keyword">const</span> int8_t* lut) {</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>  <span class="keywordflow">return</span> lut[<span class="keyword">static_cast&lt;</span>uint8_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>)];</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>}</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span> </div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span><span class="comment">// uint8_t -&gt; uint8_t table lookup without interpolation</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span><span class="comment">// LUT must have 256 values</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span><span class="keyword">inline</span> uint8_t <a class="code hl_function" href="namespacetflite.html#af3cb549a185a8970419fc95354980452">LUTLookup</a>(uint8_t <a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>, <span class="keyword">const</span> uint8_t* lut) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>  <span class="keywordflow">return</span> lut[<a class="code hl_variable" href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a>];</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>}</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span> </div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span><span class="comment">// Table of sigmoid(i/24) at 0.16 format - 256 elements.</span></div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span> </div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span><span class="comment">// We use combined sigmoid and tanh look-up table, since</span></div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span><span class="comment">// tanh(x) = 2*sigmoid(2*x) -1.</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span><span class="comment">// Both functions are symmetric, so the LUT table is only needed</span></div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span><span class="comment">// for the absolute value of the input.</span></div>
<div class="foldopen" id="foldopen00598" data-start="{" data-end="};">
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno"><a class="line" href="namespacetflite.html#aa8188a5dba0126c490b5531d2e6f9101">  598</a></span><span class="keyword">static</span> <span class="keyword">const</span> uint16_t <a class="code hl_variable" href="namespacetflite.html#aa8188a5dba0126c490b5531d2e6f9101">sigmoid_table_uint16</a>[256] = {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    32768, 33451, 34133, 34813, 35493, 36169, 36843, 37513, 38180, 38841, 39498,</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    40149, 40794, 41432, 42064, 42688, 43304, 43912, 44511, 45102, 45683, 46255,</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>    46817, 47369, 47911, 48443, 48964, 49475, 49975, 50464, 50942, 51409, 51865,</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    52311, 52745, 53169, 53581, 53983, 54374, 54755, 55125, 55485, 55834, 56174,</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>    56503, 56823, 57133, 57433, 57724, 58007, 58280, 58544, 58800, 59048, 59288,</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    59519, 59743, 59959, 60168, 60370, 60565, 60753, 60935, 61110, 61279, 61441,</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    61599, 61750, 61896, 62036, 62172, 62302, 62428, 62549, 62666, 62778, 62886,</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    62990, 63090, 63186, 63279, 63368, 63454, 63536, 63615, 63691, 63765, 63835,</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    63903, 63968, 64030, 64090, 64148, 64204, 64257, 64308, 64357, 64405, 64450,</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    64494, 64536, 64576, 64614, 64652, 64687, 64721, 64754, 64786, 64816, 64845,</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>    64873, 64900, 64926, 64950, 64974, 64997, 65019, 65039, 65060, 65079, 65097,</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    65115, 65132, 65149, 65164, 65179, 65194, 65208, 65221, 65234, 65246, 65258,</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    65269, 65280, 65291, 65301, 65310, 65319, 65328, 65337, 65345, 65352, 65360,</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>    65367, 65374, 65381, 65387, 65393, 65399, 65404, 65410, 65415, 65420, 65425,</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    65429, 65433, 65438, 65442, 65445, 65449, 65453, 65456, 65459, 65462, 65465,</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    65468, 65471, 65474, 65476, 65479, 65481, 65483, 65485, 65488, 65489, 65491,</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    65493, 65495, 65497, 65498, 65500, 65501, 65503, 65504, 65505, 65507, 65508,</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    65509, 65510, 65511, 65512, 65513, 65514, 65515, 65516, 65517, 65517, 65518,</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    65519, 65520, 65520, 65521, 65522, 65522, 65523, 65523, 65524, 65524, 65525,</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    65525, 65526, 65526, 65526, 65527, 65527, 65528, 65528, 65528, 65529, 65529,</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    65529, 65529, 65530, 65530, 65530, 65530, 65531, 65531, 65531, 65531, 65531,</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    65532, 65532, 65532, 65532, 65532, 65532, 65533, 65533, 65533, 65533, 65533,</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    65533, 65533, 65533, 65534, 65534, 65534, 65534, 65534, 65534, 65534, 65534,</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    65534, 65534, 65535};</div>
</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span> </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span><span class="comment">// TODO(b/77858996): Add these to gemmlowp.</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> IntegerType&gt;</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>IntegerType <a class="code hl_function" href="namespacetflite.html#a8b76acb41e8e5d68b76cf19ddc112d18">SaturatingAddNonGemmlowp</a>(IntegerType a, IntegerType <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>) {</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>  <span class="keyword">static_assert</span>(std::is_same&lt;IntegerType, void&gt;::value, <span class="stringliteral">&quot;unimplemented&quot;</span>);</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>  <span class="keywordflow">return</span> a;</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>}</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00632" data-start="{" data-end="}">
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno"><a class="line" href="namespacetflite.html#ab0d509dd9f9875653e89d9362fff4f7b">  632</a></span><span class="keyword">inline</span> std::int32_t <a class="code hl_function" href="namespacetflite.html#a8b76acb41e8e5d68b76cf19ddc112d18">SaturatingAddNonGemmlowp</a>(std::int32_t a, std::int32_t <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>) {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>  std::int64_t a64 = a;</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>  std::int64_t b64 = <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>  std::int64_t sum = a64 + b64;</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(std::min(</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>      <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>(std::numeric_limits&lt;std::int32_t&gt;::max()),</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>      std::max(</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>          <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>(std::numeric_limits&lt;std::int32_t&gt;::min()),</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>          sum)));</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>}</div>
</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> tRawType, <span class="keywordtype">int</span> tIntegerBits&gt;</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span><a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;</a> <a class="code hl_function" href="namespacetflite.html#a8b76acb41e8e5d68b76cf19ddc112d18">SaturatingAddNonGemmlowp</a>(</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;</a> a,</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;</a> <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>) {</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classgemmlowp_1_1_fixed_point.html#a9cf050964da422f90d3394604486a19b">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;::FromRaw</a>(</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>      <a class="code hl_function" href="namespacetflite.html#a8b76acb41e8e5d68b76cf19ddc112d18">SaturatingAddNonGemmlowp</a>(a.raw(), <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>.raw()));</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>}</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span> </div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> IntegerType&gt;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>IntegerType <a class="code hl_function" href="namespacetflite.html#a35c6097b2d6d77672a3864ba7086bfaf">SaturatingSub</a>(IntegerType a, IntegerType <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>) {</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>  <span class="keyword">static_assert</span>(std::is_same&lt;IntegerType, void&gt;::value, <span class="stringliteral">&quot;unimplemented&quot;</span>);</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacetflite-camera-button.html#ac1be43aa5f1883983bb8e5bb88cd53a1">a</a>;</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>}</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span> </div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00658" data-start="{" data-end="}">
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno"><a class="line" href="namespacetflite.html#aeb64d690f96ffba18c16a7b56c7324dd">  658</a></span><span class="keyword">inline</span> std::int16_t <a class="code hl_function" href="namespacetflite.html#a35c6097b2d6d77672a3864ba7086bfaf">SaturatingSub</a>(std::int16_t a, std::int16_t <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>) {</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>  std::int32_t a32 = a;</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>  std::int32_t b32 = <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>;</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>  std::int32_t diff = a32 - b32;</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>std::int16_t<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>      std::min(<span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(32767),</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>               std::max(<span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(-32768), diff)));</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>}</div>
</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span> </div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span><span class="keyword">template</span> &lt;&gt;</div>
<div class="foldopen" id="foldopen00668" data-start="{" data-end="}">
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno"><a class="line" href="namespacetflite.html#af62d83df8b0ef7925c7b368dca11ab89">  668</a></span><span class="keyword">inline</span> std::int32_t <a class="code hl_function" href="namespacetflite.html#a35c6097b2d6d77672a3864ba7086bfaf">SaturatingSub</a>(std::int32_t a, std::int32_t <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>) {</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>  std::int64_t a64 = a;</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>  std::int64_t b64 = <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>;</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>  std::int64_t diff = a64 - b64;</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>  <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span>std::int32_t<span class="keyword">&gt;</span>(std::min(</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>      <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>(std::numeric_limits&lt;std::int32_t&gt;::max()),</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>      std::max(</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>          <span class="keyword">static_cast&lt;</span>std::int64_t<span class="keyword">&gt;</span>(std::numeric_limits&lt;std::int32_t&gt;::min()),</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>          diff)));</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>}</div>
</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span> </div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> tRawType, <span class="keywordtype">int</span> tIntegerBits&gt;</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span><a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;</a> <a class="code hl_function" href="namespacetflite.html#a35c6097b2d6d77672a3864ba7086bfaf">SaturatingSub</a>(</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;</a> a,</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;</a> <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>) {</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classgemmlowp_1_1_fixed_point.html#a9cf050964da422f90d3394604486a19b">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;::FromRaw</a>(</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>      <a class="code hl_function" href="namespacetflite.html#a35c6097b2d6d77672a3864ba7086bfaf">SaturatingSub</a>(a.raw(), <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>.raw()));</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>}</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span><span class="comment">// End section to be moved to gemmlowp.</span></div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span> </div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> IntegerType&gt;</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>IntegerType <a class="code hl_function" href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">SaturatingRoundingMultiplyByPOTParam</a>(IntegerType <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <span class="keywordtype">int</span> exponent) {</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>  <span class="keywordflow">if</span> (exponent == 0) {</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>;</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>  }</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>  <span class="keyword">using </span>ScalarIntegerType =</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>      <span class="keyword">typename</span> <a class="code hl_struct" href="structgemmlowp_1_1_fixed_point_raw_type_traits.html">gemmlowp::FixedPointRawTypeTraits&lt;IntegerType&gt;::ScalarRawType</a>;</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>  <span class="keyword">const</span> IntegerType <a class="code hl_define" href="common__functions_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a> =</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>      <a class="code hl_function" href="namespacegemmlowp.html#af414df67b77d1c8673b681247cb6d91d">gemmlowp::Dup&lt;IntegerType&gt;</a>(std::numeric_limits&lt;ScalarIntegerType&gt;::min());</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>  <span class="keyword">const</span> IntegerType <a class="code hl_define" href="common__functions_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a> =</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>      <a class="code hl_function" href="namespacegemmlowp.html#af414df67b77d1c8673b681247cb6d91d">gemmlowp::Dup&lt;IntegerType&gt;</a>(std::numeric_limits&lt;ScalarIntegerType&gt;::max());</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>  <span class="keyword">const</span> <span class="keywordtype">int</span> ScalarIntegerTypeBits = 8 * <span class="keyword">sizeof</span>(ScalarIntegerType);</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span> </div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>  <span class="keyword">const</span> std::int32_t <a class="code hl_variable" href="namespacelayer__by__layer__debugger.html#a17f6459091d8c3d09c744a8208d1a44e">threshold</a> =</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>      ((1 &lt;&lt; (ScalarIntegerTypeBits - 1 - exponent)) - 1);</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>  <span class="keyword">const</span> IntegerType positive_mask =</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>      <a class="code hl_function" href="namespacegemmlowp.html#a1e955db8aed2ffb796737651b688da6f">gemmlowp::MaskIfGreaterThan</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <a class="code hl_function" href="namespacegemmlowp.html#af414df67b77d1c8673b681247cb6d91d">gemmlowp::Dup&lt;IntegerType&gt;</a>(threshold));</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>  <span class="keyword">const</span> IntegerType negative_mask =</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>      <a class="code hl_function" href="namespacegemmlowp.html#a03d0a1a3d2937ae240dc38420e8a4edd">gemmlowp::MaskIfLessThan</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <a class="code hl_function" href="namespacegemmlowp.html#af414df67b77d1c8673b681247cb6d91d">gemmlowp::Dup&lt;IntegerType&gt;</a>(-threshold));</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span> </div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>  IntegerType <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = <a class="code hl_function" href="namespacegemmlowp.html#a980262a3a56242e79e4d8f93dfefd5ae">gemmlowp::ShiftLeft</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, exponent);</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = <a class="code hl_function" href="namespacegemmlowp.html#a9200374a9481b271d4ce140e9a449976">gemmlowp::SelectUsingMask</a>(positive_mask, <a class="code hl_define" href="common__functions_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>);</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>  <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = <a class="code hl_function" href="namespacegemmlowp.html#a9200374a9481b271d4ce140e9a449976">gemmlowp::SelectUsingMask</a>(negative_mask, <a class="code hl_define" href="common__functions_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>, <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>);</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>;</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>}</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span> </div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span><span class="comment">// If we want to leave IntegerBits fixed, then multiplication</span></div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span><span class="comment">// by a power of two has to be saturating/rounding, not exact anymore.</span></div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> tRawType, <span class="keywordtype">int</span> tIntegerBits&gt;</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span><a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;</a></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span><a class="code hl_function" href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">SaturatingRoundingMultiplyByPOTParam</a>(</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;</a> a, <span class="keywordtype">int</span> exponent) {</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="classgemmlowp_1_1_fixed_point.html#a9cf050964da422f90d3394604486a19b">gemmlowp::FixedPoint&lt;tRawType, tIntegerBits&gt;::FromRaw</a>(</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>      <a class="code hl_function" href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">SaturatingRoundingMultiplyByPOTParam</a>(<a class="code hl_variable" href="namespacetflite-camera-button.html#ac1be43aa5f1883983bb8e5bb88cd53a1">a</a>.raw(), exponent));</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>}</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span><span class="comment">// Convert int32_t multiplier to int16_t with rounding.</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#ad9bf84191a47306578085785ee490b83">DownScaleInt32ToInt16Multiplier</a>(int32_t multiplier_int32_t,</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>                                            int16_t* multiplier_int16_t) {</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#ae45cce3e44eefbb5a09cea1b3baba0e3">TFLITE_DCHECK_GE</a>(multiplier_int32_t, 0);</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> int32_t kRoundingOffset = 1 &lt;&lt; 15;</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>  <span class="keywordflow">if</span> (multiplier_int32_t &gt;=</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>      std::numeric_limits&lt;int32_t&gt;::max() - kRoundingOffset) {</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    *multiplier_int16_t = std::numeric_limits&lt;int16_t&gt;::max();</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>  }</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>  <span class="keyword">const</span> int32_t <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> = (multiplier_int32_t + kRoundingOffset) &gt;&gt; 16;</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a153a4c7bc866139ad88ebf7cb7f4c400">TFLITE_DCHECK_LE</a>(<a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> &lt;&lt; 16, multiplier_int32_t + kRoundingOffset);</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#ac8167911bdd7e5400cc62d8dda17ee7d">TFLITE_DCHECK_GT</a>(<a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a> &lt;&lt; 16, multiplier_int32_t - kRoundingOffset);</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>  *multiplier_int16_t = <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>;</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a67d8abfffe84d6f96f1886241e903664">TFLITE_DCHECK_EQ</a>(*multiplier_int16_t, <a class="code hl_variable" href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a>);</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>}</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span> </div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span><span class="comment">// Minimum output bits to accommodate log of maximum input range.  It actually</span></div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span><span class="comment">// does not matter if one considers, say, [-64,64] or [-64,64).</span></div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span><span class="comment">//</span></div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span><span class="comment">// For example, run this through Octave:</span></div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span><span class="comment">// [0:127; ...</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span><span class="comment">//  ceil(log(abs( log(2.^(0:127))+1 ))/log(2)); ...</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span><span class="comment">//  ceil(log(abs( log(2.^(0:127))+1 ))/log(2))]</span></div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span><span class="keyword">constexpr</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite.html#a426a39797b9bebb2f5de430392f47dc4">min_log_x_output_bits</a>(<span class="keywordtype">int</span> input_bits) {</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>  <span class="keywordflow">return</span> input_bits &gt; 90   ? 7</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>         : input_bits &gt; 44 ? 6</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>         : input_bits &gt; 21 ? 5</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>         : input_bits &gt; 10 ? 4</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>         : input_bits &gt; 4  ? 3</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>         : input_bits &gt; 1  ? 2</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>                           : 1;</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>}</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span> </div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span><span class="comment">// Although currently the name of this function says that it cannot handle</span></div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span><span class="comment">// values less than 1, in practice it can handle as low as 1/x_max, where</span></div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span><span class="comment">// x_max is the largest representable input.  In other words, the output range</span></div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span><span class="comment">// is symmetric.</span></div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> OutputIntegerBits, <span class="keywordtype">int</span> InputIntegerBits&gt;</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span><span class="keyword">inline</span> <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;int32_t, OutputIntegerBits&gt;</a></div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span><a class="code hl_function" href="namespacetflite.html#ad7ab248e3acef703efd58fa6b1c89be5">log_x_for_x_greater_than_or_equal_to_1_impl</a>(</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;int32_t, InputIntegerBits&gt;</a> input_val) {</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>  <span class="comment">// assert(__builtin_clz(0u) &gt;= std::numeric_limits&lt;uint32_t&gt;::digits - 1);</span></div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>  <span class="comment">// assert(__builtin_clz(0u) &lt;= std::numeric_limits&lt;uint32_t&gt;::digits);</span></div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>  <span class="keyword">using </span>FixedPoint0 = <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;int32_t, 0&gt;</a>;</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>  <span class="comment">// The reason for accumulating the result with an extra bit of headroom is</span></div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>  <span class="comment">// that z_pow_2_adj * log_2 might be saturated, and adding num_scaled *</span></div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>  <span class="comment">// recip_denom will otherwise introduce an error.</span></div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>  <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">int</span> kAccumIntegerBits = OutputIntegerBits + 1;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>  <span class="keyword">using </span>FixedPointAccum = <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;int32_t, kAccumIntegerBits&gt;</a>;</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span> </div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>  <span class="keyword">const</span> FixedPoint0 log_2 = <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>      FixedPoint0, 1488522236, std::log(2.0));</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>  <span class="keyword">const</span> FixedPoint0 sqrt_sqrt_half = <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>      FixedPoint0, 1805811301, std::sqrt(std::sqrt(0.5)));</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>  <span class="keyword">const</span> FixedPoint0 sqrt_half = <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>      FixedPoint0, 1518500250, std::sqrt(0.5));</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>  <span class="keyword">const</span> FixedPoint0 one_quarter =</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>      <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(FixedPoint0, 536870912, 1.0 / 4.0);</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span> </div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>  <span class="keyword">const</span> FixedPoint0 alpha_n = <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>      FixedPoint0, 117049297, 11.0 / 240.0 * std::sqrt(std::sqrt(2.0)));</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>  <span class="keyword">const</span> FixedPoint0 alpha_d = <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>      FixedPoint0, 127690142, 1.0 / 20.0 * std::sqrt(std::sqrt(2.0)));</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>  <span class="keyword">const</span> FixedPoint0 alpha_i = <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>      FixedPoint0, 1057819769,</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>      2.0 / std::sqrt(std::sqrt(2.0)) - std::sqrt(std::sqrt(2.0)));</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>  <span class="keyword">const</span> FixedPoint0 alpha_f = <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>      FixedPoint0, 638450708, 1.0 / 4.0 * std::sqrt(std::sqrt(2.0)));</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span> </div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>  <span class="keyword">const</span> FixedPointAccum shifted_quarter =</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>      <a class="code hl_function" href="namespacegemmlowp.html#a3187e2ee96777e8d15e8b77a2feccf79">gemmlowp::Rescale&lt;kAccumIntegerBits&gt;</a>(one_quarter);</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span> </div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>  <span class="comment">// Reinterpret the input value as Q0.31, because we will figure out the</span></div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>  <span class="comment">// required shift &quot;ourselves&quot; instead of using, say, Rescale.</span></div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>  FixedPoint0 z_a = FixedPoint0::FromRaw(input_val.<a class="code hl_function" href="classgemmlowp_1_1_fixed_point.html#a2a1d836acd30cc363e4b453e4f038457">raw</a>());</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>  <span class="comment">// z_a_pow_2 = input_integer_bits - z_a_headroom;</span></div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>  <span class="keywordtype">int</span> z_a_headroom_plus_1 = <a class="code hl_function" href="namespacetflite.html#a90b39c749aaf4b036ab5268d03fed4b5">CountLeadingZeros</a>(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(z_a.raw()));</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>  FixedPoint0 r_a_tmp =</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>      <a class="code hl_function" href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">SaturatingRoundingMultiplyByPOTParam</a>(z_a, (z_a_headroom_plus_1 - 1));</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>  <span class="keyword">const</span> int32_t r_a_raw =</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>      <a class="code hl_function" href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">SaturatingRoundingMultiplyByPOTParam</a>((r_a_tmp * sqrt_half).raw(), 1);</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>  <span class="comment">// z_pow_2_adj = max(z_pow_2_a - 0.75, z_pow_2_b - 0.25);</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>  <span class="comment">// z_pow_2_adj = max(InputIntegerBits - z_a_headroom_plus_1 + 0.25,</span></div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>  <span class="comment">//                   InputIntegerBits - z_b_headroom - 0.25);</span></div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>  <span class="keyword">const</span> FixedPointAccum z_a_pow_2_adj = <a class="code hl_function" href="namespacetflite.html#a8b76acb41e8e5d68b76cf19ddc112d18">SaturatingAddNonGemmlowp</a>(</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>      FixedPointAccum::FromRaw(<a class="code hl_function" href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">SaturatingRoundingMultiplyByPOTParam</a>(</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>          <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(InputIntegerBits - z_a_headroom_plus_1),</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>          31 - kAccumIntegerBits)),</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>      shifted_quarter);</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span> </div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>  <span class="comment">// z_b is treated like z_a, but premultiplying by sqrt(0.5).</span></div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>  FixedPoint0 z_b = z_a * sqrt_half;</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>  <span class="keywordtype">int</span> z_b_headroom = <a class="code hl_function" href="namespacetflite.html#a90b39c749aaf4b036ab5268d03fed4b5">CountLeadingZeros</a>(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(z_b.raw())) - 1;</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>  <span class="keyword">const</span> int32_t r_b_raw =</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>      <a class="code hl_function" href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">SaturatingRoundingMultiplyByPOTParam</a>(z_a.raw(), z_b_headroom);</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>  <span class="keyword">const</span> FixedPointAccum z_b_pow_2_adj = <a class="code hl_function" href="namespacetflite.html#a35c6097b2d6d77672a3864ba7086bfaf">SaturatingSub</a>(</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>      FixedPointAccum::FromRaw(<a class="code hl_function" href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">SaturatingRoundingMultiplyByPOTParam</a>(</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>          <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(InputIntegerBits - z_b_headroom),</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>          31 - kAccumIntegerBits)),</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>      shifted_quarter);</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span> </div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>  <span class="keyword">const</span> FixedPoint0 <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#acab531abaa74a7e664e3986f2522b33a">r</a> = FixedPoint0::FromRaw(std::min(r_a_raw, r_b_raw));</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>  <span class="keyword">const</span> FixedPointAccum z_pow_2_adj = FixedPointAccum::FromRaw(</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>      std::max(z_a_pow_2_adj.raw(), z_b_pow_2_adj.raw()));</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span> </div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>  <span class="keyword">const</span> FixedPoint0 p = <a class="code hl_function" href="namespacegemmlowp.html#a34891a7112dcf0d89456b754c5633e01">gemmlowp::RoundingHalfSum</a>(<a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#acab531abaa74a7e664e3986f2522b33a">r</a>, sqrt_sqrt_half);</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>  FixedPoint0 q = <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#acab531abaa74a7e664e3986f2522b33a">r</a> - sqrt_sqrt_half;</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>  q = q + q;</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span> </div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>  <span class="keyword">const</span> FixedPoint0 common_sq = q * q;</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>  <span class="keyword">const</span> FixedPoint0 num = q * <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#acab531abaa74a7e664e3986f2522b33a">r</a> + q * common_sq * alpha_n;</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>  <span class="keyword">const</span> FixedPoint0 denom_minus_one_0 =</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>      p * (alpha_i + q + alpha_d * common_sq) + alpha_f * q;</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>  <span class="keyword">const</span> FixedPoint0 recip_denom =</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>      <a class="code hl_function" href="namespacegemmlowp.html#a11e5e1e83d8440636572761481946a40">one_over_one_plus_x_for_x_in_0_1</a>(denom_minus_one_0);</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span> </div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>  <span class="keyword">const</span> FixedPointAccum num_scaled = <a class="code hl_function" href="namespacegemmlowp.html#a3187e2ee96777e8d15e8b77a2feccf79">gemmlowp::Rescale&lt;kAccumIntegerBits&gt;</a>(num);</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacegemmlowp.html#a3187e2ee96777e8d15e8b77a2feccf79">gemmlowp::Rescale&lt;OutputIntegerBits&gt;</a>(z_pow_2_adj * log_2 +</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>                                              num_scaled * recip_denom);</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>}</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span> </div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> OutputIntegerBits, <span class="keywordtype">int</span> InputIntegerBits&gt;</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span><span class="keyword">inline</span> <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;int32_t, OutputIntegerBits&gt;</a></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span><a class="code hl_function" href="namespacetflite.html#aee0d1caf71a130e0c374615ab8ae569a">log_x_for_x_greater_than_or_equal_to_1</a>(</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;int32_t, InputIntegerBits&gt;</a> input_val) {</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>  <span class="keyword">static_assert</span>(</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>      OutputIntegerBits &gt;= <a class="code hl_function" href="namespacetflite.html#a426a39797b9bebb2f5de430392f47dc4">min_log_x_output_bits</a>(InputIntegerBits),</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>      <span class="stringliteral">&quot;Output integer bits must be sufficient to accommodate logs of inputs.&quot;</span>);</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacetflite.html#ad7ab248e3acef703efd58fa6b1c89be5">log_x_for_x_greater_than_or_equal_to_1_impl</a>&lt;OutputIntegerBits,</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>                                                     InputIntegerBits&gt;(</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>      input_val);</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>}</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span> </div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span><span class="keyword">inline</span> int32_t <a class="code hl_function" href="namespacetflite.html#a7f5e467aa646ee62259f3919d2a5a738">GetReciprocal</a>(int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <span class="keywordtype">int</span> x_integer_digits,</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>                             <span class="keywordtype">int</span>* num_bits_over_unit) {</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>  <span class="keywordtype">int</span> headroom_plus_one = <a class="code hl_function" href="namespacetflite.html#a90b39c749aaf4b036ab5268d03fed4b5">CountLeadingZeros</a>(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>));</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>  <span class="comment">// This is the number of bits to the left of the binary point above 1.0.</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>  <span class="comment">// Consider x=1.25.  In that case shifted_scale=0.8 and</span></div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>  <span class="comment">// no later adjustment will be needed.</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>  *num_bits_over_unit = x_integer_digits - headroom_plus_one;</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>  <span class="keyword">const</span> int32_t shifted_sum_minus_one =</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>      <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>((<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) &lt;&lt; headroom_plus_one) -</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>                           (<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(1) &lt;&lt; 31));</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span> </div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>  <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;int32_t, 0&gt;</a> shifted_scale =</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>      <a class="code hl_function" href="namespacegemmlowp.html#a11e5e1e83d8440636572761481946a40">gemmlowp::one_over_one_plus_x_for_x_in_0_1</a>(</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>          <a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint&lt;int32_t, 0&gt;::FromRaw</a>(shifted_sum_minus_one));</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>  <span class="keywordflow">return</span> shifted_scale.<a class="code hl_function" href="classgemmlowp_1_1_fixed_point.html#a2a1d836acd30cc363e4b453e4f038457">raw</a>();</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>}</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span> </div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a79c83fc49a70b2327ad7a032aba876f1">GetInvSqrtQuantizedMultiplierExp</a>(int32_t <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a>, <span class="keywordtype">int</span> reverse_shift,</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>                                             int32_t* output_inv_sqrt,</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>                                             <span class="keywordtype">int</span>* <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a>) {</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#ae45cce3e44eefbb5a09cea1b3baba0e3">TFLITE_DCHECK_GE</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a>, 0);</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a> &lt;= 1) {</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>    <span class="comment">// Handle the input value 1 separately to avoid overflow in that case</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    <span class="comment">// in the general computation below (b/143972021). Also handle 0 as if it</span></div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    <span class="comment">// were a 1. 0 is an invalid input here (divide by zero) and 1 is a valid</span></div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    <span class="comment">// but rare/unrealistic input value. We can expect both to occur in some</span></div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>    <span class="comment">// incompletely trained models, but probably not in fully trained models.</span></div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    *output_inv_sqrt = std::numeric_limits&lt;std::int32_t&gt;::max();</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>    *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a> = 0;</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>  }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#ac8167911bdd7e5400cc62d8dda17ee7d">TFLITE_DCHECK_GT</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a>, 1);</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>  *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a> = 11;</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>  <span class="keywordflow">while</span> (<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a> &gt;= (1 &lt;&lt; 29)) {</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>    <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a> /= 4;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    ++*<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a>;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>  }</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> max_left_shift_bits =</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>      <a class="code hl_function" href="namespacetflite.html#a90b39c749aaf4b036ab5268d03fed4b5">CountLeadingZeros</a>(<span class="keyword">static_cast&lt;</span>uint32_t<span class="keyword">&gt;</span>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a>)) - 1;</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> max_left_shift_bit_pairs = max_left_shift_bits / 2;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> left_shift_bit_pairs = max_left_shift_bit_pairs - 1;</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>  *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a> -= left_shift_bit_pairs;</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>  <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a> &lt;&lt;= 2 * left_shift_bit_pairs;</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#ae45cce3e44eefbb5a09cea1b3baba0e3">TFLITE_DCHECK_GE</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a>, (1 &lt;&lt; 27));</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a8d050e4dccce9da457a5aaa90add5c09">TFLITE_DCHECK_LT</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a>, (1 &lt;&lt; 29));</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>  <span class="keyword">using </span><a class="code hl_class" href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint</a>;</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>  <span class="keyword">using </span><a class="code hl_function" href="namespacegemmlowp.html#a3187e2ee96777e8d15e8b77a2feccf79">gemmlowp::Rescale</a>;</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>  <span class="keyword">using </span><a class="code hl_function" href="namespacegemmlowp.html#a79cd39a0e9ebaea7b0bc35f6ac1a675e">gemmlowp::SaturatingRoundingMultiplyByPOT</a>;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>  <span class="comment">// Using 3 integer bits gives us enough room for the internal arithmetic in</span></div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>  <span class="comment">// this Newton-Raphson iteration.</span></div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>  <span class="keyword">using </span>F3 = FixedPoint&lt;int32_t, 3&gt;;</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>  <span class="keyword">using </span>F0 = FixedPoint&lt;int32_t, 0&gt;;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>  <span class="keyword">const</span> F3 fixedpoint_input = F3::FromRaw(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a> &gt;&gt; 1);</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>  <span class="keyword">const</span> F3 fixedpoint_half_input =</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>      <a class="code hl_function" href="namespacegemmlowp.html#a79cd39a0e9ebaea7b0bc35f6ac1a675e">SaturatingRoundingMultiplyByPOT</a>&lt;-1&gt;(fixedpoint_input);</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>  <span class="keyword">const</span> F3 fixedpoint_half_three =</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>      <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(F3, (1 &lt;&lt; 28) + (1 &lt;&lt; 27), 1.5);</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>  <span class="comment">// Newton-Raphson iteration</span></div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>  <span class="comment">// Naive unoptimized starting guess: x = 1</span></div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>  F3 <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = F3::One();</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>  <span class="comment">// Naive unoptimized number of iterations: 5</span></div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 5; i++) {</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    <span class="keyword">const</span> F3 x3 = Rescale&lt;3&gt;(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>);</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>    <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = Rescale&lt;3&gt;(fixedpoint_half_three * <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> - fixedpoint_half_input * x3);</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>  }</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>  <span class="keyword">const</span> F0 fixedpoint_half_sqrt_2 =</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>      <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a>(F0, 1518500250, std::sqrt(2.) / 2.);</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>  <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * fixedpoint_half_sqrt_2;</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>  *output_inv_sqrt = <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>.raw();</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>  <span class="keywordflow">if</span> (*<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a> &lt; 0) {</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    *output_inv_sqrt &lt;&lt;= -*<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a>;</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>    *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a> = 0;</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>  }</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>  <span class="comment">// Convert right shift (right is positive) to left shift.</span></div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>  *<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a> *= reverse_shift;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>}</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span> </div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span><span class="comment">// DO NOT USE THIS STRUCT FOR NEW FUNCTIONALITY BEYOND IMPLEMENTING</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span><span class="comment">// BROADCASTING.</span></div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span><span class="comment">//</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span><span class="comment">// NdArrayDesc&lt;N&gt; describes the shape and memory layout of an N-dimensional</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span><span class="comment">// rectangular array of numbers.</span></div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span><span class="comment">//</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span><span class="comment">// NdArrayDesc&lt;N&gt; is basically identical to Dims&lt;N&gt; defined in types.h.</span></div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span><span class="comment">// However, as Dims&lt;N&gt; is to be deprecated, this class exists as an adaptor</span></div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span><span class="comment">// to enable simple unoptimized implementations of element-wise broadcasting</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span><span class="comment">// operations.</span></div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;</div>
<div class="foldopen" id="foldopen00946" data-start="{" data-end="};">
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno"><a class="line" href="structtflite_1_1_nd_array_desc.html">  946</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structtflite_1_1_nd_array_desc.html">NdArrayDesc</a> {</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>  <span class="comment">// The &quot;extent&quot; of each dimension. Indices along dimension d must be in the</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>  <span class="comment">// half-open interval [0, extents[d]).</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a1ba97916bd24264182c16ad58ca3dfd6">extents</a>[N];</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span> </div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>  <span class="comment">// The number of *elements* (not bytes) between consecutive indices of each</span></div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>  <span class="comment">// dimension.</span></div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a3dec8864002e5b17f00b7b586a992cae">strides</a>[N];</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>};</div>
</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span> </div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span><span class="comment">// DO NOT USE THIS FUNCTION FOR NEW FUNCTIONALITY BEYOND IMPLEMENTING</span></div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span><span class="comment">// BROADCASTING.</span></div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span><span class="comment">//</span></div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span><span class="comment">// Same as Offset(), except takes as NdArrayDesc&lt;N&gt; instead of Dims&lt;N&gt;.</span></div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span><span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite.html#ada717d5a5b12736592e0970790b6e24c">SubscriptToIndex</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structtflite_1_1_nd_array_desc.html">NdArrayDesc&lt;4&gt;</a>&amp; desc, <span class="keywordtype">int</span> i0, <span class="keywordtype">int</span> i1, <span class="keywordtype">int</span> i2,</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>                            <span class="keywordtype">int</span> i3) {</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(i0 &gt;= 0 &amp;&amp; i0 &lt; desc.<a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a1ba97916bd24264182c16ad58ca3dfd6">extents</a>[0]);</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(i1 &gt;= 0 &amp;&amp; i1 &lt; desc.<a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a1ba97916bd24264182c16ad58ca3dfd6">extents</a>[1]);</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(i2 &gt;= 0 &amp;&amp; i2 &lt; desc.<a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a1ba97916bd24264182c16ad58ca3dfd6">extents</a>[2]);</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(i3 &gt;= 0 &amp;&amp; i3 &lt; desc.<a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a1ba97916bd24264182c16ad58ca3dfd6">extents</a>[3]);</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>  <span class="keywordflow">return</span> i0 * desc.<a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a3dec8864002e5b17f00b7b586a992cae">strides</a>[0] + i1 * desc.<a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a3dec8864002e5b17f00b7b586a992cae">strides</a>[1] + i2 * desc.<a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a3dec8864002e5b17f00b7b586a992cae">strides</a>[2] +</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>         i3 * desc.<a class="code hl_variable" href="structtflite_1_1_nd_array_desc.html#a3dec8864002e5b17f00b7b586a992cae">strides</a>[3];</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>}</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span> </div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span><span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite.html#ada717d5a5b12736592e0970790b6e24c">SubscriptToIndex</a>(<span class="keyword">const</span> NdArrayDesc&lt;5&gt;&amp; desc, <span class="keywordtype">int</span> indexes[5]) {</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>  <span class="keywordflow">return</span> indexes[0] * desc.strides[0] + indexes[1] * desc.strides[1] +</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>         indexes[2] * desc.strides[2] + indexes[3] * desc.strides[3] +</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>         indexes[4] * desc.strides[4];</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>}</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span> </div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span><span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite.html#ada717d5a5b12736592e0970790b6e24c">SubscriptToIndex</a>(<span class="keyword">const</span> NdArrayDesc&lt;8&gt;&amp; desc, <span class="keywordtype">int</span> indexes[8]) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>  <span class="keywordflow">return</span> indexes[0] * desc.strides[0] + indexes[1] * desc.strides[1] +</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>         indexes[2] * desc.strides[2] + indexes[3] * desc.strides[3] +</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>         indexes[4] * desc.strides[4] + indexes[5] * desc.strides[5] +</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>         indexes[6] * desc.strides[6] + indexes[7] * desc.strides[7];</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>}</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span><span class="comment">// Given the dimensions of the operands for an element-wise binary broadcast,</span></div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span><span class="comment">// adjusts them so that they can be directly iterated over with simple loops.</span></div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span><span class="comment">// Returns the adjusted dims as instances of NdArrayDesc in &#39;desc0_out&#39; and</span></div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span><span class="comment">// &#39;desc1_out&#39;. &#39;desc0_out&#39; and &#39;desc1_out&#39; cannot be nullptr.</span></div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span><span class="comment">//</span></div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span><span class="comment">// This function assumes that the two input shapes are compatible up to</span></div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span><span class="comment">// broadcasting and the shorter one has already been prepended with 1s to be the</span></div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span><span class="comment">// same length. E.g., if shape0 is (1, 16, 16, 64) and shape1 is (1, 64),</span></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span><span class="comment">// shape1 must already have been prepended to be (1, 1, 1, 64). Recall that</span></div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span><span class="comment">// Dims&lt;N&gt; refer to shapes in reverse order. In this case, input0_dims will be</span></div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span><span class="comment">// (64, 16, 16, 1) and input1_dims will be (64, 1, 1, 1).</span></div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span><span class="comment">//</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span><span class="comment">// When two shapes are compatible up to broadcasting, for each dimension d,</span></div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span><span class="comment">// the input extents are either equal, or one of them is 1.</span></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span><span class="comment">//</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span><span class="comment">// This function performs the following for each dimension d:</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span><span class="comment">// - If the extents are equal, then do nothing since the loop that walks over</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span><span class="comment">//   both of the input arrays is correct.</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span><span class="comment">// - Otherwise, one (and only one) of the extents must be 1. Say extent0 is 1</span></div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span><span class="comment">//   and extent1 is e1. Then set extent0 to e1 and stride0 *to 0*. This allows</span></div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span><span class="comment">//   array0 to be referenced *at any index* in dimension d and still access the</span></div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span><span class="comment">//   same slice.</span></div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a760e75250ae8653f7ce34572b7ec80e6">NdArrayDescsForElementwiseBroadcast</a>(<span class="keyword">const</span> Dims&lt;N&gt;&amp; input0_dims,</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>                                                <span class="keyword">const</span> Dims&lt;N&gt;&amp; input1_dims,</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>                                                NdArrayDesc&lt;N&gt;* desc0_out,</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>                                                NdArrayDesc&lt;N&gt;* desc1_out) {</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(desc0_out != <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(desc1_out != <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span> </div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>  <span class="comment">// Copy dims to desc.</span></div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N; ++i) {</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    desc0_out-&gt;extents[i] = input0_dims.sizes[i];</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    desc0_out-&gt;strides[i] = input0_dims.strides[i];</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>    desc1_out-&gt;extents[i] = input1_dims.sizes[i];</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>    desc1_out-&gt;strides[i] = input1_dims.strides[i];</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>  }</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span> </div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>  <span class="comment">// Walk over each dimension. If the extents are equal do nothing.</span></div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>  <span class="comment">// Otherwise, set the desc with extent 1 to have extent equal to the other and</span></div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>  <span class="comment">// stride 0.</span></div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N; ++i) {</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> extent0 = <a class="code hl_function" href="namespacetflite.html#adc6b749cb190829203e56b34c294f61b">ArraySize</a>(input0_dims, i);</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> extent1 = <a class="code hl_function" href="namespacetflite.html#adc6b749cb190829203e56b34c294f61b">ArraySize</a>(input1_dims, i);</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    <span class="keywordflow">if</span> (extent0 != extent1) {</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>      <span class="keywordflow">if</span> (extent0 == 1) {</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>        desc0_out-&gt;strides[i] = 0;</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>        desc0_out-&gt;extents[i] = extent1;</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>        <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a67d8abfffe84d6f96f1886241e903664">TFLITE_DCHECK_EQ</a>(extent1, 1);</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>        desc1_out-&gt;strides[i] = 0;</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>        desc1_out-&gt;extents[i] = extent0;</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>      }</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    }</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>  }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>}</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span> </div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span><span class="comment">// Copies dims to desc, calculating strides.</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a068e281f9d29fd4d26c51235d6d74086">CopyDimsToDesc</a>(<span class="keyword">const</span> RuntimeShape&amp; <a class="code hl_variable" href="akida_8h.html#a0792621910eb31f95019ddc94eb3dece">input_shape</a>,</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>                           NdArrayDesc&lt;N&gt;* desc_out) {</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>  <span class="keywordtype">int</span> desc_stride = 1;</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = N - 1; i &gt;= 0; --i) {</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>    desc_out-&gt;extents[i] = <a class="code hl_variable" href="akida_8h.html#a0792621910eb31f95019ddc94eb3dece">input_shape</a>.Dims(i);</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    desc_out-&gt;strides[i] = desc_stride;</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>    desc_stride *= <a class="code hl_variable" href="akida_8h.html#a0792621910eb31f95019ddc94eb3dece">input_shape</a>.Dims(i);</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>  }</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>}</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span> </div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a760e75250ae8653f7ce34572b7ec80e6">NdArrayDescsForElementwiseBroadcast</a>(</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>    <span class="keyword">const</span> RuntimeShape&amp; input0_shape, <span class="keyword">const</span> RuntimeShape&amp; input1_shape,</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    NdArrayDesc&lt;N&gt;* desc0_out, NdArrayDesc&lt;N&gt;* desc1_out) {</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(desc0_out != <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(desc1_out != <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span> </div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>  <span class="keyword">auto</span> extended_input0_shape = <a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a647264349b0f266c94102a8b3dda22cf">RuntimeShape::ExtendedShape</a>(N, input0_shape);</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>  <span class="keyword">auto</span> extended_input1_shape = <a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a647264349b0f266c94102a8b3dda22cf">RuntimeShape::ExtendedShape</a>(N, input1_shape);</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span> </div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>  <span class="comment">// Copy dims to desc, calculating strides.</span></div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>  <a class="code hl_function" href="namespacetflite.html#a068e281f9d29fd4d26c51235d6d74086">CopyDimsToDesc&lt;N&gt;</a>(extended_input0_shape, desc0_out);</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>  <a class="code hl_function" href="namespacetflite.html#a068e281f9d29fd4d26c51235d6d74086">CopyDimsToDesc&lt;N&gt;</a>(extended_input1_shape, desc1_out);</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span> </div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>  <span class="comment">// Walk over each dimension. If the extents are equal do nothing.</span></div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>  <span class="comment">// Otherwise, set the desc with extent 1 to have extent equal to the other and</span></div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>  <span class="comment">// stride 0.</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N; ++i) {</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> extent0 = extended_input0_shape.Dims(i);</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> extent1 = extended_input1_shape.Dims(i);</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    <span class="keywordflow">if</span> (extent0 != extent1) {</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>      <span class="keywordflow">if</span> (extent0 == 1) {</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        desc0_out-&gt;strides[i] = 0;</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        desc0_out-&gt;extents[i] = extent1;</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>      } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>        <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a67d8abfffe84d6f96f1886241e903664">TFLITE_DCHECK_EQ</a>(extent1, 1);</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>        desc1_out-&gt;strides[i] = 0;</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        desc1_out-&gt;extents[i] = extent0;</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>      }</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>    }</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>  }</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>}</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span> </div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N&gt;</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a760e75250ae8653f7ce34572b7ec80e6">NdArrayDescsForElementwiseBroadcast</a>(</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>    <span class="keyword">const</span> RuntimeShape&amp; input0_shape, <span class="keyword">const</span> RuntimeShape&amp; input1_shape,</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>    <span class="keyword">const</span> RuntimeShape&amp; input2_shape, NdArrayDesc&lt;N&gt;* desc0_out,</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>    NdArrayDesc&lt;N&gt;* desc1_out, NdArrayDesc&lt;N&gt;* desc2_out) {</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(desc0_out != <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(desc1_out != <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>  <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(desc2_out != <span class="keyword">nullptr</span>);</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span> </div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>  <span class="keyword">auto</span> extended_input0_shape = <a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a647264349b0f266c94102a8b3dda22cf">RuntimeShape::ExtendedShape</a>(N, input0_shape);</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>  <span class="keyword">auto</span> extended_input1_shape = <a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a647264349b0f266c94102a8b3dda22cf">RuntimeShape::ExtendedShape</a>(N, input1_shape);</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>  <span class="keyword">auto</span> extended_input2_shape = <a class="code hl_function" href="classtflite_1_1_runtime_shape.html#a647264349b0f266c94102a8b3dda22cf">RuntimeShape::ExtendedShape</a>(N, input2_shape);</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span> </div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>  <span class="comment">// Copy dims to desc, calculating strides.</span></div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>  <a class="code hl_function" href="namespacetflite.html#a068e281f9d29fd4d26c51235d6d74086">CopyDimsToDesc&lt;N&gt;</a>(extended_input0_shape, desc0_out);</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>  <a class="code hl_function" href="namespacetflite.html#a068e281f9d29fd4d26c51235d6d74086">CopyDimsToDesc&lt;N&gt;</a>(extended_input1_shape, desc1_out);</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>  <a class="code hl_function" href="namespacetflite.html#a068e281f9d29fd4d26c51235d6d74086">CopyDimsToDesc&lt;N&gt;</a>(extended_input2_shape, desc2_out);</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span> </div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>  <span class="comment">// Walk over each dimension. If the extents are equal do nothing.</span></div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>  <span class="comment">// Otherwise, set the desc with extent 1 to have extent equal to the other and</span></div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>  <span class="comment">// stride 0.</span></div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N; ++i) {</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> extent0 = extended_input0_shape.Dims(i);</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> extent1 = extended_input1_shape.Dims(i);</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> extent2 = extended_input2_shape.Dims(i);</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span> </div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite_1_1reference__ops_1_1batch__matmul.html#ad8a9d9fce75e1b4a31bad0c57f293676">extent</a> = extent0;</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>    <span class="keywordflow">if</span> (extent1 != 1) <a class="code hl_function" href="namespacetflite_1_1reference__ops_1_1batch__matmul.html#ad8a9d9fce75e1b4a31bad0c57f293676">extent</a> = extent1;</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>    <span class="keywordflow">if</span> (extent2 != 1) <a class="code hl_function" href="namespacetflite_1_1reference__ops_1_1batch__matmul.html#ad8a9d9fce75e1b4a31bad0c57f293676">extent</a> = extent2;</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span> </div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(extent0 == 1 || extent0 == extent);</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>    <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(extent1 == 1 || extent1 == extent);</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    <a class="code hl_define" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a>(extent2 == 1 || extent2 == extent);</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span> </div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>    <span class="keywordflow">if</span> (!(extent0 == extent1 &amp;&amp; extent1 == extent2)) {</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>      <span class="keywordflow">if</span> (extent0 == 1) {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>        desc0_out-&gt;strides[i] = 0;</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>        desc0_out-&gt;extents[i] = <a class="code hl_function" href="namespacetflite_1_1reference__ops_1_1batch__matmul.html#ad8a9d9fce75e1b4a31bad0c57f293676">extent</a>;</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>      }</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>      <span class="keywordflow">if</span> (extent1 == 1) {</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>        desc1_out-&gt;strides[i] = 0;</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        desc1_out-&gt;extents[i] = <a class="code hl_function" href="namespacetflite_1_1reference__ops_1_1batch__matmul.html#ad8a9d9fce75e1b4a31bad0c57f293676">extent</a>;</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>      }</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>      <span class="keywordflow">if</span> (extent2 == 1) {</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>        desc2_out-&gt;strides[i] = 0;</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>        desc2_out-&gt;extents[i] = <a class="code hl_function" href="namespacetflite_1_1reference__ops_1_1batch__matmul.html#ad8a9d9fce75e1b4a31bad0c57f293676">extent</a>;</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>      }</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>    }</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>  }</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>}</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span> </div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span><span class="comment">// Detailed implementation of NDOpsHelper, the indexes must be a zero array.</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span><span class="comment">// This implementation is equivalent to N nested loops. Ex, if N=4, it can be</span></div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span><span class="comment">// re-writen as:</span></div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span><span class="comment">// for (int b = 0; b &lt; output.extents[0]; ++b) {</span></div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span><span class="comment">//   for (int y = 0; y &lt; output.extents[1]; ++y) {</span></div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span><span class="comment">//     for (int x = 0; x &lt; output.extents[2]; ++x) {</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span><span class="comment">//       for (int c = 0; c &lt; output.extents[3]; ++c) {</span></div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span><span class="comment">//           calc({b,y,x,c});</span></div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span><span class="comment">//       }</span></div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span><span class="comment">//     }</span></div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span><span class="comment">//   }</span></div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span><span class="comment">// }</span></div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N, <span class="keywordtype">int</span> DIM, <span class="keyword">typename</span> Calc&gt;</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span><span class="keyword">typename</span> std::enable_if&lt;DIM != N - 1, <span class="keywordtype">void</span>&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a> <a class="code hl_function" href="namespacetflite.html#a5ee41ae3362aee6ff8a7c13874734314">NDOpsHelperImpl</a>(</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>    <span class="keyword">const</span> NdArrayDesc&lt;N&gt;&amp; <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437.html#a7a2a916a8059078c2d7a05f46c7126fd">output</a>, <span class="keyword">const</span> Calc&amp; calc, <span class="keywordtype">int</span> indexes[N]) {</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>  <span class="keywordflow">for</span> (indexes[DIM] = 0; indexes[DIM] &lt; <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437.html#a7a2a916a8059078c2d7a05f46c7126fd">output</a>.extents[DIM]; ++indexes[DIM]) {</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>    <a class="code hl_function" href="namespacetflite.html#a5ee41ae3362aee6ff8a7c13874734314">NDOpsHelperImpl&lt;N, DIM + 1, Calc&gt;</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437.html#a7a2a916a8059078c2d7a05f46c7126fd">output</a>, calc, indexes);</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>  }</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>}</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span> </div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N, <span class="keywordtype">int</span> DIM, <span class="keyword">typename</span> Calc&gt;</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span><span class="keyword">typename</span> std::enable_if&lt;DIM == N - 1, <span class="keywordtype">void</span>&gt;<a class="code hl_variable" href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">::type</a> <a class="code hl_function" href="namespacetflite.html#a5ee41ae3362aee6ff8a7c13874734314">NDOpsHelperImpl</a>(</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>    <span class="keyword">const</span> NdArrayDesc&lt;N&gt;&amp; <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437.html#a7a2a916a8059078c2d7a05f46c7126fd">output</a>, <span class="keyword">const</span> Calc&amp; calc, <span class="keywordtype">int</span> indexes[N]) {</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>  <span class="keywordflow">for</span> (indexes[DIM] = 0; indexes[DIM] &lt; <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437.html#a7a2a916a8059078c2d7a05f46c7126fd">output</a>.extents[DIM]; ++indexes[DIM]) {</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>    calc(indexes);</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>  }</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>}</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span> </div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span><span class="comment">// Execute the calc function in the innermost iteration based on the shape of</span></div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span><span class="comment">// the output. The calc function should take a single argument of type int[N].</span></div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> N, <span class="keyword">typename</span> Calc&gt;</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#ad8d71bb7ed70864ba58a0576a516a30d">NDOpsHelper</a>(<span class="keyword">const</span> NdArrayDesc&lt;N&gt;&amp; <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437.html#a7a2a916a8059078c2d7a05f46c7126fd">output</a>, <span class="keyword">const</span> Calc&amp; calc) {</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>  <span class="keywordtype">int</span> indexes[N] = {0};</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>  <a class="code hl_function" href="namespacetflite.html#a5ee41ae3362aee6ff8a7c13874734314">NDOpsHelperImpl&lt;N, 0, Calc&gt;</a>(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437.html#a7a2a916a8059078c2d7a05f46c7126fd">output</a>, calc, indexes);</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>}</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span><span class="comment">// Copied from gemmlowp::RoundDown when we dropped direct dependency on</span></div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span><span class="comment">// gemmlowp.</span></div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span><span class="comment">//</span></div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span><span class="comment">// Returns the runtime argument rounded down to the nearest multiple of</span></div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span><span class="comment">// the fixed Modulus.</span></div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span><span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> Modulus, <span class="keyword">typename</span> Integer&gt;</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>Integer <a class="code hl_function" href="namespacetflite.html#a79eeae9e2bbb65f250bf862066d349af">RoundDown</a>(Integer i) {</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>  <span class="keywordflow">return</span> i - (i % Modulus);</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>}</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span> </div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span><span class="comment">// Copied from gemmlowp::RoundUp when we dropped direct dependency on</span></div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span><span class="comment">// gemmlowp.</span></div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span><span class="comment">//</span></div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span><span class="comment">// Returns the runtime argument rounded up to the nearest multiple of</span></div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span><span class="comment">// the fixed Modulus.</span></div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span><span class="keyword">template</span> &lt;<span class="keywordtype">unsigned</span> Modulus, <span class="keyword">typename</span> Integer&gt;</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>Integer <a class="code hl_function" href="namespacetflite.html#a225624b9a523e2c239a30f91b013eac3">RoundUp</a>(Integer i) {</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="namespacetflite.html#a79eeae9e2bbb65f250bf862066d349af">RoundDown&lt;Modulus&gt;</a>(i + Modulus - 1);</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>}</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span> </div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span><span class="comment">// Copied from gemmlowp::CeilQuotient when we dropped direct dependency on</span></div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span><span class="comment">// gemmlowp.</span></div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span><span class="comment">//</span></div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span><span class="comment">// Returns the quotient a / b rounded up (&#39;ceil&#39;) to the nearest integer.</span></div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Integer&gt;</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>Integer <a class="code hl_function" href="namespacetflite.html#aa77fcca24a574ddb4780417833e4edde">CeilQuotient</a>(Integer a, Integer <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>) {</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>  <span class="keywordflow">return</span> (a + <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a> - 1) / <a class="code hl_variable" href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a>;</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>}</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span> </div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span><span class="comment">// This function is a copy of gemmlowp::HowManyThreads, copied when we dropped</span></div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span><span class="comment">// the direct dependency of internal/optimized/ on gemmlowp.</span></div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span><span class="comment">//</span></div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span><span class="comment">// It computes a reasonable number of threads to use for a GEMM of shape</span></div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span><span class="comment">// (rows, cols, depth).</span></div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span><span class="comment">//</span></div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span><span class="comment">// TODO(b/131910176): get rid of this function by switching each call site</span></div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span><span class="comment">// to its own more sensible logic for its own workload.</span></div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span><span class="keyword">template</span> &lt;<span class="keywordtype">int</span> KernelRows&gt;</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span><span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacetflite.html#abd05bc06c2846e9cf3a8fb39150e3f05">LegacyHowManyThreads</a>(<span class="keywordtype">int</span> max_num_threads, <span class="keywordtype">int</span> <a class="code hl_variable" href="ei__run__dsp_8h.html#ad2900253d2779d0db156053c95c88b24">rows</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="ei__run__dsp_8h.html#af2c814313b7abeea412ee58a5c687dc3">cols</a>,</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>                                <span class="keywordtype">int</span> <a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src22d562cad0a0e140a9fafc1c6a662e94.html#a820c167ceaaa9759b0ca2695d22db55c">depth</a>) {</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>  <span class="comment">// Early-exit in the default case where multi-threading is disabled.</span></div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>  <span class="keywordflow">if</span> (max_num_threads == 1) {</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>  }</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span> </div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>  <span class="comment">// Ensure that each thread has KernelRows rows to process, if at all possible.</span></div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>  <span class="keywordtype">int</span> thread_count = std::min(max_num_threads, <a class="code hl_variable" href="ei__run__dsp_8h.html#ad2900253d2779d0db156053c95c88b24">rows</a> / KernelRows);</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span> </div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>  <span class="comment">// Limit the number of threads according to the overall size of the problem.</span></div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>  <span class="keywordflow">if</span> (thread_count &gt; 1) {</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    <span class="comment">// Empirically determined value.</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> std::uint64_t min_cubic_size_per_thread = 64 * 1024;</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <span class="comment">// We can only multiply two out of three sizes without risking overflow</span></div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>    <span class="keyword">const</span> std::uint64_t cubic_size =</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>        std::uint64_t(<a class="code hl_variable" href="ei__run__dsp_8h.html#ad2900253d2779d0db156053c95c88b24">rows</a>) * std::uint64_t(<a class="code hl_variable" href="ei__run__dsp_8h.html#af2c814313b7abeea412ee58a5c687dc3">cols</a>) * std::uint64_t(<a class="code hl_variable" href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src22d562cad0a0e140a9fafc1c6a662e94.html#a820c167ceaaa9759b0ca2695d22db55c">depth</a>);</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span> </div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>    thread_count = std::min(</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>        thread_count, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(cubic_size / min_cubic_size_per_thread));</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>  }</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span> </div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>  <span class="keywordflow">if</span> (thread_count &lt; 1) {</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>    thread_count = 1;</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>  }</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span> </div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>  <a class="code hl_function" href="ei__aligned__malloc_8h.html#a95cd4fa643ce672b347744b35c5b7056">assert</a>(thread_count &gt; 0 &amp;&amp; thread_count &lt;= max_num_threads);</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>  <span class="keywordflow">return</span> thread_count;</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>}</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span> </div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#ae05f61df279ed1cdfa648eaae39bc3da">optimized_ops_preload_l1_stream</a>(<span class="keyword">const</span> T* <a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>) {</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span><span class="preprocessor">#ifdef __GNUC__</span></div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>  <span class="comment">// builtin offered by GCC-compatible compilers including clang</span></div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>  __builtin_prefetch(<a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>, <span class="comment">/* 0 means read */</span> 0, <span class="comment">/* 0 means no locality */</span> 0);</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>  (void)<a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>;</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>}</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span> </div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a431b5d05f9c57d8c1b282e0226944e16">optimized_ops_preload_l1_keep</a>(<span class="keyword">const</span> T* <a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>) {</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span><span class="preprocessor">#ifdef __GNUC__</span></div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>  <span class="comment">// builtin offered by GCC-compatible compilers including clang</span></div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>  __builtin_prefetch(<a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>, <span class="comment">/* 0 means read */</span> 0, <span class="comment">/* 3 means high locality */</span> 3);</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>  (void)<a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>;</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>}</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span> </div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacetflite.html#a3670c3d6f1832427faeb85b97d0dd1ab">optimized_ops_prefetch_write_l1_keep</a>(<span class="keyword">const</span> T* <a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>) {</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span><span class="preprocessor">#ifdef __GNUC__</span></div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>  <span class="comment">// builtin offered by GCC-compatible compilers including clang</span></div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>  __builtin_prefetch(<a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>, <span class="comment">/* 1 means write */</span> 1, <span class="comment">/* 3 means high locality */</span> 3);</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>  (void)<a class="code hl_variable" href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a>;</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>}</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span> </div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>}  <span class="comment">// namespace tflite</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span> </div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span><span class="preprocessor">#endif  </span><span class="comment">// TENSORFLOW_LITE_KERNELS_INTERNAL_COMMON_H_</span></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d_html_a239169c76410c3a81fd9cba67cc0bc8f"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a239169c76410c3a81fd9cba67cc0bc8f">output_shift</a></div><div class="ttdeci">int output_shift</div><div class="ttdef"><b>Definition</b> add_n.cpp:44</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d_html_a2e6a27b448848b3057c45363e04b7d0d"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#a2e6a27b448848b3057c45363e04b7d0d">output_activation_min</a></div><div class="ttdeci">int32_t output_activation_min</div><div class="ttdef"><b>Definition</b> add_n.cpp:37</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d_html_aa889d7b51a3f84357d44f05993ac08a1"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aa889d7b51a3f84357d44f05993ac08a1">output_activation_max</a></div><div class="ttdeci">int32_t output_activation_max</div><div class="ttdef"><b>Definition</b> add_n.cpp:38</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d_html_aba8502090d4b86973c4819d3a60ce19d"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src07231aa9a2b381aa3c97687e9f0d823d.html#aba8502090d4b86973c4819d3a60ce19d">left_shift</a></div><div class="ttdeci">int left_shift</div><div class="ttdef"><b>Definition</b> add_n.cpp:45</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src22d562cad0a0e140a9fafc1c6a662e94_html_a820c167ceaaa9759b0ca2695d22db55c"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src22d562cad0a0e140a9fafc1c6a662e94.html#a820c167ceaaa9759b0ca2695d22db55c">depth</a></div><div class="ttdeci">size_t depth</div><div class="ttdef"><b>Definition</b> log_softmax.cpp:39</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b_html_a3d0e49fe7ae38f6479154745fcddfdd1"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src3235c69a62905bb7b07aeea528dbaf1b.html#a3d0e49fe7ae38f6479154745fcddfdd1">input_zero_point</a></div><div class="ttdeci">int32_t input_zero_point</div><div class="ttdef"><b>Definition</b> tanh.cpp:38</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143_html_a9cebfb3d6ddd692fbdd268cf4b9ad024"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src5afb18c45f6346167aa977a363205143.html#a9cebfb3d6ddd692fbdd268cf4b9ad024">input</a></div><div class="ttdeci">TfLiteTensor * input</div><div class="ttdef"><b>Definition</b> squeeze.cpp:43</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73_html_a153a4c7bc866139ad88ebf7cb7f4c400"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a153a4c7bc866139ad88ebf7cb7f4c400">TFLITE_DCHECK_LE</a></div><div class="ttdeci">#define TFLITE_DCHECK_LE(x, y)</div><div class="ttdef"><b>Definition</b> compatibility.h:43</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73_html_a67d8abfffe84d6f96f1886241e903664"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a67d8abfffe84d6f96f1886241e903664">TFLITE_DCHECK_EQ</a></div><div class="ttdeci">#define TFLITE_DCHECK_EQ(x, y)</div><div class="ttdef"><b>Definition</b> compatibility.h:27</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73_html_a8d050e4dccce9da457a5aaa90add5c09"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#a8d050e4dccce9da457a5aaa90add5c09">TFLITE_DCHECK_LT</a></div><div class="ttdeci">#define TFLITE_DCHECK_LT(x, y)</div><div class="ttdef"><b>Definition</b> compatibility.h:47</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73_html_aa1fb5f50e87b3ea5035ce24090d458d4"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aa1fb5f50e87b3ea5035ce24090d458d4">TFLITE_CHECK_GT</a></div><div class="ttdeci">#define TFLITE_CHECK_GT(x, y)</div><div class="ttdef"><b>Definition</b> compatibility.h:68</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73_html_aae1ef2f661f926fac4c1555e46d4c704"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#aae1ef2f661f926fac4c1555e46d4c704">TFLITE_DCHECK</a></div><div class="ttdeci">#define TFLITE_DCHECK(condition)</div><div class="ttdef"><b>Definition</b> compatibility.h:23</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73_html_ac8167911bdd7e5400cc62d8dda17ee7d"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#ac8167911bdd7e5400cc62d8dda17ee7d">TFLITE_DCHECK_GT</a></div><div class="ttdeci">#define TFLITE_DCHECK_GT(x, y)</div><div class="ttdef"><b>Definition</b> compatibility.h:39</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73_html_ae45cce3e44eefbb5a09cea1b3baba0e3"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2src82599f02174ce2f1c2fd003f3eee8b73.html#ae45cce3e44eefbb5a09cea1b3baba0e3">TFLITE_DCHECK_GE</a></div><div class="ttdeci">#define TFLITE_DCHECK_GE(x, y)</div><div class="ttdef"><b>Definition</b> compatibility.h:35</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcaf138809236f667e9686fdd4aaf17705_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcaf138809236f667e9686fdd4aaf17705.html#aed7ea92f45bd273dde380a45ddced592">offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition</b> mirror_pad.cpp:27</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6_html_a6150e0515f7202e2fb518f7206ed97dc"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbb3c8e6cb6b1b9e60f2136ee8b58a8b6.html#a6150e0515f7202e2fb518f7206ed97dc">x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition</b> detection_postprocess.cpp:81</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437_html_a7a2a916a8059078c2d7a05f46c7126fd"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbcd3bbe90c4644d53fde1ce4e312f437.html#a7a2a916a8059078c2d7a05f46c7126fd">output</a></div><div class="ttdeci">TfLiteEvalTensor * output</div><div class="ttdef"><b>Definition</b> maximum_minimum.cpp:49</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844_html_a0311ef9b909d7a0d03b91d4e25a28a35"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcbd0426898cca233a5356f2d5a6701844.html#a0311ef9b909d7a0d03b91d4e25a28a35">GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT</a></div><div class="ttdeci">#define GEMMLOWP_CHECKED_FIXEDPOINT_CONSTANT(FixedPointType, ScalarRawInt32Value, DoubleValue)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:710</div></div>
<div class="ttc" id="a_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db_html_a01779cbc43b9b8996d7f980787aa369a"><div class="ttname"><a href="_arduino_2_get_started_with_machine_learning_on_arduino_2tflite-micro-arduino-examples-main_2srcdbbcea48b7370cae941ce591e80d67db.html#a01779cbc43b9b8996d7f980787aa369a">output_zero_point</a></div><div class="ttdeci">int32_t output_zero_point</div><div class="ttdef"><b>Definition</b> div.cpp:37</div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2cppmath_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2cppmath_8h.html">cppmath.h</a></div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2optimized_2neon__check_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2optimized_2neon__check_8h.html">neon_check.h</a></div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2types_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2tensorflow_2lite_2kernels_2internal_2types_8h.html">types.h</a></div></div>
<div class="ttc" id="a_face___access__inferencing_2src_2edge-impulse-sdk_2third__party_2gemmlowp_2fixedpoint_2fixedpoint_8h_html"><div class="ttname"><a href="_face___access__inferencing_2src_2edge-impulse-sdk_2third__party_2gemmlowp_2fixedpoint_2fixedpoint_8h.html">fixedpoint.h</a></div></div>
<div class="ttc" id="a_test_a_p_d_s9960_color_8ino_html_a148e3876077787926724625411d6e7a9"><div class="ttname"><a href="_test_a_p_d_s9960_color_8ino.html#a148e3876077787926724625411d6e7a9">b</a></div><div class="ttdeci">int b</div><div class="ttdef"><b>Definition</b> TestAPDS9960Color.ino:12</div></div>
<div class="ttc" id="a_test_a_p_d_s9960_color_8ino_html_acab531abaa74a7e664e3986f2522b33a"><div class="ttname"><a href="_test_a_p_d_s9960_color_8ino.html#acab531abaa74a7e664e3986f2522b33a">r</a></div><div class="ttdeci">int r</div><div class="ttdef"><b>Definition</b> TestAPDS9960Color.ino:10</div></div>
<div class="ttc" id="aakida_8h_html_a0792621910eb31f95019ddc94eb3dece"><div class="ttname"><a href="akida_8h.html#a0792621910eb31f95019ddc94eb3dece">input_shape</a></div><div class="ttdeci">static std::vector&lt; size_t &gt; input_shape</div><div class="ttdef"><b>Definition</b> akida.h:85</div></div>
<div class="ttc" id="aclassgemmlowp_1_1_fixed_point_html"><div class="ttname"><a href="classgemmlowp_1_1_fixed_point.html">gemmlowp::FixedPoint</a></div><div class="ttdef"><b>Definition</b> fixedpoint.h:450</div></div>
<div class="ttc" id="aclassgemmlowp_1_1_fixed_point_html_a2a1d836acd30cc363e4b453e4f038457"><div class="ttname"><a href="classgemmlowp_1_1_fixed_point.html#a2a1d836acd30cc363e4b453e4f038457">gemmlowp::FixedPoint::raw</a></div><div class="ttdeci">RawType raw() const</div><div class="ttdef"><b>Definition</b> fixedpoint.h:524</div></div>
<div class="ttc" id="aclassgemmlowp_1_1_fixed_point_html_a9cf050964da422f90d3394604486a19b"><div class="ttname"><a href="classgemmlowp_1_1_fixed_point.html#a9cf050964da422f90d3394604486a19b">gemmlowp::FixedPoint::FromRaw</a></div><div class="ttdeci">static FixedPoint FromRaw(RawType x)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:481</div></div>
<div class="ttc" id="aclasstflite_1_1_runtime_shape_html_a647264349b0f266c94102a8b3dda22cf"><div class="ttname"><a href="classtflite_1_1_runtime_shape.html#a647264349b0f266c94102a8b3dda22cf">tflite::RuntimeShape::ExtendedShape</a></div><div class="ttdeci">static RuntimeShape ExtendedShape(int new_shape_size, const RuntimeShape &amp;shape)</div><div class="ttdef"><b>Definition</b> runtime_shape.h:70</div></div>
<div class="ttc" id="acommon__functions_8h_html_ac6afabdc09a49a433ee19d8a9486056d"><div class="ttname"><a href="common__functions_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a></div><div class="ttdeci">#define min(a, b)</div><div class="ttdef"><b>Definition</b> common_functions.h:35</div></div>
<div class="ttc" id="acommon__functions_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="common__functions_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition</b> common_functions.h:29</div></div>
<div class="ttc" id="aei__aligned__malloc_8h_html_a0619a76ea2d4e6cce18b93ddf5082a36"><div class="ttname"><a href="ei__aligned__malloc_8h.html#a0619a76ea2d4e6cce18b93ddf5082a36">ptr</a></div><div class="ttdeci">return ptr</div><div class="ttdef"><b>Definition</b> ei_aligned_malloc.h:80</div></div>
<div class="ttc" id="aei__aligned__malloc_8h_html_a95cd4fa643ce672b347744b35c5b7056"><div class="ttname"><a href="ei__aligned__malloc_8h.html#a95cd4fa643ce672b347744b35c5b7056">assert</a></div><div class="ttdeci">assert((align &amp;(align - 1))==0)</div></div>
<div class="ttc" id="aei__run__dsp_8h_html_ad2900253d2779d0db156053c95c88b24"><div class="ttname"><a href="ei__run__dsp_8h.html#ad2900253d2779d0db156053c95c88b24">rows</a></div><div class="ttdeci">output_matrix rows</div><div class="ttdef"><b>Definition</b> ei_run_dsp.h:216</div></div>
<div class="ttc" id="aei__run__dsp_8h_html_af2c814313b7abeea412ee58a5c687dc3"><div class="ttname"><a href="ei__run__dsp_8h.html#af2c814313b7abeea412ee58a5c687dc3">cols</a></div><div class="ttdeci">output_matrix cols</div><div class="ttdef"><b>Definition</b> ei_run_dsp.h:217</div></div>
<div class="ttc" id="agroup__ei__functions_html_gaf4ad914acba713176b1f00a800e781ba"><div class="ttname"><a href="group__ei__functions.html#gaf4ad914acba713176b1f00a800e781ba">result</a></div><div class="ttdeci">const ei_learning_block_config_tflite_graph_t ei_impulse_result_t * result</div><div class="ttdef"><b>Definition</b> ei_fill_result_struct.h:206</div></div>
<div class="ttc" id="amicro_2kernels_2filter__bank__log_8cc_html_aad7699ab55cc1f497d8d2861fd2d0dd2"><div class="ttname"><a href="micro_2kernels_2filter__bank__log_8cc.html#aad7699ab55cc1f497d8d2861fd2d0dd2">output_scale</a></div><div class="ttdeci">int output_scale</div><div class="ttdef"><b>Definition</b> filter_bank_log.cc:42</div></div>
<div class="ttc" id="amicro_2kernels_2overlap__add_8cc_html_a231b67310ea6e901bd0df1bded3963cf"><div class="ttname"><a href="micro_2kernels_2overlap__add_8cc.html#a231b67310ea6e901bd0df1bded3963cf">type</a></div><div class="ttdeci">TfLiteType type</div><div class="ttdef"><b>Definition</b> overlap_add.cc:46</div></div>
<div class="ttc" id="anamespace_arduino_tinyml_workshop_html_a230c8eac09a3338f6adcc073d97bc4a1"><div class="ttname"><a href="namespace_arduino_tinyml_workshop.html#a230c8eac09a3338f6adcc073d97bc4a1">ArduinoTinymlWorkshop.index</a></div><div class="ttdeci">index</div><div class="ttdef"><b>Definition</b> ArduinoTinymlWorkshop.py:47</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a03d0a1a3d2937ae240dc38420e8a4edd"><div class="ttname"><a href="namespacegemmlowp.html#a03d0a1a3d2937ae240dc38420e8a4edd">gemmlowp::MaskIfLessThan</a></div><div class="ttdeci">tIntegerType MaskIfLessThan(tIntegerType a, tIntegerType b)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:199</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a11e5e1e83d8440636572761481946a40"><div class="ttname"><a href="namespacegemmlowp.html#a11e5e1e83d8440636572761481946a40">gemmlowp::one_over_one_plus_x_for_x_in_0_1</a></div><div class="ttdeci">FixedPoint&lt; tRawType, 0 &gt; one_over_one_plus_x_for_x_in_0_1(FixedPoint&lt; tRawType, 0 &gt; a)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:842</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a1e955db8aed2ffb796737651b688da6f"><div class="ttname"><a href="namespacegemmlowp.html#a1e955db8aed2ffb796737651b688da6f">gemmlowp::MaskIfGreaterThan</a></div><div class="ttdeci">tIntegerType MaskIfGreaterThan(tIntegerType a, tIntegerType b)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:185</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a3187e2ee96777e8d15e8b77a2feccf79"><div class="ttname"><a href="namespacegemmlowp.html#a3187e2ee96777e8d15e8b77a2feccf79">gemmlowp::Rescale</a></div><div class="ttdeci">FixedPoint&lt; tRawType, tIntegerBitsDst &gt; Rescale(FixedPoint&lt; tRawType, tIntegerBitsSrc &gt; x)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:668</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a34891a7112dcf0d89456b754c5633e01"><div class="ttname"><a href="namespacegemmlowp.html#a34891a7112dcf0d89456b754c5633e01">gemmlowp::RoundingHalfSum</a></div><div class="ttdeci">IntegerType RoundingHalfSum(IntegerType a, IntegerType b)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:229</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a79cd39a0e9ebaea7b0bc35f6ac1a675e"><div class="ttname"><a href="namespacegemmlowp.html#a79cd39a0e9ebaea7b0bc35f6ac1a675e">gemmlowp::SaturatingRoundingMultiplyByPOT</a></div><div class="ttdeci">IntegerType SaturatingRoundingMultiplyByPOT(IntegerType x)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:416</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a7d5169f4bc71a22c6a5adf9c1b73267d"><div class="ttname"><a href="namespacegemmlowp.html#a7d5169f4bc71a22c6a5adf9c1b73267d">gemmlowp::RoundingDivideByPOT</a></div><div class="ttdeci">IntegerType RoundingDivideByPOT(IntegerType x, int exponent)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:357</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a7ef1c7121f41059f08e28aad77e2736f"><div class="ttname"><a href="namespacegemmlowp.html#a7ef1c7121f41059f08e28aad77e2736f">gemmlowp::SaturatingRoundingDoublingHighMul</a></div><div class="ttdeci">IntegerType SaturatingRoundingDoublingHighMul(IntegerType a, IntegerType b)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:320</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a9200374a9481b271d4ce140e9a449976"><div class="ttname"><a href="namespacegemmlowp.html#a9200374a9481b271d4ce140e9a449976">gemmlowp::SelectUsingMask</a></div><div class="ttdeci">tIntegerType SelectUsingMask(tIntegerType if_mask, tIntegerType then_val, tIntegerType else_val)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:148</div></div>
<div class="ttc" id="anamespacegemmlowp_html_a980262a3a56242e79e4d8f93dfefd5ae"><div class="ttname"><a href="namespacegemmlowp.html#a980262a3a56242e79e4d8f93dfefd5ae">gemmlowp::ShiftLeft</a></div><div class="ttdeci">tIntegerType ShiftLeft(tIntegerType a, int offset)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:125</div></div>
<div class="ttc" id="anamespacegemmlowp_html_af414df67b77d1c8673b681247cb6d91d"><div class="ttname"><a href="namespacegemmlowp.html#af414df67b77d1c8673b681247cb6d91d">gemmlowp::Dup</a></div><div class="ttdeci">tRawType Dup(typename FixedPointRawTypeTraits&lt; tRawType &gt;::ScalarRawType x)</div><div class="ttdef"><b>Definition</b> fixedpoint.h:64</div></div>
<div class="ttc" id="anamespacelayer__by__layer__debugger_html_a17f6459091d8c3d09c744a8208d1a44e"><div class="ttname"><a href="namespacelayer__by__layer__debugger.html#a17f6459091d8c3d09c744a8208d1a44e">layer_by_layer_debugger.threshold</a></div><div class="ttdeci">threshold</div><div class="ttdef"><b>Definition</b> layer_by_layer_debugger.py:32</div></div>
<div class="ttc" id="anamespacetflite-camera-button_html_ac1be43aa5f1883983bb8e5bb88cd53a1"><div class="ttname"><a href="namespacetflite-camera-button.html#ac1be43aa5f1883983bb8e5bb88cd53a1">tflite-camera-button.a</a></div><div class="ttdeci">int a</div><div class="ttdef"><b>Definition</b> tflite-camera-button.py:96</div></div>
<div class="ttc" id="anamespacetflite_1_1detail_html_a00eb2d8d8766161e3d00553394071031"><div class="ttname"><a href="namespacetflite_1_1detail.html#a00eb2d8d8766161e3d00553394071031">tflite::detail::LUTTransform</a></div><div class="ttdeci">std::enable_if&lt; std::is_same&lt; Func, FloatT(*)(FloatT)&gt;::value, FloatT &gt;::type LUTTransform(Func transform, const void *, FloatT value)</div><div class="ttdef"><b>Definition</b> common.h:388</div></div>
<div class="ttc" id="anamespacetflite_1_1detail_html_a0e5d22cc0481ea2758802f49a7c6b2cd"><div class="ttname"><a href="namespacetflite_1_1detail.html#a0e5d22cc0481ea2758802f49a7c6b2cd">tflite::detail::LUTPopulateInt16</a></div><div class="ttdeci">void LUTPopulateInt16(FloatT input_scale, int32_t input_zero_point, FloatT output_scale, int32_t output_zero_point, Func transform, const void *transform_params, int16_t *lut)</div><div class="ttdef"><b>Definition</b> common.h:434</div></div>
<div class="ttc" id="anamespacetflite_1_1detail_html_adbde00855839620ca0835ba3d5e3c739"><div class="ttname"><a href="namespacetflite_1_1detail.html#adbde00855839620ca0835ba3d5e3c739">tflite::detail::LUTPopulateInt8</a></div><div class="ttdeci">void LUTPopulateInt8(float input_scale, int32_t input_zero_point, float output_scale, int32_t output_zero_point, Func transform, const void *transform_params, T *lut)</div><div class="ttdef"><b>Definition</b> common.h:408</div></div>
<div class="ttc" id="anamespacetflite_1_1reference__ops_1_1batch__matmul_html_ad8a9d9fce75e1b4a31bad0c57f293676"><div class="ttname"><a href="namespacetflite_1_1reference__ops_1_1batch__matmul.html#ad8a9d9fce75e1b4a31bad0c57f293676">tflite::reference_ops::batch_matmul::extent</a></div><div class="ttdeci">int extent(const RuntimeShape &amp;shape, int x)</div><div class="ttdef"><b>Definition</b> batch_matmul.h:40</div></div>
<div class="ttc" id="anamespacetflite_html"><div class="ttname"><a href="namespacetflite.html">tflite</a></div><div class="ttdef"><b>Definition</b> context_util.h:26</div></div>
<div class="ttc" id="anamespacetflite_html_a068e281f9d29fd4d26c51235d6d74086"><div class="ttname"><a href="namespacetflite.html#a068e281f9d29fd4d26c51235d6d74086">tflite::CopyDimsToDesc</a></div><div class="ttdeci">void CopyDimsToDesc(const RuntimeShape &amp;input_shape, NdArrayDesc&lt; N &gt; *desc_out)</div><div class="ttdef"><b>Definition</b> common.h:1042</div></div>
<div class="ttc" id="anamespacetflite_html_a0738549de81a149ce859d0edd7c31a05"><div class="ttname"><a href="namespacetflite.html#a0738549de81a149ce859d0edd7c31a05">tflite::ActivationFunctionWithMinMax</a></div><div class="ttdeci">T ActivationFunctionWithMinMax(T x, T output_activation_min, T output_activation_max)</div><div class="ttdef"><b>Definition</b> common.h:61</div></div>
<div class="ttc" id="anamespacetflite_html_a096b7716925ad65713014e5635dae8f1"><div class="ttname"><a href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1">tflite::FusedActivationFunctionType</a></div><div class="ttdeci">FusedActivationFunctionType</div><div class="ttdef"><b>Definition</b> types.h:28</div></div>
<div class="ttc" id="anamespacetflite_html_a096b7716925ad65713014e5635dae8f1a067892a9ea619b2c378e06000c9763af"><div class="ttname"><a href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1a067892a9ea619b2c378e06000c9763af">tflite::FusedActivationFunctionType::kRelu</a></div><div class="ttdeci">@ kRelu</div></div>
<div class="ttc" id="anamespacetflite_html_a096b7716925ad65713014e5635dae8f1a35c3ace1970663a16e5c65baa5941b13"><div class="ttname"><a href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1a35c3ace1970663a16e5c65baa5941b13">tflite::FusedActivationFunctionType::kNone</a></div><div class="ttdeci">@ kNone</div></div>
<div class="ttc" id="anamespacetflite_html_a096b7716925ad65713014e5635dae8f1a4c7f8cb4a4aefd7ac6a89fa1b747233d"><div class="ttname"><a href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1a4c7f8cb4a4aefd7ac6a89fa1b747233d">tflite::FusedActivationFunctionType::kRelu6</a></div><div class="ttdeci">@ kRelu6</div></div>
<div class="ttc" id="anamespacetflite_html_a096b7716925ad65713014e5635dae8f1ae0a0000573fa134f9ee575b47d839ee4"><div class="ttname"><a href="namespacetflite.html#a096b7716925ad65713014e5635dae8f1ae0a0000573fa134f9ee575b47d839ee4">tflite::FusedActivationFunctionType::kRelu1</a></div><div class="ttdeci">@ kRelu1</div></div>
<div class="ttc" id="anamespacetflite_html_a112b78cba61da67cc551da86e41c6761"><div class="ttname"><a href="namespacetflite.html#a112b78cba61da67cc551da86e41c6761">tflite::kReverseShift</a></div><div class="ttdeci">constexpr int kReverseShift</div><div class="ttdef"><b>Definition</b> common.h:35</div></div>
<div class="ttc" id="anamespacetflite_html_a225624b9a523e2c239a30f91b013eac3"><div class="ttname"><a href="namespacetflite.html#a225624b9a523e2c239a30f91b013eac3">tflite::RoundUp</a></div><div class="ttdeci">Integer RoundUp(Integer i)</div><div class="ttdef"><b>Definition</b> common.h:1187</div></div>
<div class="ttc" id="anamespacetflite_html_a35c6097b2d6d77672a3864ba7086bfaf"><div class="ttname"><a href="namespacetflite.html#a35c6097b2d6d77672a3864ba7086bfaf">tflite::SaturatingSub</a></div><div class="ttdeci">IntegerType SaturatingSub(IntegerType a, IntegerType b)</div><div class="ttdef"><b>Definition</b> common.h:652</div></div>
<div class="ttc" id="anamespacetflite_html_a3670c3d6f1832427faeb85b97d0dd1ab"><div class="ttname"><a href="namespacetflite.html#a3670c3d6f1832427faeb85b97d0dd1ab">tflite::optimized_ops_prefetch_write_l1_keep</a></div><div class="ttdeci">void optimized_ops_prefetch_write_l1_keep(const T *ptr)</div><div class="ttdef"><b>Definition</b> common.h:1261</div></div>
<div class="ttc" id="anamespacetflite_html_a391a5d8e5e1a87759286ead1095a50f4"><div class="ttname"><a href="namespacetflite.html#a391a5d8e5e1a87759286ead1095a50f4">tflite::GetActivationMinMax</a></div><div class="ttdeci">void GetActivationMinMax(FusedActivationFunctionType ac, float *output_activation_min, float *output_activation_max)</div><div class="ttdef"><b>Definition</b> common.h:37</div></div>
<div class="ttc" id="anamespacetflite_html_a3f8466214ce6e31f84f1af6add1b2bcb"><div class="ttname"><a href="namespacetflite.html#a3f8466214ce6e31f84f1af6add1b2bcb">tflite::ActivationFunction</a></div><div class="ttdeci">float ActivationFunction(float x)</div><div class="ttdef"><b>Definition</b> common.h:70</div></div>
<div class="ttc" id="anamespacetflite_html_a426a39797b9bebb2f5de430392f47dc4"><div class="ttname"><a href="namespacetflite.html#a426a39797b9bebb2f5de430392f47dc4">tflite::min_log_x_output_bits</a></div><div class="ttdeci">constexpr int min_log_x_output_bits(int input_bits)</div><div class="ttdef"><b>Definition</b> common.h:748</div></div>
<div class="ttc" id="anamespacetflite_html_a431b5d05f9c57d8c1b282e0226944e16"><div class="ttname"><a href="namespacetflite.html#a431b5d05f9c57d8c1b282e0226944e16">tflite::optimized_ops_preload_l1_keep</a></div><div class="ttdeci">void optimized_ops_preload_l1_keep(const T *ptr)</div><div class="ttdef"><b>Definition</b> common.h:1251</div></div>
<div class="ttc" id="anamespacetflite_html_a43de35b04f739a88bca00031e19ddc55"><div class="ttname"><a href="namespacetflite.html#a43de35b04f739a88bca00031e19ddc55">tflite::FloorLog2</a></div><div class="ttdeci">Integer FloorLog2(Integer n)</div><div class="ttdef"><b>Definition</b> common.h:368</div></div>
<div class="ttc" id="anamespacetflite_html_a5462ef7c778d2472287642d9f6276ee6"><div class="ttname"><a href="namespacetflite.html#a5462ef7c778d2472287642d9f6276ee6">tflite::BiasAndClamp</a></div><div class="ttdeci">void BiasAndClamp(float clamp_min, float clamp_max, int bias_size, const float *bias_data, int array_size, float *array_data)</div><div class="ttdef"><b>Definition</b> common.h:77</div></div>
<div class="ttc" id="anamespacetflite_html_a5ee41ae3362aee6ff8a7c13874734314"><div class="ttname"><a href="namespacetflite.html#a5ee41ae3362aee6ff8a7c13874734314">tflite::NDOpsHelperImpl</a></div><div class="ttdeci">std::enable_if&lt; DIM!=N-1, void &gt;::type NDOpsHelperImpl(const NdArrayDesc&lt; N &gt; &amp;output, const Calc &amp;calc, int indexes[N])</div><div class="ttdef"><b>Definition</b> common.h:1149</div></div>
<div class="ttc" id="anamespacetflite_html_a760e75250ae8653f7ce34572b7ec80e6"><div class="ttname"><a href="namespacetflite.html#a760e75250ae8653f7ce34572b7ec80e6">tflite::NdArrayDescsForElementwiseBroadcast</a></div><div class="ttdeci">void NdArrayDescsForElementwiseBroadcast(const Dims&lt; N &gt; &amp;input0_dims, const Dims&lt; N &gt; &amp;input1_dims, NdArrayDesc&lt; N &gt; *desc0_out, NdArrayDesc&lt; N &gt; *desc1_out)</div><div class="ttdef"><b>Definition</b> common.h:1006</div></div>
<div class="ttc" id="anamespacetflite_html_a79c83fc49a70b2327ad7a032aba876f1"><div class="ttname"><a href="namespacetflite.html#a79c83fc49a70b2327ad7a032aba876f1">tflite::GetInvSqrtQuantizedMultiplierExp</a></div><div class="ttdeci">void GetInvSqrtQuantizedMultiplierExp(int32_t input, int reverse_shift, int32_t *output_inv_sqrt, int *output_shift)</div><div class="ttdef"><b>Definition</b> common.h:875</div></div>
<div class="ttc" id="anamespacetflite_html_a79eeae9e2bbb65f250bf862066d349af"><div class="ttname"><a href="namespacetflite.html#a79eeae9e2bbb65f250bf862066d349af">tflite::RoundDown</a></div><div class="ttdeci">Integer RoundDown(Integer i)</div><div class="ttdef"><b>Definition</b> common.h:1177</div></div>
<div class="ttc" id="anamespacetflite_html_a7f5e467aa646ee62259f3919d2a5a738"><div class="ttname"><a href="namespacetflite.html#a7f5e467aa646ee62259f3919d2a5a738">tflite::GetReciprocal</a></div><div class="ttdeci">int32_t GetReciprocal(int32_t x, int x_integer_digits, int *num_bits_over_unit)</div><div class="ttdef"><b>Definition</b> common.h:858</div></div>
<div class="ttc" id="anamespacetflite_html_a871ed2eb866b2abcfa5d3ea59f8115cc"><div class="ttname"><a href="namespacetflite.html#a871ed2eb866b2abcfa5d3ea59f8115cc">tflite::MultiplyByQuantizedMultiplierSmallerThanOneExp</a></div><div class="ttdeci">int32_t MultiplyByQuantizedMultiplierSmallerThanOneExp(int32_t x, int32_t quantized_multiplier, int left_shift)</div><div class="ttdef"><b>Definition</b> common.h:238</div></div>
<div class="ttc" id="anamespacetflite_html_a8b76acb41e8e5d68b76cf19ddc112d18"><div class="ttname"><a href="namespacetflite.html#a8b76acb41e8e5d68b76cf19ddc112d18">tflite::SaturatingAddNonGemmlowp</a></div><div class="ttdeci">IntegerType SaturatingAddNonGemmlowp(IntegerType a, IntegerType b)</div><div class="ttdef"><b>Definition</b> common.h:626</div></div>
<div class="ttc" id="anamespacetflite_html_a8bf8cda01e9429a8a204886334ce9d24"><div class="ttname"><a href="namespacetflite.html#a8bf8cda01e9429a8a204886334ce9d24">tflite::MultiplyByQuantizedMultiplier</a></div><div class="ttdeci">int32_t MultiplyByQuantizedMultiplier(int32_t x, int32_t quantized_multiplier, int shift)</div><div class="ttdef"><b>Definition</b> common.h:253</div></div>
<div class="ttc" id="anamespacetflite_html_a90b39c749aaf4b036ab5268d03fed4b5"><div class="ttname"><a href="namespacetflite.html#a90b39c749aaf4b036ab5268d03fed4b5">tflite::CountLeadingZeros</a></div><div class="ttdeci">int CountLeadingZeros(T integer_input)</div><div class="ttdef"><b>Definition</b> common.h:328</div></div>
<div class="ttc" id="anamespacetflite_html_a9adbebe0595b9401865a5a828af0dd73"><div class="ttname"><a href="namespacetflite.html#a9adbebe0595b9401865a5a828af0dd73">tflite::LUTPopulate</a></div><div class="ttdeci">std::enable_if&lt; std::is_same&lt; T, uint8_t &gt;::value||std::is_same&lt; T, int8_t &gt;::value, void &gt;::type LUTPopulate(float input_scale, int32_t input_zero_point, float output_scale, int32_t output_zero_point, float(*transform)(float), T *lut)</div><div class="ttdef"><b>Definition</b> common.h:496</div></div>
<div class="ttc" id="anamespacetflite_html_aa77fcca24a574ddb4780417833e4edde"><div class="ttname"><a href="namespacetflite.html#aa77fcca24a574ddb4780417833e4edde">tflite::CeilQuotient</a></div><div class="ttdeci">Integer CeilQuotient(Integer a, Integer b)</div><div class="ttdef"><b>Definition</b> common.h:1196</div></div>
<div class="ttc" id="anamespacetflite_html_aa8188a5dba0126c490b5531d2e6f9101"><div class="ttname"><a href="namespacetflite.html#aa8188a5dba0126c490b5531d2e6f9101">tflite::sigmoid_table_uint16</a></div><div class="ttdeci">static const uint16_t sigmoid_table_uint16[256]</div><div class="ttdef"><b>Definition</b> common.h:598</div></div>
<div class="ttc" id="anamespacetflite_html_ab0177276461d2590b3de2c2333774164"><div class="ttname"><a href="namespacetflite.html#ab0177276461d2590b3de2c2333774164">tflite::SaturatingRoundingMultiplyByPOTParam</a></div><div class="ttdeci">IntegerType SaturatingRoundingMultiplyByPOTParam(IntegerType x, int exponent)</div><div class="ttdef"><b>Definition</b> common.h:689</div></div>
<div class="ttc" id="anamespacetflite_html_ab27f8efe68754a68d65fa1100cd645bb"><div class="ttname"><a href="namespacetflite.html#ab27f8efe68754a68d65fa1100cd645bb">tflite::LUTSize</a></div><div class="ttdeci">constexpr int LUTSize()</div><div class="ttdef"><b>Definition</b> common.h:547</div></div>
<div class="ttc" id="anamespacetflite_html_abd05bc06c2846e9cf3a8fb39150e3f05"><div class="ttname"><a href="namespacetflite.html#abd05bc06c2846e9cf3a8fb39150e3f05">tflite::LegacyHowManyThreads</a></div><div class="ttdeci">int LegacyHowManyThreads(int max_num_threads, int rows, int cols, int depth)</div><div class="ttdef"><b>Definition</b> common.h:1209</div></div>
<div class="ttc" id="anamespacetflite_html_ac4374f7a31a1a872479fb969c365de70"><div class="ttname"><a href="namespacetflite.html#ac4374f7a31a1a872479fb969c365de70">tflite::CountLeadingSignBits</a></div><div class="ttdeci">int CountLeadingSignBits(T integer_input)</div><div class="ttdef"><b>Definition</b> common.h:351</div></div>
<div class="ttc" id="anamespacetflite_html_ad7ab248e3acef703efd58fa6b1c89be5"><div class="ttname"><a href="namespacetflite.html#ad7ab248e3acef703efd58fa6b1c89be5">tflite::log_x_for_x_greater_than_or_equal_to_1_impl</a></div><div class="ttdeci">gemmlowp::FixedPoint&lt; int32_t, OutputIntegerBits &gt; log_x_for_x_greater_than_or_equal_to_1_impl(gemmlowp::FixedPoint&lt; int32_t, InputIntegerBits &gt; input_val)</div><div class="ttdef"><b>Definition</b> common.h:764</div></div>
<div class="ttc" id="anamespacetflite_html_ad8d71bb7ed70864ba58a0576a516a30d"><div class="ttname"><a href="namespacetflite.html#ad8d71bb7ed70864ba58a0576a516a30d">tflite::NDOpsHelper</a></div><div class="ttdeci">void NDOpsHelper(const NdArrayDesc&lt; N &gt; &amp;output, const Calc &amp;calc)</div><div class="ttdef"><b>Definition</b> common.h:1167</div></div>
<div class="ttc" id="anamespacetflite_html_ad9bf84191a47306578085785ee490b83"><div class="ttname"><a href="namespacetflite.html#ad9bf84191a47306578085785ee490b83">tflite::DownScaleInt32ToInt16Multiplier</a></div><div class="ttdeci">void DownScaleInt32ToInt16Multiplier(int32_t multiplier_int32_t, int16_t *multiplier_int16_t)</div><div class="ttdef"><b>Definition</b> common.h:725</div></div>
<div class="ttc" id="anamespacetflite_html_ada717d5a5b12736592e0970790b6e24c"><div class="ttname"><a href="namespacetflite.html#ada717d5a5b12736592e0970790b6e24c">tflite::SubscriptToIndex</a></div><div class="ttdeci">int SubscriptToIndex(const NdArrayDesc&lt; 4 &gt; &amp;desc, int i0, int i1, int i2, int i3)</div><div class="ttdef"><b>Definition</b> common.h:960</div></div>
<div class="ttc" id="anamespacetflite_html_adc6b749cb190829203e56b34c294f61b"><div class="ttname"><a href="namespacetflite.html#adc6b749cb190829203e56b34c294f61b">tflite::ArraySize</a></div><div class="ttdeci">int ArraySize(const Dims&lt; N &gt; &amp;array, int index)</div><div class="ttdef"><b>Definition</b> types.h:242</div></div>
<div class="ttc" id="anamespacetflite_html_ae05f61df279ed1cdfa648eaae39bc3da"><div class="ttname"><a href="namespacetflite.html#ae05f61df279ed1cdfa648eaae39bc3da">tflite::optimized_ops_preload_l1_stream</a></div><div class="ttdeci">void optimized_ops_preload_l1_stream(const T *ptr)</div><div class="ttdef"><b>Definition</b> common.h:1241</div></div>
<div class="ttc" id="anamespacetflite_html_aee0d1caf71a130e0c374615ab8ae569a"><div class="ttname"><a href="namespacetflite.html#aee0d1caf71a130e0c374615ab8ae569a">tflite::log_x_for_x_greater_than_or_equal_to_1</a></div><div class="ttdeci">gemmlowp::FixedPoint&lt; int32_t, OutputIntegerBits &gt; log_x_for_x_greater_than_or_equal_to_1(gemmlowp::FixedPoint&lt; int32_t, InputIntegerBits &gt; input_val)</div><div class="ttdef"><b>Definition</b> common.h:848</div></div>
<div class="ttc" id="anamespacetflite_html_af3cb549a185a8970419fc95354980452"><div class="ttname"><a href="namespacetflite.html#af3cb549a185a8970419fc95354980452">tflite::LUTLookup</a></div><div class="ttdeci">int16_t LUTLookup(int16_t value, const int16_t *lut)</div><div class="ttdef"><b>Definition</b> common.h:560</div></div>
<div class="ttc" id="anamespacetflite_html_af6e41c0b657bdbaddfb16fa6949268b4"><div class="ttname"><a href="namespacetflite.html#af6e41c0b657bdbaddfb16fa6949268b4">tflite::MultiplyByQuantizedMultiplierGreaterThanOne</a></div><div class="ttdeci">int32_t MultiplyByQuantizedMultiplierGreaterThanOne(int32_t x, int32_t quantized_multiplier, int left_shift)</div><div class="ttdef"><b>Definition</b> common.h:246</div></div>
<div class="ttc" id="astructgemmlowp_1_1_fixed_point_raw_type_traits_html"><div class="ttname"><a href="structgemmlowp_1_1_fixed_point_raw_type_traits.html">gemmlowp::FixedPointRawTypeTraits</a></div><div class="ttdef"><b>Definition</b> fixedpoint.h:48</div></div>
<div class="ttc" id="astructtflite_1_1_nd_array_desc_html"><div class="ttname"><a href="structtflite_1_1_nd_array_desc.html">tflite::NdArrayDesc</a></div><div class="ttdef"><b>Definition</b> common.h:946</div></div>
<div class="ttc" id="astructtflite_1_1_nd_array_desc_html_a1ba97916bd24264182c16ad58ca3dfd6"><div class="ttname"><a href="structtflite_1_1_nd_array_desc.html#a1ba97916bd24264182c16ad58ca3dfd6">tflite::NdArrayDesc::extents</a></div><div class="ttdeci">int extents[N]</div><div class="ttdef"><b>Definition</b> common.h:949</div></div>
<div class="ttc" id="astructtflite_1_1_nd_array_desc_html_a3dec8864002e5b17f00b7b586a992cae"><div class="ttname"><a href="structtflite_1_1_nd_array_desc.html#a3dec8864002e5b17f00b7b586a992cae">tflite::NdArrayDesc::strides</a></div><div class="ttdeci">int strides[N]</div><div class="ttdef"><b>Definition</b> common.h:953</div></div>
<div class="ttc" id="awm8960__regs_8h_html_a638e4503e0ae6ce655b7ad2e17e8f0ad"><div class="ttname"><a href="wm8960__regs_8h.html#a638e4503e0ae6ce655b7ad2e17e8f0ad">value</a></div><div class="ttdeci">uint8_t value</div><div class="ttdef"><b>Definition</b> wm8960_regs.h:134</div></div>
<div class="ttc" id="awm8960__regs_8h_html_ace4e4903c356d90d7a0e7548fc1e8b50"><div class="ttname"><a href="wm8960__regs_8h.html#ace4e4903c356d90d7a0e7548fc1e8b50">shift</a></div><div class="ttdeci">const uint8_t shift</div><div class="ttdef"><b>Definition</b> wm8960_regs.h:95</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
